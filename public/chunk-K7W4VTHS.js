import{Ba as u,Ca as f,Da as g,Ea as i,Fa as D,Ga as a,Ia as p,Ja as w,Ka as S,La as q,Ma as c,e as s,l as y,o as m,ya as h}from"./chunk-7GPC4YN3.js";var C=class l{constructor(t){this.firestore=t}createDocument(t,e,o=null){return s(this,null,function*(){let n;if(o)n=i(this.firestore,`${t}/${o}`);else{let d=u(this.firestore,t);n=i(d)}let r=e;return r.id=n.id,r.creado=w(),yield S(n,r),r.id})}updateDocument(t,e){return s(this,null,function*(){let o=i(this.firestore,t);return yield q(o,e)})}deleteDocument(t){return s(this,null,function*(){let e=i(this.firestore,t);return yield g(e)})}getDocument(t){return s(this,null,function*(){let e=i(this.firestore,t);return yield D(e)})}getDocuments(t,e=!1){return s(this,null,function*(){if(e){let o=f(this.firestore,t);return yield a(o)}else{let o=u(this.firestore,t);return yield a(o)}})}getUsuariosPendientes(t,e=!1){return s(this,null,function*(){let o;if(e){o=f(this.firestore,t);let n=p(o,c("rol","==","cliente"),c("estadoCliente","==","pendiente"));return yield a(n)}else{o=u(this.firestore,t);let n=p(o,c("rol","==","cliente"),c("estadoCliente","==","pendiente"));return yield a(n)}})}getUsuarios(){return s(this,null,function*(){return(yield this.getDocuments("usuarios")).docs.map(e=>e.data())})}getEncuestas(){return s(this,null,function*(){return(yield this.getDocuments("encuestas")).docs.map(e=>e.data())})}getDocumentsByField(t,e,o){return s(this,null,function*(){let n=u(this.firestore,t),r=p(n,c(e,"==",o));return(yield a(r)).docs.map(Q=>Q.data())})}getTokenByUid(t){return s(this,null,function*(){return(yield this.getDocument(`usuarios/${t}`)).data().token})}static \u0275fac=function(e){return new(e||l)(m(h))};static \u0275prov=y({token:l,factory:l.\u0275fac,providedIn:"root"})};export{C as a};
