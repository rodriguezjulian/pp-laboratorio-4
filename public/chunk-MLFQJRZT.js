import{a as I}from"./chunk-JPN35WCD.js";import{a as P,b as s,c as D,d as V,f as O,g as k,h as B,i as G,j as $,k as q,l as j,n as R,p as z}from"./chunk-RTGSENQE.js";import{f as x}from"./chunk-UDCWHXKS.js";import{Ea as E,Ga as m,Ia as i,Ja as e,Ka as p,La as T,Ma as f,Na as C,Pa as a,Qa as N,Ra as ee,Wa as S,Y as b,a as A,d as F,e as v,ea as Y,fa as h,ga as y,ka as g,ob as ie,pb as w,rb as _,va as l,wa as u}from"./chunk-HR6EH2NC.js";var ae=F(I());var J=F(I());var L=class o{constructor(n,t){this.fb=n;this.firestoreService=t;this.form=this.fb.group({nombre:["",[s.required,s.pattern("^[a-zA-Z ]+$")]],tipo:["",s.required],patas:["",[s.required,s.min(0),s.max(4)]],peso:["",[s.required,s.min(5),s.max(50)]]})}animalCreado=new g;form;crearAnimal(){return v(this,null,function*(){if(this.form.valid){let n=A({},this.form.value);try{let t=yield this.firestoreService.createDocument("animales",n);console.log(`Animal creado con \xE9xito, ID: ${t}`),J.default.fire({icon:"success",title:"Animal Creado",text:`El animal ${n.nombre} ha sido creado exitosamente.`,confirmButtonText:"Aceptar"}),this.animalCreado.emit(n),this.form.reset()}catch(t){console.error("Error al crear el animal:",t),J.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al crear el animal. Por favor, intenta nuevamente.",confirmButtonText:"Aceptar"})}}})}static \u0275fac=function(t){return new(t||o)(u(R),u(x))};static \u0275cmp=b({type:o,selectors:[["app-alta-animal"]],outputs:{animalCreado:"animalCreado"},standalone:!0,features:[S],decls:30,vars:2,consts:[[1,"card","p-3"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["id","nombre","formControlName","nombre",1,"form-control"],["for","tipo",1,"form-label"],["id","tipo","formControlName","tipo",1,"form-select"],["value",""],["value","Mam\xEDfero"],["value","Ave"],["value","Reptil"],["for","patas",1,"form-label"],["id","patas","type","number","formControlName","patas",1,"form-control"],["for","peso",1,"form-label"],["id","peso","type","number","formControlName","peso",1,"form-control"],[1,"btn","btn-primary","w-100",3,"disabled"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"h5",1),a(2,"Alta Animal"),e(),i(3,"form",2),f("ngSubmit",function(){return r.crearAnimal()}),i(4,"div",3)(5,"label",4),a(6,"Nombre"),e(),p(7,"input",5),e(),i(8,"div",3)(9,"label",6),a(10,"Tipo"),e(),i(11,"select",7)(12,"option",8),a(13,"Seleccione"),e(),i(14,"option",9),a(15,"Mam\xEDfero"),e(),i(16,"option",10),a(17,"Ave"),e(),i(18,"option",11),a(19,"Reptil"),e()()(),i(20,"div",3)(21,"label",12),a(22,"Cantidad de Patas"),e(),p(23,"input",13),e(),i(24,"div",3)(25,"label",14),a(26,"Peso Promedio (kg)"),e(),p(27,"input",15),e(),i(28,"button",16),a(29,"Crear"),e()()()),t&2&&(l(3),m("formGroup",r.form),l(25),m("disabled",r.form.invalid))},dependencies:[z,O,q,j,P,k,$,D,V,B,G,_],encapsulation:2})};var W=F(I());function oe(o,n){o&1&&(i(0,"div",19),a(1," El tipo es obligatorio. "),e())}function le(o,n){o&1&&(i(0,"div",19),a(1," La cantidad de patas debe ser entre 0 y 4. "),e())}function me(o,n){o&1&&(i(0,"div",19),a(1," El peso debe ser entre 5 y 50 kg. "),e())}var Z=class o{constructor(n,t){this.fb=n;this.firestoreService=t;this.form=this.fb.group({tipo:["",s.required],patas:["",[s.required,s.min(0),s.max(4)]],peso:["",[s.required,s.min(5),s.max(50)]]})}animal;animalModificado=new g;form;ngOnChanges(){this.animal&&this.form.patchValue({tipo:this.animal.tipo,patas:this.animal.patas,peso:this.animal.peso})}modificarAnimal(){return v(this,null,function*(){if(this.form.valid){let n=A(A({},this.animal),this.form.value);try{yield this.firestoreService.updateDocument(`animales/${this.animal.id}`,n),W.default.fire({icon:"success",title:"Animal Modificado",text:`El animal ${this.animal.nombre} ha sido modificado exitosamente.`,confirmButtonText:"Aceptar"}),this.animalModificado.emit(n),this.form.reset()}catch(t){console.error("Error al modificar el animal:",t),W.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al modificar el animal. Por favor, intenta nuevamente.",confirmButtonText:"Aceptar"})}}})}static \u0275fac=function(t){return new(t||o)(u(R),u(x))};static \u0275cmp=b({type:o,selectors:[["app-modificar-animal"]],inputs:{animal:"animal"},outputs:{animalModificado:"animalModificado"},standalone:!0,features:[Y,S],decls:35,vars:6,consts:[[1,"card","p-3"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label"],["id","nombre","readonly","",1,"form-control",3,"value"],[1,"text-muted"],["for","tipo",1,"form-label"],["id","tipo","formControlName","tipo",1,"form-select"],["value","","disabled","","selected",""],["value","Mam\xEDfero"],["value","Ave"],["value","Reptil"],["class","text-danger",4,"ngIf"],["for","patas",1,"form-label"],["id","patas","type","number","formControlName","patas",1,"form-control"],["for","peso",1,"form-label"],["id","peso","type","number","formControlName","peso",1,"form-control"],[1,"btn","btn-primary","w-100",3,"disabled"],[1,"text-danger"]],template:function(t,r){if(t&1&&(i(0,"div",0)(1,"h5",1),a(2,"Modificar Animal"),e(),i(3,"form",2),f("ngSubmit",function(){return r.modificarAnimal()}),i(4,"div",3)(5,"label",4),a(6,"Nombre"),e(),p(7,"input",5),i(8,"small",6),a(9,"El nombre no puede ser modificado."),e()(),i(10,"div",3)(11,"label",7),a(12,"Tipo"),e(),i(13,"select",8)(14,"option",9),a(15,"Seleccione"),e(),i(16,"option",10),a(17,"Mam\xEDfero"),e(),i(18,"option",11),a(19,"Ave"),e(),i(20,"option",12),a(21,"Reptil"),e()(),E(22,oe,2,0,"div",13),e(),i(23,"div",3)(24,"label",14),a(25,"Cantidad de Patas"),e(),p(26,"input",15),E(27,le,2,0,"div",13),e(),i(28,"div",3)(29,"label",16),a(30,"Peso Promedio (kg)"),e(),p(31,"input",17),E(32,me,2,0,"div",13),e(),i(33,"button",18),a(34,"Modificar"),e()()()),t&2){let d,c,M;l(3),m("formGroup",r.form),l(4),m("value",r.animal==null?null:r.animal.nombre),l(15),m("ngIf",((d=r.form.get("tipo"))==null?null:d.invalid)&&((d=r.form.get("tipo"))==null?null:d.touched)),l(5),m("ngIf",((c=r.form.get("patas"))==null?null:c.invalid)&&((c=r.form.get("patas"))==null?null:c.touched)),l(5),m("ngIf",((M=r.form.get("peso"))==null?null:M.invalid)&&((M=r.form.get("peso"))==null?null:M.touched)),l(),m("disabled",r.form.invalid)}},dependencies:[z,O,q,j,P,k,$,D,V,B,G,_,w],encapsulation:2})};var X=F(I());var H=class o{constructor(n){this.firestoreService=n}animal;animalEliminado=new g;eliminarAnimal(){return v(this,null,function*(){try{yield this.firestoreService.deleteDocument(`animales/${this.animal.id}`),X.default.fire({icon:"success",title:"Animal Eliminado",text:`El animal ${this.animal.nombre} ha sido eliminado exitosamente.`,confirmButtonText:"Aceptar"}),this.animalEliminado.emit(this.animal)}catch(n){console.error("Error al eliminar el animal:",n),X.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al eliminar el animal. Por favor, intenta nuevamente.",confirmButtonText:"Aceptar"})}})}static \u0275fac=function(t){return new(t||o)(u(x))};static \u0275cmp=b({type:o,selectors:[["app-eliminar-animal"]],inputs:{animal:"animal"},outputs:{animalEliminado:"animalEliminado"},standalone:!0,features:[S],decls:21,vars:4,consts:[[1,"card","p-3"],[1,"text-center","text-danger"],[1,"mb-3"],["for","nombre",1,"form-label"],["id","nombre","readonly","",1,"form-control",3,"value"],["for","tipo",1,"form-label"],["id","tipo","readonly","",1,"form-control",3,"value"],["for","patas",1,"form-label"],["id","patas","readonly","",1,"form-control",3,"value"],["for","peso",1,"form-label"],["id","peso","readonly","",1,"form-control",3,"value"],[1,"btn","btn-danger","w-100",3,"click"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"h5",1),a(2,"Eliminar Animal"),e(),i(3,"div",2)(4,"label",3),a(5,"Nombre"),e(),p(6,"input",4),e(),i(7,"div",2)(8,"label",5),a(9,"Tipo"),e(),p(10,"input",6),e(),i(11,"div",2)(12,"label",7),a(13,"Cantidad de Patas"),e(),p(14,"input",8),e(),i(15,"div",2)(16,"label",9),a(17,"Peso Promedio"),e(),p(18,"input",10),e(),i(19,"button",11),f("click",function(){return r.eliminarAnimal()}),a(20,"Eliminar"),e()()),t&2&&(l(6),m("value",r.animal==null?null:r.animal.nombre),l(4),m("value",r.animal==null?null:r.animal.tipo),l(4),m("value",r.animal==null?null:r.animal.patas),l(4),m("value",r.animal==null?null:r.animal.peso))},dependencies:[_],encapsulation:2})};function se(o,n){if(o&1){let t=T();i(0,"tr")(1,"td"),a(2),e(),i(3,"td"),a(4),e(),i(5,"td"),a(6),e(),i(7,"td"),a(8),e(),i(9,"td")(10,"button",19),f("click",function(){let d=h(t).$implicit,c=C();return y(c.seleccionarAnimalParaModificar(d))}),a(11," Modificar "),e(),i(12,"button",20),f("click",function(){let d=h(t).$implicit,c=C();return y(c.seleccionarAnimalParaEliminar(d))}),a(13," Eliminar "),e()()()}if(o&2){let t=n.$implicit;l(2),N(t.nombre),l(2),N(t.tipo),l(2),N(t.patas),l(2),ee("",t.peso," kg")}}function de(o,n){if(o&1){let t=T();i(0,"app-modificar-animal",21),f("animalModificado",function(d){h(t);let c=C();return y(c.actualizarAnimal(d))}),e()}if(o&2){let t=C();m("animal",t.animalSeleccionado)}}function ce(o,n){if(o&1){let t=T();i(0,"app-eliminar-animal",22),f("animalEliminado",function(d){h(t);let c=C();return y(c.removerAnimal(d))}),e()}if(o&2){let t=C();m("animal",t.animalSeleccionadoParaEliminar)}}var te=class o{constructor(n){this.firestoreService=n;this.cargarAnimales()}animales=[];animalSeleccionado=null;animalSeleccionadoParaEliminar=null;cargarAnimales(){return v(this,null,function*(){try{let n=yield this.firestoreService.getDocuments("animales");this.animales=n.docs.map(t=>A({id:t.id},t.data()))}catch(n){console.error("Error al cargar animales:",n),ae.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al cargar los animales.",confirmButtonText:"Aceptar"})}})}agregarAnimal(n){this.animales.push(n),this.cargarAnimales()}seleccionarAnimalParaModificar(n){this.animalSeleccionado=n}actualizarAnimal(n){let t=this.animales.findIndex(r=>r.id===n.id);t!==-1&&(this.animales[t]=n),this.animalSeleccionado=null}seleccionarAnimalParaEliminar(n){this.animalSeleccionadoParaEliminar=n}removerAnimal(n){this.animales=this.animales.filter(t=>t.id!==n.id),this.animalSeleccionadoParaEliminar=null}static \u0275fac=function(t){return new(t||o)(u(x))};static \u0275cmp=b({type:o,selectors:[["app-tabla-animales"]],standalone:!0,features:[S],decls:37,vars:3,consts:[[1,"container","my-4"],[1,"text-center","mb-4"],[1,"row","mb-4"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-4"],[1,"card","p-3","bg-secondary","text-white"],[1,"text-center"],[3,"animalCreado"],[1,"card","p-3","bg-light"],[1,"text-center","text-primary"],[3,"animal","animalModificado",4,"ngIf"],[1,"card","p-3","bg-dark","text-white"],[1,"text-center","text-danger"],[3,"animal","animalEliminado",4,"ngIf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[3,"animalModificado","animal"],[3,"animalEliminado","animal"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"h2",1),a(2,"Gesti\xF3n de Animales"),e(),i(3,"div",2)(4,"div",3)(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th"),a(10,"Nombre"),e(),i(11,"th"),a(12,"Tipo"),e(),i(13,"th"),a(14,"Cantidad de Patas"),e(),i(15,"th"),a(16,"Peso Promedio"),e(),i(17,"th"),a(18,"Acciones"),e()()(),i(19,"tbody"),E(20,se,14,4,"tr",7),e()()()()(),i(21,"div",8)(22,"div",9)(23,"div",10)(24,"h5",11),a(25,"Alta Animal"),e(),i(26,"app-alta-animal",12),f("animalCreado",function(c){return r.agregarAnimal(c)}),e()()(),i(27,"div",9)(28,"div",13)(29,"h5",14),a(30,"Modificar Animal"),e(),E(31,de,1,1,"app-modificar-animal",15),e()(),i(32,"div",9)(33,"div",16)(34,"h5",17),a(35,"Eliminar Animal"),e(),E(36,ce,1,1,"app-eliminar-animal",18),e()()()()),t&2&&(l(20),m("ngForOf",r.animales),l(11),m("ngIf",r.animalSeleccionado),l(5),m("ngIf",r.animalSeleccionadoParaEliminar))},dependencies:[_,ie,w,L,Z,H],encapsulation:2})};export{te as TablaAnimalesComponent};
