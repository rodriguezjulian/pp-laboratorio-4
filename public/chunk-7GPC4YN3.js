var hA=Object.create;var ph=Object.defineProperty,fA=Object.defineProperties,pA=Object.getOwnPropertyDescriptor,gA=Object.getOwnPropertyDescriptors,mA=Object.getOwnPropertyNames,X_=Object.getOwnPropertySymbols,tI=Object.getPrototypeOf,nI=Object.prototype.hasOwnProperty,yA=Object.prototype.propertyIsEnumerable,vA=Reflect.get;var eI=(t,e,n)=>e in t?ph(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U=(t,e)=>{for(var n in e||={})nI.call(e,n)&&eI(t,n,e[n]);if(X_)for(var n of X_(e))yA.call(e,n)&&eI(t,n,e[n]);return t},Ee=(t,e)=>fA(t,gA(e));var gB=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _A=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mA(e))!nI.call(t,i)&&i!==n&&ph(t,i,{get:()=>e[i],enumerable:!(r=pA(e,i))||r.enumerable});return t};var mB=(t,e,n)=>(n=t!=null?hA(tI(t)):{},_A(e||!t||!t.__esModule?ph(n,"default",{value:t,enumerable:!0}):n,t));var qn=(t,e,n)=>vA(tI(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function rI(t,e){return Object.is(t,e)}var Fe=null,gc=!1,mc=1,vn=Symbol("SIGNAL");function fe(t){let e=Fe;return Fe=t,e}function iI(){return Fe}var go={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yh(t){if(gc)throw new Error("");if(Fe===null)return;Fe.consumerOnSignalRead(t);let e=Fe.nextProducerIndex++;if(Ic(Fe),e<Fe.producerNode.length&&Fe.producerNode[e]!==t&&po(Fe)){let n=Fe.producerNode[e];_c(n,Fe.producerIndexOfThis[e])}Fe.producerNode[e]!==t&&(Fe.producerNode[e]=t,Fe.producerIndexOfThis[e]=po(Fe)?cI(t,Fe,e):0),Fe.producerLastReadVersion[e]=t.version}function IA(){mc++}function sI(t){if(!(po(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===mc)){if(!t.producerMustRecompute(t)&&!_h(t)){t.dirty=!1,t.lastCleanEpoch=mc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=mc}}function oI(t){if(t.liveConsumerNode===void 0)return;let e=gc;gc=!0;try{for(let n of t.liveConsumerNode)n.dirty||wA(n)}finally{gc=e}}function aI(){return Fe?.consumerAllowSignalWrites!==!1}function wA(t){t.dirty=!0,oI(t),t.consumerMarkedDirty?.(t)}function vc(t){return t&&(t.nextProducerIndex=0),fe(t)}function vh(t,e){if(fe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(po(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)_c(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function _h(t){Ic(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(sI(n),r!==n.version))return!0}return!1}function Ih(t){if(Ic(t),po(t))for(let e=0;e<t.producerNode.length;e++)_c(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function cI(t,e,n){if(uI(t),t.liveConsumerNode.length===0&&lI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=cI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function _c(t,e){if(uI(t),t.liveConsumerNode.length===1&&lI(t))for(let r=0;r<t.producerNode.length;r++)_c(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ic(i),i.producerIndexOfThis[r]=e}}function po(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ic(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function uI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function lI(t){return t.producerNode!==void 0}function dI(t){let e=Object.create(EA);e.computation=t;let n=()=>{if(sI(e),yh(e),e.value===yc)throw e.error;return e.value};return n[vn]=e,n}var gh=Symbol("UNSET"),mh=Symbol("COMPUTING"),yc=Symbol("ERRORED"),EA=Ee(U({},go),{value:gh,dirty:!0,error:null,equal:rI,producerMustRecompute(t){return t.value===gh||t.value===mh},producerRecomputeValue(t){if(t.value===mh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=mh;let n=vc(t),r;try{r=t.computation()}catch(i){r=yc,t.error=i}finally{vh(t,n)}if(e!==gh&&e!==yc&&r!==yc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function TA(){throw new Error}var hI=TA;function fI(){hI()}function pI(t){hI=t}var DA=null;function gI(t){let e=Object.create(yI);e.value=t;let n=()=>(yh(e),e.value);return n[vn]=e,n}function wh(t,e){aI()||fI(),t.equal(t.value,e)||(t.value=e,bA(t))}function mI(t,e){aI()||fI(),wh(t,e(t.value))}var yI=Ee(U({},go),{equal:rI,value:void 0});function bA(t){t.version++,IA(),oI(t),DA?.()}function X(t){return typeof t=="function"}function Di(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wc=Di(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(s){e=s instanceof wc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{vI(s)}catch(o){e=e??[],o instanceof wc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)vI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mr(n,e)}remove(e){let{_finalizers:n}=this;n&&Mr(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var Eh=Se.EMPTY;function Ec(t){return t instanceof Se||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function vI(t){X(t)?t():t.unsubscribe()}var Ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bi={setTimeout(t,e,...n){let{delegate:r}=bi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=bi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Tc(t){bi.setTimeout(()=>{let{onUnhandledError:e}=Ft;if(e)e(t);else throw t})}function mo(){}var _I=Th("C",void 0,void 0);function II(t){return Th("E",void 0,t)}function wI(t){return Th("N",t,void 0)}function Th(t,e,n){return{kind:t,value:e,error:n}}var xr=null;function Ci(t){if(Ft.useDeprecatedSynchronousErrorHandling){let e=!xr;if(e&&(xr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xr;if(xr=null,n)throw r}}else t()}function EI(t){Ft.useDeprecatedSynchronousErrorHandling&&xr&&(xr.errorThrown=!0,xr.error=t)}var Pr=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ec(e)&&e.add(this)):this.destination=AA}static create(e,n,r){return new Si(e,n,r)}next(e){this.isStopped?bh(wI(e),this):this._next(e)}error(e){this.isStopped?bh(II(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bh(_I,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CA=Function.prototype.bind;function Dh(t,e){return CA.call(t,e)}var Ch=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Dc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Dc(r)}else Dc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Dc(n)}}},Si=class extends Pr{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ft.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dh(e.next,s),error:e.error&&Dh(e.error,s),complete:e.complete&&Dh(e.complete,s)}):i=e}this.destination=new Ch(i)}};function Dc(t){Ft.useDeprecatedSynchronousErrorHandling?EI(t):Tc(t)}function SA(t){throw t}function bh(t,e){let{onStoppedNotification:n}=Ft;n&&bi.setTimeout(()=>n(t,e))}var AA={closed:!0,next:mo,error:SA,complete:mo};var Ai=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mt(t){return t}function Sh(...t){return Ah(t)}function Ah(t){return t.length===0?mt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=NA(n)?n:new Si(n,r,i);return Ci(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=TI(r),new r((i,s)=>{let o=new Si({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ai](){return this}pipe(...n){return Ah(n)(this)}toPromise(n){return n=TI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function TI(t){var e;return(e=t??Ft.Promise)!==null&&e!==void 0?e:Promise}function RA(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function NA(t){return t&&t instanceof Pr||RA(t)&&Ec(t)}function Rh(t){return X(t?.lift)}function le(t){return e=>{if(Rh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new Nh(t,e,n,r,i)}var Nh=class extends Pr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ri(){return le((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ni=class extends ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Rh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return Ri()(this)}};var DI=Di(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new DI}next(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Eh:(this.currentObservers=null,s.push(n),new Se(()=>{this.currentObservers=null,Mr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ie;return n.source=this,n}}return t.create=(e,n)=>new bc(e,n),t})(),bc=class extends nt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Eh}};var He=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mh={now(){return(Mh.delegate||Date).now()},delegate:void 0};var Cc=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var yo={setInterval(t,e,...n){let{delegate:r}=yo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=yo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Mi=class extends Cc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return yo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&yo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Mr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xi.now=Mh.now;var Pi=class extends xi{constructor(e,n=xi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var xh=new Pi(Mi);var Sc=class extends Mi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ac=class extends Pi{};var Ph=new Ac(Sc);var yt=new ie(t=>t.complete());function bI(t){return t&&X(t.schedule)}function CI(t){return t[t.length-1]}function Rc(t){return X(CI(t))?t.pop():void 0}function Gn(t){return bI(CI(t))?t.pop():void 0}function Oh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function SI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Or(t){return this instanceof Or?(this.v=t,this):new Or(t)}function RI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,O){s.push([y,N,R,O])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(s[0][3],N)}}function l(y){y.value instanceof Or?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function NI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof SI=="function"?SI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Nc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Mc(t){return X(t?.then)}function xc(t){return X(t[Ai])}function Pc(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function Oc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var kc=MA();function Lc(t){return X(t?.[kc])}function Fc(t){return RI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Or(n.read());if(i)return yield Or(void 0);yield yield Or(r)}}finally{n.releaseLock()}})}function Vc(t){return X(t?.getReader)}function Me(t){if(t instanceof ie)return t;if(t!=null){if(xc(t))return xA(t);if(Nc(t))return PA(t);if(Mc(t))return OA(t);if(Pc(t))return MI(t);if(Lc(t))return kA(t);if(Vc(t))return LA(t)}throw Oc(t)}function xA(t){return new ie(e=>{let n=t[Ai]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PA(t){return new ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function OA(t){return new ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Tc)})}function kA(t){return new ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function MI(t){return new ie(e=>{FA(t,e).catch(n=>e.error(n))})}function LA(t){return MI(Fc(t))}function FA(t,e){var n,r,i,s;return AI(this,void 0,void 0,function*(){try{for(n=NI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function lt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Wn(t,e=0){return le((n,r)=>{n.subscribe(ae(r,i=>lt(r,t,()=>r.next(i),e),()=>lt(r,t,()=>r.complete(),e),i=>lt(r,t,()=>r.error(i),e)))})}function Kn(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function xI(t,e){return Me(t).pipe(Kn(e),Wn(e))}function PI(t,e){return Me(t).pipe(Kn(e),Wn(e))}function OI(t,e){return new ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function kI(t,e){return new ie(n=>{let r;return lt(n,e,()=>{r=t[kc](),lt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function Uc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ie(n=>{lt(n,e,()=>{let r=t[Symbol.asyncIterator]();lt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function LI(t,e){return Uc(Fc(t),e)}function FI(t,e){if(t!=null){if(xc(t))return xI(t,e);if(Nc(t))return OI(t,e);if(Mc(t))return PI(t,e);if(Pc(t))return Uc(t,e);if(Lc(t))return kI(t,e);if(Vc(t))return LI(t,e)}throw Oc(t)}function Re(t,e){return e?FI(t,e):Me(t)}function Q(...t){let e=Gn(t);return Re(t,e)}function Oi(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new ie(e?i=>e.schedule(r,0,i):r)}function kh(t){return!!t&&(t instanceof ie||X(t.lift)&&X(t.subscribe))}var _n=Di(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(t,e){return le((n,r)=>{let i=0;n.subscribe(ae(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:VA}=Array;function UA(t,e){return VA(e)?t(...e):t(e)}function jc(t){return ne(e=>UA(t,e))}var{isArray:jA}=Array,{getPrototypeOf:BA,prototype:$A,keys:zA}=Object;function Bc(t){if(t.length===1){let e=t[0];if(jA(e))return{args:e,keys:null};if(HA(e)){let n=zA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function HA(t){return t&&typeof t=="object"&&BA(t)===$A}function $c(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function zc(...t){let e=Gn(t),n=Rc(t),{args:r,keys:i}=Bc(t);if(r.length===0)return Re([],e);let s=new ie(qA(r,e,i?o=>$c(i,o):mt));return n?s.pipe(jc(n)):s}function qA(t,e,n=mt){return r=>{VI(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)VI(e,()=>{let l=Re(t[u],e),h=!1;l.subscribe(ae(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function VI(t,e,n){t?lt(n,t,e):e()}function UI(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{s&&e.next(N),l++;let R=!1;Me(n(N,h++)).subscribe(ae(e,O=>{i?.(O),s?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();o?lt(e,o,()=>C(O)):C(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(ae(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Ve(t,e,n=1/0){return X(e)?Ve((r,i)=>ne((s,o)=>e(r,s,i,o))(Me(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>UI(r,i,t,n)))}function Lh(t=1/0){return Ve(mt,t)}function jI(){return Lh(1)}function ki(...t){return jI()(Re(t,Gn(t)))}function Hc(t){return new ie(e=>{Me(t()).subscribe(e)})}function GA(...t){let e=Rc(t),{args:n,keys:r}=Bc(t),i=new ie(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Me(n[h]).subscribe(ae(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?$c(r,a):a),s.complete())}))}});return e?i.pipe(jc(e)):i}function vt(t,e){return le((n,r)=>{let i=0;n.subscribe(ae(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Qn(t){return le((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ae(n,void 0,void 0,o=>{s=Me(t(o,Qn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function BI(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ae(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Yn(t,e){return X(e)?Ve(t,e,1):Ve(t,1)}function Jn(t){return le((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function In(t){return t<=0?()=>yt:le((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Fh(t){return ne(()=>t)}function qc(t=WA){return le((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function WA(){return new _n}function Zn(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Kt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vt((i,s)=>t(i,s,r)):mt,In(1),n?Jn(e):qc(()=>new _n))}function Li(t){return t<=0?()=>yt:le((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vt((i,s)=>t(i,s,r)):mt,Li(1),n?Jn(e):qc(()=>new _n))}function Uh(t,e){return le(BI(t,e,arguments.length>=2,!0))}function jh(...t){let e=Gn(t);return le((n,r)=>{(e?ki(t,n,e):ki(t,n)).subscribe(r)})}function _t(t,e){return le((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=s++;Me(t(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Bh(t){return le((e,n)=>{Me(t).subscribe(ae(n,()=>n.complete(),mo)),!n.closed&&e.subscribe(n)})}function xe(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ae(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):mt}var Sw="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(Cu(e,n)),this.code=e}};function Cu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ro(t){return{toString:t}.toString()}var Gc="__parameters__";function KA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Aw(t,e,n){return Ro(()=>{let r=KA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Gc)?u[Gc]:Object.defineProperty(u,Gc,{value:[]})[Gc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var vo=globalThis;function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function QA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function st(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(st).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function $I(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var YA=we({__forward_ref__:we});function Rw(t){return t.__forward_ref__=Rw,t.toString=function(){return st(this())},t}function rt(t){return Nw(t)?t():t}function Nw(t){return typeof t=="function"&&t.hasOwnProperty(YA)&&t.__forward_ref__===Rw}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Su(t){return zI(t,xw)||zI(t,Pw)}function Mw(t){return Su(t)!==null}function zI(t,e){return t.hasOwnProperty(e)?t[e]:null}function JA(t){let e=t&&(t[xw]||t[Pw]);return e||null}function HI(t){return t&&(t.hasOwnProperty(qI)||t.hasOwnProperty(ZA))?t[qI]:null}var xw=we({\u0275prov:we}),qI=we({\u0275inj:we}),Pw=we({ngInjectableDef:we}),ZA=we({ngInjectorDef:we}),B=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ow(t){return t&&!!t.\u0275providers}var XA=we({\u0275cmp:we}),eR=we({\u0275dir:we}),tR=we({\u0275pipe:we}),nR=we({\u0275mod:we}),tu=we({\u0275fac:we}),wo=we({__NG_ELEMENT_ID__:we}),GI=we({__NG_ENV_ID__:we});function Au(t){return typeof t=="string"?t:t==null?"":String(t)}function rR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Au(t)}function iR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function qf(t,e){throw new $(-201,!1)}var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{}),nf;function kw(){return nf}function dt(t){let e=nf;return nf=t,e}function Lw(t,e,n){let r=Su(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&re.Optional)return null;if(e!==void 0)return e;qf(t,"Injector")}var sR={},Eo=sR,rf="__NG_DI_FLAG__",nu="ngTempTokenPath",oR="ngTokenPath",aR=/\n/gm,cR="\u0275",WI="__source",ji;function uR(){return ji}function Xn(t){let e=ji;return ji=t,e}function lR(t,e=re.Default){if(ji===void 0)throw new $(-203,!1);return ji===null?Lw(t,void 0,e):ji.get(t,e&re.Optional?null:void 0,e)}function J(t,e=re.Default){return(kw()||lR)(rt(t),e)}function P(t,e=re.Default){return J(t,Ru(e))}function Ru(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sf(t){let e=[];for(let n=0;n<t.length;n++){let r=rt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=re.Default;for(let o=0;o<r.length;o++){let a=r[o],u=dR(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function Fw(t,e){return t[rf]=e,t.prototype[rf]=e,t}function dR(t){return t[rf]}function hR(t,e,n,r){let i=t[nu];throw e[WI]&&i.unshift(e[WI]),t.message=fR(`
`+t.message,i,n,r),t[oR]=i,t[nu]=null,t}function fR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==cR?t.slice(2):t;let i=st(e);if(Array.isArray(e))i=e.map(st).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):st(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(aR,`
  `)}`}var at=Fw(Aw("Optional"),8);var Vw=Fw(Aw("SkipSelf"),4);function Fr(t,e){let n=t.hasOwnProperty(tu);return n?t[tu]:null}function Gf(t,e){t.forEach(n=>Array.isArray(n)?Gf(n,e):e(n))}function Uw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ru(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function gR(t,e,n){let r=No(t,e);return r>=0?t[r|1]=n:(r=~r,pR(t,r,e,n)),r}function $h(t,e){let n=No(t,e);if(n>=0)return t[n|1]}function No(t,e){return mR(t,e,1)}function mR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var $i={},Ct=[],zi=new B(""),jw=new B("",-1),Bw=new B(""),iu=class{get(e,n=Eo){if(n===Eo){let r=new Error(`NullInjectorError: No provider for ${st(e)}!`);throw r.name="NullInjectorError",r}return n}},$w=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}($w||{}),Jt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jt||{}),nr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(nr||{});function yR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function of(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];_R(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function vR(t){return t===3||t===4||t===6}function _R(t){return t.charCodeAt(0)===64}function To(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?KI(t,n,i,null,e[++r]):KI(t,n,i,null,null))}}return t}function KI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var zw="ng-template";function IR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Wf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Wf(t){return t.type===4&&t.value!==zw}function wR(t,e,n){let r=t.type===4&&!n?zw:t.value;return e===r}function ER(t,e,n){let r=4,i=t.attrs,s=i!==null?bR(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Vt(r)&&!Vt(u))return!1;if(o&&Vt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!wR(t,u,n)||u===""&&e.length===1){if(Vt(r))return!1;o=!0}}else if(r&8){if(i===null||!IR(t,i,u,n)){if(Vt(r))return!1;o=!0}}else{let l=e[++a],h=TR(u,i,Wf(t),n);if(h===-1){if(Vt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Vt(r))return!1;o=!0}}}}return Vt(r)||o}function Vt(t){return(t&1)===0}function TR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return CR(e,t)}function DR(t,e,n=!1){for(let r=0;r<e.length;r++)if(ER(t,e[r],n))return!0;return!1}function bR(t){for(let e=0;e<t.length;e++){let n=t[e];if(vR(n))return e}return t.length}function CR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function QI(t,e){return t?":not("+e.trim()+")":e}function SR(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Vt(o)&&(e+=QI(s,i),i=""),r=o,s=s||!Vt(r);n++}return i!==""&&(e+=QI(s,i)),e}function AR(t){return t.map(SR).join(",")}function RR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Vt(i))break;i=s}r++}return{attrs:e,classes:n}}function Hw(t){return Ro(()=>{let e=Yw(t),n=Ee(U({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===$w.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jt.Emulated,styles:t.styles||Ct,_:null,schemas:t.schemas||null,tView:null,id:""});Jw(n);let r=t.dependencies;return n.directiveDefs=JI(r,!1),n.pipeDefs=JI(r,!0),n.id=xR(n),n})}function NR(t){return Vr(t)||Gw(t)}function MR(t){return t!==null}function es(t){return Ro(()=>({type:t.type,bootstrap:t.bootstrap||Ct,declarations:t.declarations||Ct,imports:t.imports||Ct,exports:t.exports||Ct,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function YI(t,e){if(t==null)return $i;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=nr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==nr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Mo(t){return Ro(()=>{let e=Yw(t);return Jw(e),e})}function qw(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Vr(t){return t[XA]||null}function Gw(t){return t[eR]||null}function Ww(t){return t[tR]||null}function Kw(t){let e=Vr(t)||Gw(t)||Ww(t);return e!==null?e.standalone:!1}function Qw(t,e){let n=t[nR]||null;if(!n&&e===!0)throw new Error(`Type ${st(t)} does not have '\u0275mod' property.`);return n}function Yw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||$i,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ct,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:YI(t.inputs,e),outputs:YI(t.outputs),debugInfo:null}}function Jw(t){t.features?.forEach(e=>e(t))}function JI(t,e){if(!t)return null;let n=e?Ww:NR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(MR)}function xR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Rt(t){return{\u0275providers:t}}function PR(...t){return{\u0275providers:Zw(!0,t),\u0275fromNgModule:!0}}function Zw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Gf(e,o=>{let a=o;af(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Xw(i,s),n}function Xw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Kf(i,s=>{e(s,r)})}}function af(t,e,n,r){if(t=rt(t),!t)return!1;let i=null,s=HI(t),o=!s&&Vr(t);if(!s&&!o){let u=t.ngModule;if(s=HI(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)af(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Gf(s.imports,h=>{af(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Xw(l,e)}if(!a){let l=Fr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ct},i),e({provide:Bw,useValue:i,multi:!0},i),e({provide:zi,useValue:()=>J(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Kf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Kf(t,e){for(let n of t)Ow(n)&&(n=n.\u0275providers),Array.isArray(n)?Kf(n,e):e(n)}var OR=we({provide:String,useValue:we});function eE(t){return t!==null&&typeof t=="object"&&OR in t}function kR(t){return!!(t&&t.useExisting)}function LR(t){return!!(t&&t.useFactory)}function Hi(t){return typeof t=="function"}function FR(t){return!!t.useClass}var Nu=new B(""),Yc={},VR={},zh;function Qf(){return zh===void 0&&(zh=new iu),zh}var ht=class{},Do=class extends ht{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uf(e,o=>this.processProvider(o)),this.records.set(jw,Fi(void 0,this)),i.has("environment")&&this.records.set(ht,Fi(void 0,this));let s=this.records.get(Nu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Bw,Ct,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Xn(this),r=dt(void 0),i;try{return e()}finally{Xn(n),dt(r)}}get(e,n=Eo,r=re.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(GI))return e[GI](this);r=Ru(r);let i,s=Xn(this),o=dt(void 0);try{if(!(r&re.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=zR(e)&&Su(e);l&&this.injectableDefInScope(l)?u=Fi(cf(e),Yc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&re.Self?Qf():this.parent;return n=r&re.Optional&&n===Eo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[nu]=a[nu]||[]).unshift(st(e)),s)throw a;return hR(a,e,"R3InjectorError",this.source)}else throw a}finally{dt(o),Xn(s)}}resolveInjectorInitializers(){let e=fe(null),n=Xn(this),r=dt(void 0),i;try{let s=this.get(zi,Ct,re.Self);for(let o of s)o()}finally{Xn(n),dt(r),fe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(st(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=rt(e);let n=Hi(e)?e:rt(e&&e.provide),r=jR(e);if(!Hi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Fi(void 0,Yc,!0),i.factory=()=>sf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=fe(null);try{return n.value===Yc&&(n.value=VR,n.value=n.factory()),typeof n.value=="object"&&n.value&&$R(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=rt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function cf(t){let e=Su(t),n=e!==null?e.factory:Fr(t);if(n!==null)return n;if(t instanceof B)throw new $(204,!1);if(t instanceof Function)return UR(t);throw new $(204,!1)}function UR(t){if(t.length>0)throw new $(204,!1);let n=JA(t);return n!==null?()=>n.factory(t):()=>new t}function jR(t){if(eE(t))return Fi(void 0,t.useValue);{let e=tE(t);return Fi(e,Yc)}}function tE(t,e,n){let r;if(Hi(t)){let i=rt(t);return Fr(i)||cf(i)}else if(eE(t))r=()=>rt(t.useValue);else if(LR(t))r=()=>t.useFactory(...sf(t.deps||[]));else if(kR(t))r=()=>J(rt(t.useExisting));else{let i=rt(t&&(t.useClass||t.provide));if(BR(t))r=()=>new i(...sf(t.deps));else return Fr(i)||cf(i)}return r}function Fi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function BR(t){return!!t.deps}function $R(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function zR(t){return typeof t=="function"||typeof t=="object"&&t instanceof B}function uf(t,e){for(let n of t)Array.isArray(n)?uf(n,e):n&&Ow(n)?uf(n.\u0275providers,e):e(n)}function Bt(t,e){t instanceof Do&&t.assertNotDestroyed();let n,r=Xn(t),i=dt(void 0);try{return e()}finally{Xn(r),dt(i)}}function HR(){return kw()!==void 0||uR()!=null}function qR(t){return typeof t=="function"}var Tn=0,se=1,Y=2,ot=3,Ut=4,$t=5,su=6,ou=7,jt=8,qi=9,Zt=10,Pe=11,bo=12,ZI=13,ts=14,Xt=15,Gi=16,Vi=17,Wi=18,Mu=19,nE=20,er=21,Hh=22,St=23,en=25,rE=1;var Ur=7,au=8,cu=9,At=10,uu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(uu||{});function tr(t){return Array.isArray(t)&&typeof t[rE]=="object"}function Dn(t){return Array.isArray(t)&&t[rE]===!0}function iE(t){return(t.flags&4)!==0}function xu(t){return t.componentOffset>-1}function Yf(t){return(t.flags&1)===1}function rr(t){return!!t.template}function lf(t){return(t[Y]&512)!==0}var df=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function sE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Pu(){return oE}function oE(t){return t.type.prototype.ngOnChanges&&(t.setInput=WR),GR}Pu.ngInherit=!0;function GR(){let t=cE(this),e=t?.current;if(e){let n=t.previous;if(n===$i)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function WR(t,e,n,r,i){let s=this.declaredInputs[r],o=cE(t)||KR(t,{previous:$i,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new df(l&&l.currentValue,n,u===$i),sE(t,e,i,n)}var aE="__ngSimpleChanges__";function cE(t){return t[aE]||null}function KR(t,e){return t[aE]=e}var XI=null;var Qt=function(t,e,n){XI?.(t,e,n)},QR="svg",YR="math";function tn(t){for(;Array.isArray(t);)t=t[Tn];return t}function uE(t,e){return tn(e[t])}function Nt(t,e){return tn(e[t.index])}function lE(t,e){return t.data[e]}function JR(t,e){return t[e]}function or(t,e){let n=e[t];return tr(n)?n:n[Tn]}function Jf(t){return(t[Y]&128)===128}function ZR(t){return Dn(t[ot])}function lu(t,e){return e==null?null:t[e]}function dE(t){t[Vi]=0}function hE(t){t[Y]&1024||(t[Y]|=1024,Jf(t)&&ku(t))}function XR(t,e){for(;t>0;)e=e[ts],t--;return e}function Ou(t){return!!(t[Y]&9216||t[St]?.dirty)}function hf(t){t[Zt].changeDetectionScheduler?.notify(8),t[Y]&64&&(t[Y]|=1024),Ou(t)&&ku(t)}function ku(t){t[Zt].changeDetectionScheduler?.notify(0);let e=jr(t);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!Jf(e)));)e=jr(e)}function fE(t,e){if((t[Y]&256)===256)throw new $(911,!1);t[er]===null&&(t[er]=[]),t[er].push(e)}function eN(t,e){if(t[er]===null)return;let n=t[er].indexOf(e);n!==-1&&t[er].splice(n,1)}function jr(t){let e=t[ot];return Dn(e)?e[ot]:e}var oe={lFrame:EE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pE=!1;function tN(){return oe.lFrame.elementDepthCount}function nN(){oe.lFrame.elementDepthCount++}function rN(){oe.lFrame.elementDepthCount--}function gE(){return oe.bindingsEnabled}function iN(){return oe.skipHydrationRootTNode!==null}function sN(t){return oe.skipHydrationRootTNode===t}function oN(){oe.skipHydrationRootTNode=null}function _e(){return oe.lFrame.lView}function ct(){return oe.lFrame.tView}function PG(t){return oe.lFrame.contextLView=t,t[jt]}function OG(t){return oe.lFrame.contextLView=null,t}function ft(){let t=mE();for(;t!==null&&t.type===64;)t=t.parent;return t}function mE(){return oe.lFrame.currentTNode}function aN(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function xo(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function yE(){return oe.lFrame.isParent}function cN(){oe.lFrame.isParent=!1}function vE(){return pE}function ew(t){pE=t}function uN(){let t=oe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function lN(t){return oe.lFrame.bindingIndex=t}function Lu(){return oe.lFrame.bindingIndex++}function dN(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function hN(){return oe.lFrame.inI18n}function fN(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,ff(e)}function pN(){return oe.lFrame.currentDirectiveIndex}function ff(t){oe.lFrame.currentDirectiveIndex=t}function gN(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function _E(t){oe.lFrame.currentQueryIndex=t}function mN(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[$t]:null}function IE(t,e,n){if(n&re.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&re.Host);)if(i=mN(s),i===null||(s=s[ts],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=oe.lFrame=wE();return r.currentTNode=e,r.lView=t,!0}function Zf(t){let e=wE(),n=t[se];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wE(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?EE(t):e}function EE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function TE(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var DE=TE;function Xf(){let t=TE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yN(t){return(oe.lFrame.contextLView=XR(t,oe.lFrame.contextLView))[jt]}function ns(){return oe.lFrame.selectedIndex}function Br(t){oe.lFrame.selectedIndex=t}function Fu(){let t=oe.lFrame;return lE(t.tView,t.selectedIndex)}function vN(){return oe.lFrame.currentNamespace}var bE=!0;function ep(){return bE}function tp(t){bE=t}function _N(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=oE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function np(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Jc(t,e,n){CE(t,e,3,n)}function Zc(t,e,n,r){(t[Y]&3)===n&&CE(t,e,n,r)}function qh(t,e){let n=t[Y];(n&3)===e&&(n&=16383,n+=1,t[Y]=n)}function CE(t,e,n,r){let i=r!==void 0?t[Vi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Vi]+=65536),(a<s||s==-1)&&(IN(t,n,e,u),t[Vi]=(t[Vi]&4294901760)+u+2),u++}function tw(t,e){Qt(4,t,e);let n=fe(null);try{e.call(t)}finally{fe(n),Qt(5,t,e)}}function IN(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Y]>>14<t[Vi]>>16&&(t[Y]&3)===e&&(t[Y]+=16384,tw(a,s)):tw(a,s)}var Bi=-1,$r=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function wN(t){return t instanceof $r}function EN(t){return(t.flags&8)!==0}function TN(t){return(t.flags&16)!==0}var Gh={},pf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ru(r);let i=this.injector.get(e,Gh,r);return i!==Gh||n===Gh?i:this.parentInjector.get(e,n,r)}};function SE(t){return t!==Bi}function du(t){return t&32767}function DN(t){return t>>16}function hu(t,e){let n=DN(t),r=e;for(;n>0;)r=r[ts],n--;return r}var gf=!0;function fu(t){let e=gf;return gf=t,e}var bN=256,AE=bN-1,RE=5,CN=0,Yt={};function SN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(wo)&&(r=n[wo]),r==null&&(r=n[wo]=CN++);let i=r&AE,s=1<<i;e.data[t+(i>>RE)]|=s}function pu(t,e){let n=NE(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Wh(r.data,t),Wh(e,null),Wh(r.blueprint,null));let i=rp(t,e),s=t.injectorIndex;if(SE(i)){let o=du(i),a=hu(i,e),u=a[se].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Wh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function NE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function rp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kE(i),r===null)return Bi;if(n++,i=i[ts],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Bi}function mf(t,e,n){SN(t,e,n)}function ME(t,e,n){if(n&re.Optional||t!==void 0)return t;qf(e,"NodeInjector")}function xE(t,e,n,r){if(n&re.Optional&&r===void 0&&(r=null),!(n&(re.Self|re.Host))){let i=t[qi],s=dt(void 0);try{return i?i.get(e,r,n&re.Optional):Lw(e,r,n&re.Optional)}finally{dt(s)}}return ME(r,e,n)}function PE(t,e,n,r=re.Default,i){if(t!==null){if(e[Y]&2048&&!(r&re.Self)){let o=xN(t,e,n,r,Yt);if(o!==Yt)return o}let s=OE(t,e,n,r,Yt);if(s!==Yt)return s}return xE(e,n,r,i)}function OE(t,e,n,r,i){let s=NN(n);if(typeof s=="function"){if(!IE(e,t,r))return r&re.Host?ME(i,n,r):xE(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&re.Optional))qf(n);else return o}finally{DE()}}else if(typeof s=="number"){let o=null,a=NE(t,e),u=Bi,l=r&re.Host?e[Xt][$t]:null;for((a===-1||r&re.SkipSelf)&&(u=a===-1?rp(t,e):e[a+8],u===Bi||!rw(r,!1)?a=-1:(o=e[se],a=du(u),e=hu(u,e)));a!==-1;){let h=e[se];if(nw(s,a,h.data)){let p=AN(a,e,n,o,r,l);if(p!==Yt)return p}u=e[a+8],u!==Bi&&rw(r,e[se].data[a+8]===l)&&nw(s,a,e)?(o=h,a=du(u),e=hu(u,e)):a=-1}}return i}function AN(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],u=r==null?xu(a)&&gf:r!=o&&(a.type&3)!==0,l=i&re.Host&&s===a,h=RN(a,o,n,u,l);return h!==null?Ki(e,o,h,a):Yt}function RN(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=o[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=o[u];if(y&&rr(y)&&y.type===n)return u}return null}function Ki(t,e,n,r){let i=t[n],s=e.data;if(wN(i)){let o=i;o.resolving&&iR(rR(s[n]));let a=fu(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?dt(o.injectImpl):null,h=IE(t,r,re.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&_N(n,s[n],e)}finally{l!==null&&dt(l),fu(a),o.resolving=!1,DE()}}return i}function NN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(wo)?t[wo]:void 0;return typeof e=="number"?e>=0?e&AE:MN:e}function nw(t,e,n){let r=1<<t;return!!(n[e+(t>>RE)]&r)}function rw(t,e){return!(t&re.Self)&&!(t&re.Host&&e)}var Lr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return PE(this._tNode,this._lView,e,Ru(r),n)}};function MN(){return new Lr(ft(),_e())}function ip(t){return Ro(()=>{let e=t.prototype.constructor,n=e[tu]||yf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[tu]||yf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function yf(t){return Nw(t)?()=>{let e=yf(rt(t));return e&&e()}:Fr(t)}function xN(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Y]&2048&&!(o[Y]&512);){let a=OE(s,o,n,r|re.Self,Yt);if(a!==Yt)return a;let u=s.parent;if(!u){let l=o[nE];if(l){let h=l.get(n,Yt,r);if(h!==Yt)return h}u=kE(o),o=o[ts]}s=u}return i}function kE(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[$t]:null}function iw(t,e=null,n=null,r){let i=LE(t,e,n,r);return i.resolveInjectorInitializers(),i}function LE(t,e=null,n=null,r,i=new Set){let s=[n||Ct,PR(t)];return r=r||(typeof t=="object"?void 0:st(t)),new Do(s,e||Qf(),r||null,i)}var It=class t{static{this.THROW_IF_NOT_FOUND=Eo}static{this.NULL=new iu}static create(e,n){if(Array.isArray(e))return iw({name:""},n,e,"");{let r=e.name??"";return iw({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:t,providedIn:"any",factory:()=>J(jw)})}static{this.__NG_ELEMENT_ID__=-1}};var PN=new B("");PN.__NG_ELEMENT_ID__=t=>{let e=ft();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&re.Optional)return null;throw new $(204,!1)};var ON="ngOriginalError";function Kh(t){return t[ON]}var FE=!0,VE=(()=>{class t{static{this.__NG_ELEMENT_ID__=kN}static{this.__NG_ENV_ID__=n=>n}}return t})(),vf=class extends VE{constructor(e){super(),this._lView=e}onDestroy(e){return fE(this._lView,e),()=>eN(this._lView,e)}};function kN(){return new vf(_e())}var bn=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new He(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}}return t})();var _f=class extends nt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,HR()&&(this.destroyRef=P(VE,{optional:!0})??void 0,this.pendingTasks=P(bn,{optional:!0})??void 0)}emit(e){let n=fe(null);try{super.next(e)}finally{fe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Se&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},it=_f;function gu(...t){}function UE(t){let e,n;function r(){t=gu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function sw(t){return queueMicrotask(()=>t()),()=>{t=gu}}var sp="isAngularZone",mu=sp+"_ID",LN=0,me=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=FE}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,UN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(sp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,FN,gu,gu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},FN={};function op(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function VN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){UE(()=>{t.callbackScheduled=!1,If(t),t.isCheckStableRunning=!0,op(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),If(t)}function UN(t){let e=()=>{VN(t)},n=LN++;t._inner=t._inner.fork({name:"angular",properties:{[sp]:!0,[mu]:n,[mu+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(jN(u))return r.invokeTask(s,o,a,u);try{return ow(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),aw(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return ow(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!BN(u)&&e(),aw(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,If(t),op(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function If(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function ow(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aw(t){t._nesting--,op(t)}var wf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function jN(t){return jE(t,"__ignore_ng_zone__")}function BN(t){return jE(t,"__scheduler_tick__")}function jE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var wn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Kh(e);for(;n&&Kh(n);)n=Kh(n);return n||null}},$N=new B("",{providedIn:"root",factory:()=>{let t=P(me),e=P(wn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function zN(){return Vu(ft(),_e())}function Vu(t,e){return new Uu(Nt(t,e))}var Uu=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=zN}}return t})();function BE(t){return(t.flags&128)===128}var $E=new Map,HN=0;function qN(){return HN++}function GN(t){$E.set(t[Mu],t)}function Ef(t){$E.delete(t[Mu])}var cw="__ngContext__";function zr(t,e){tr(e)?(t[cw]=e[Mu],GN(e)):t[cw]=e}function zE(t){return qE(t[bo])}function HE(t){return qE(t[Ut])}function qE(t){for(;t!==null&&!Dn(t);)t=t[Ut];return t}var Tf;function GE(t){Tf=t}function WN(){if(Tf!==void 0)return Tf;if(typeof document<"u")return document;throw new $(210,!1)}var ap=new B("",{providedIn:"root",factory:()=>KN}),KN="ng",cp=new B(""),nn=new B("",{providedIn:"platform",factory:()=>"unknown"});var up=new B("",{providedIn:"root",factory:()=>WN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var QN="h",YN="b";var JN=()=>null;function lp(t,e,n=!1){return JN(t,e,n)}var WE=!1,ZN=new B("",{providedIn:"root",factory:()=>WE});var yu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Sw})`}};function ju(t){return t instanceof yu?t.changingThisBreaksApplicationSecurity:t}function KE(t,e){let n=XN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Sw})`)}return n===e}function XN(t){return t instanceof yu&&t.getTypeName()||null}var eM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function QE(t){return t=String(t),t.match(eM)?t:"unsafe:"+t}var dp=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(dp||{});function kG(t){let e=tM();return e?e.sanitize(dp.URL,t)||"":KE(t,"URL")?ju(t):QE(Au(t))}function tM(){let t=_e();return t&&t[Zt].sanitizer}function YE(t){return t instanceof Function?t():t}var En=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(En||{}),nM;function hp(t,e){return nM(t,e)}function Ui(t,e,n,r,i){if(r!=null){let s,o=!1;Dn(r)?s=r:tr(r)&&(o=!0,r=r[Tn]);let a=tn(r);t===0&&n!==null?i==null?tT(e,n,a):vu(e,n,a,i||null,!0):t===1&&n!==null?vu(e,n,a,i||null,!0):t===2?yM(e,a,o):t===3&&e.destroyNode(a),s!=null&&_M(e,t,s,n,i)}}function rM(t,e){return t.createText(e)}function iM(t,e,n){t.setValue(e,n)}function JE(t,e,n){return t.createElement(e,n)}function sM(t,e){ZE(t,e),e[Tn]=null,e[$t]=null}function oM(t,e,n,r,i,s){r[Tn]=i,r[$t]=e,Bu(t,r,n,1,i,s)}function ZE(t,e){e[Zt].changeDetectionScheduler?.notify(9),Bu(t,e,e[Pe],2,null,null)}function aM(t){let e=t[bo];if(!e)return Qh(t[se],t);for(;e;){let n=null;if(tr(e))n=e[bo];else{let r=e[At];r&&(n=r)}if(!n){for(;e&&!e[Ut]&&e!==t;)tr(e)&&Qh(e[se],e),e=e[ot];e===null&&(e=t),tr(e)&&Qh(e[se],e),n=e&&e[Ut]}e=n}}function cM(t,e,n,r){let i=At+r,s=n.length;r>0&&(n[i-1][Ut]=e),r<s-At?(e[Ut]=n[i],Uw(n,At+r,e)):(n.push(e),e[Ut]=null),e[ot]=n;let o=e[Gi];o!==null&&n!==o&&XE(o,e);let a=e[Wi];a!==null&&a.insertView(t),hf(e),e[Y]|=128}function XE(t,e){let n=t[cu],r=e[ot];if(tr(r))t[Y]|=uu.HasTransplantedViews;else{let i=r[ot][Xt];e[Xt]!==i&&(t[Y]|=uu.HasTransplantedViews)}n===null?t[cu]=[e]:n.push(e)}function fp(t,e){let n=t[cu],r=n.indexOf(e);n.splice(r,1)}function Df(t,e){if(t.length<=At)return;let n=At+e,r=t[n];if(r){let i=r[Gi];i!==null&&i!==t&&fp(i,r),e>0&&(t[n-1][Ut]=r[Ut]);let s=ru(t,At+e);sM(r[se],r);let o=s[Wi];o!==null&&o.detachView(s[se]),r[ot]=null,r[Ut]=null,r[Y]&=-129}return r}function eT(t,e){if(!(e[Y]&256)){let n=e[Pe];n.destroyNode&&Bu(t,e,n,3,null,null),aM(e)}}function Qh(t,e){if(e[Y]&256)return;let n=fe(null);try{e[Y]&=-129,e[Y]|=256,e[St]&&Ih(e[St]),lM(t,e),uM(t,e),e[se].type===1&&e[Pe].destroy();let r=e[Gi];if(r!==null&&Dn(e[ot])){r!==e[ot]&&fp(r,e);let i=e[Wi];i!==null&&i.detachView(t)}Ef(e)}finally{fe(n)}}function uM(t,e){let n=t.cleanup,r=e[ou];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ou]=null);let i=e[er];if(i!==null){e[er]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function lM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof $r)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Qt(4,a,u);try{u.call(a)}finally{Qt(5,a,u)}}else{Qt(4,i,s);try{s.call(i)}finally{Qt(5,i,s)}}}}}function dM(t,e,n){return hM(t,e.parent,n)}function hM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Tn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Jt.None||s===Jt.Emulated)return null}return Nt(r,n)}}function vu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function tT(t,e,n){t.appendChild(e,n)}function uw(t,e,n,r,i){r!==null?vu(t,e,n,r,i):tT(t,e,n)}function nT(t,e){return t.parentNode(e)}function fM(t,e){return t.nextSibling(e)}function pM(t,e,n){return mM(t,e,n)}function gM(t,e,n){return t.type&40?Nt(t,n):null}var mM=gM,lw;function pp(t,e,n,r){let i=dM(t,r,e),s=e[Pe],o=r.parent||e[$t],a=pM(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)uw(s,i,n[u],a,!1);else uw(s,i,n,a,!1);lw!==void 0&&lw(s,r,e,n,i)}function _o(t,e){if(e!==null){let n=e.type;if(n&3)return Nt(e,t);if(n&4)return bf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return _o(t,r);{let i=t[e.index];return Dn(i)?bf(-1,i):tn(i)}}else{if(n&128)return _o(t,e.next);if(n&32)return hp(e,t)()||tn(t[e.index]);{let r=rT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=jr(t[Xt]);return _o(i,r)}else return _o(t,e.next)}}}return null}function rT(t,e){if(e!==null){let r=t[Xt][$t],i=e.projection;return r.projection[i]}return null}function bf(t,e){let n=At+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return _o(r,i)}return e[Ur]}function yM(t,e,n){t.removeChild(null,e,n)}function gp(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&zr(tn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)gp(t,e,n.child,r,i,s,!1),Ui(e,t,i,a,s);else if(u&32){let l=hp(n,r),h;for(;h=l();)Ui(e,t,i,h,s);Ui(e,t,i,a,s)}else u&16?vM(t,e,r,n,i,s):Ui(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Bu(t,e,n,r,i,s){gp(n,r,t.firstChild,e,i,s,!1)}function vM(t,e,n,r,i,s){let o=n[Xt],u=o[$t].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ui(e,t,i,h,s)}else{let l=u,h=o[ot];BE(r)&&(l.flags|=128),gp(t,e,l,h,i,s,!0)}}function _M(t,e,n,r,i){let s=n[Ur],o=tn(n);s!==o&&Ui(e,t,r,s,i);for(let a=At;a<n.length;a++){let u=n[a];Bu(u[se],u,t,e,r,s)}}function IM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:En.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=En.Important),t.setStyle(n,r,i,s))}}function wM(t,e,n){t.setAttribute(e,"style",n)}function iT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function sT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&of(t,e,r),i!==null&&iT(t,e,i),s!==null&&wM(t,e,s)}var ar={};function LG(t=1){oT(ct(),_e(),ns()+t,!1)}function oT(t,e,n,r){if(!r)if((e[Y]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Jc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Zc(e,s,0,n)}Br(n)}function Mt(t,e=re.Default){let n=_e();if(n===null)return J(t,e);let r=ft();return PE(r,n,rt(t),e)}function aT(t,e,n,r,i,s){let o=fe(null);try{let a=null;i&nr.SignalBased&&(a=e[r][vn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&nr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):sE(e,a,r,s)}finally{fe(o)}}function EM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Br(~i);else{let s=i,o=n[++r],a=n[++r];fN(o,s);let u=e[s];a(2,u)}}}finally{Br(-1)}}function $u(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Tn]=i,p[Y]=r|4|128|8|64,(l!==null||t&&t[Y]&2048)&&(p[Y]|=2048),dE(p),p[ot]=p[ts]=t,p[jt]=n,p[Zt]=o||t&&t[Zt],p[Pe]=a||t&&t[Pe],p[qi]=u||t&&t[qi]||null,p[$t]=s,p[Mu]=qN(),p[su]=h,p[nE]=l,p[Xt]=e.type==2?t[Xt]:p,p}function zu(t,e,n,r,i){let s=t.data[e];if(s===null)s=TM(t,e,n,r,i),hN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=aN();s.injectorIndex=o===null?-1:o.injectorIndex}return xo(s,!0),s}function TM(t,e,n,r,i){let s=mE(),o=yE(),a=o?s:s&&s.parent,u=t.data[e]=AM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function cT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function uT(t,e,n,r,i){let s=ns(),o=r&2;try{Br(-1),o&&e.length>en&&oT(t,e,en,!1),Qt(o?2:0,i),n(r,i)}finally{Br(s),Qt(o?3:1,i)}}function lT(t,e,n){if(iE(e)){let r=fe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{fe(r)}}}function dT(t,e,n){gE()&&(OM(t,e,n,Nt(n,e)),(n.flags&64)===64&&mT(t,e,n))}function hT(t,e,n=Nt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function fT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=mp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function mp(t,e,n,r,i,s,o,a,u,l,h){let p=en+r,m=p+i,y=DM(p,m),C=typeof l=="function"?l():l;return y[se]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function DM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ar);return n}function bM(t,e,n,r){let s=r.get(ZN,WE)||n===Jt.ShadowDom,o=t.selectRootElement(e,s);return CM(o),o}function CM(t){SM(t)}var SM=()=>null;function AM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return iN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function dw(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=nr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?hw(r,n,l,a,u):hw(r,n,l,a)}return r}function hw(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function RM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,C=m?m.outputs:null;u=dw(0,p.inputs,h,u,y),l=dw(1,p.outputs,h,l,C);let N=u!==null&&o!==null&&!Wf(e)?qM(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function NM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function yp(t,e,n,r,i,s,o,a){let u=Nt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(vp(t,n,h,r,i),xu(e)&&MM(n,e.index)):e.type&3?(r=NM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function MM(t,e){let n=or(e,t);n[Y]&16||(n[Y]|=64)}function pT(t,e,n,r){if(gE()){let i=r===null?null:{"":-1},s=LM(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&gT(t,e,n,o,i,a),i&&FM(n,r,i)}n.mergedAttrs=To(n.mergedAttrs,n.attrs)}function gT(t,e,n,r,i,s){for(let l=0;l<r.length;l++)mf(pu(n,e),t,r[l].type);UM(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=cT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=To(n.mergedAttrs,h.hostAttrs),jM(t,n,e,u,h),VM(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}RM(t,n,s)}function xM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;PM(o)!=a&&o.push(a),o.push(n,r,s)}}function PM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function OM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;xu(n)&&BM(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||pu(n,e),zr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Ki(e,t,a,n);if(zr(l,e),o!==null&&HM(e,a-i,l,u,n,o),rr(u)){let h=or(n.index,e);h[jt]=Ki(e,t,a,n)}}}function mT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=pN();try{Br(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];ff(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&kM(u,l)}}finally{Br(-1),ff(o)}}function kM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function LM(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(DR(e,o.selectors,!1))if(r||(r=[]),rr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Cf(t,e,u)}else r.unshift(o),Cf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Cf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function FM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}}function VM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;rr(e)&&(n[""]=t)}}function UM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function jM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Fr(i.type,!0)),o=new $r(s,rr(i),Mt);t.blueprint[r]=o,n[r]=o,xM(t,e,r,cT(t,n,i.hostVars,ar),i)}function BM(t,e,n){let r=Nt(e,t),i=fT(n),s=t[Zt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Hu(t,$u(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function $M(t,e,n,r,i,s){let o=Nt(t,e);zM(e[Pe],o,s,t.value,n,r,i)}function zM(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Au(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function HM(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];aT(r,n,u,l,h,p)}}function qM(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function yT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function vT(t,e){let n=t.contentQueries;if(n!==null){let r=fe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];_E(s),a.contentQueries(2,e[o],o)}}}finally{fe(r)}}}function Hu(t,e){return t[bo]?t[ZI][Ut]=e:t[bo]=e,t[ZI]=e,e}function Sf(t,e,n){_E(0);let r=fe(null);try{e(t,n)}finally{fe(r)}}function GM(t){return t[ou]??=[]}function WM(t){return t.cleanup??=[]}function _T(t,e){let n=t[qi],r=n?n.get(wn,null):null;r&&r.handleError(e)}function vp(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];aT(h,l,r,a,u,i)}}function KM(t,e,n){let r=uE(e,t);iM(t[Pe],r,n)}function QM(t,e){let n=or(e,t),r=n[se];YM(r,n);let i=n[Tn];i!==null&&n[su]===null&&(n[su]=lp(i,n[qi])),_p(r,n,n[jt])}function YM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function _p(t,e,n){Zf(e);try{let r=t.viewQuery;r!==null&&Sf(1,r,n);let i=t.template;i!==null&&uT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Wi]?.finishViewCreation(t),t.staticContentQueries&&vT(t,e),t.staticViewQueries&&Sf(2,t.viewQuery,n);let s=t.components;s!==null&&JM(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Y]&=-5,Xf()}}function JM(t,e){for(let n=0;n<e.length;n++)QM(t,e[n])}function ZM(t,e,n,r){let i=fe(null);try{let s=e.tView,a=t[Y]&4096?4096:16,u=$u(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Gi]=l;let h=t[Wi];return h!==null&&(u[Wi]=h.createEmbeddedView(s)),_p(s,u,n),u}finally{fe(i)}}function fw(t,e){return!e||e.firstChild===null||BE(t)}function XM(t,e,n,r=!0){let i=e[se];if(cM(i,e,t,n),r){let o=bf(n,t),a=e[Pe],u=nT(a,t[Ur]);u!==null&&oM(i,t[$t],a,e,u,o)}let s=e[su];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function _u(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(tn(s)),Dn(s)&&ex(s,r);let o=n.type;if(o&8)_u(t,e,n.child,r);else if(o&32){let a=hp(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=rT(e,n);if(Array.isArray(a))r.push(...a);else{let u=jr(e[Xt]);_u(u[se],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ex(t,e){for(let n=At;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&_u(r[se],r,i,e)}t[Ur]!==t[Tn]&&e.push(t[Ur])}var IT=[];function tx(t){return t[St]??nx(t)}function nx(t){let e=IT.pop()??Object.create(ix);return e.lView=t,e}function rx(t){t.lView[St]!==t&&(t.lView=null,IT.push(t))}var ix=Ee(U({},go),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ku(t.lView)},consumerOnSignalRead(){this.lView[St]=this}});function sx(t){let e=t[St]??Object.create(ox);return e.lView=t,e}var ox=Ee(U({},go),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=jr(t.lView);for(;e&&!wT(e[se]);)e=jr(e);e&&hE(e)},consumerOnSignalRead(){this.lView[St]=this}});function wT(t){return t.type!==2}var ax=100;function ET(t,e=!0,n=0){let r=t[Zt],i=r.rendererFactory,s=!1;s||i.begin?.();try{cx(t,n)}catch(o){throw e&&_T(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function cx(t,e){let n=vE();try{ew(!0),Af(t,e);let r=0;for(;Ou(t);){if(r===ax)throw new $(103,!1);r++,Af(t,1)}}finally{ew(n)}}function ux(t,e,n,r){let i=e[Y];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Zt].inlineEffectRunner?.flush(),Zf(e);let a=!0,u=null,l=null;s||(wT(t)?(l=tx(e),u=vc(l)):iI()===null?(a=!1,l=sx(e),u=vc(l)):e[St]&&(Ih(e[St]),e[St]=null));try{dE(e),lN(t.bindingStartIndex),n!==null&&uT(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&Jc(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Zc(e,y,0,null),qh(e,0)}if(o||lx(e),TT(e,0),t.contentQueries!==null&&vT(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&Jc(e,y)}else{let y=t.contentHooks;y!==null&&Zc(e,y,1),qh(e,1)}EM(t,e);let p=t.components;p!==null&&bT(e,p,0);let m=t.viewQuery;if(m!==null&&Sf(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&Jc(e,y)}else{let y=t.viewHooks;y!==null&&Zc(e,y,2),qh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Hh]){for(let y of e[Hh])y();e[Hh]=null}s||(e[Y]&=-73)}catch(h){throw s||ku(e),h}finally{l!==null&&(vh(l,u),a&&rx(l)),Xf()}}function TT(t,e){for(let n=zE(t);n!==null;n=HE(n))for(let r=At;r<n.length;r++){let i=n[r];DT(i,e)}}function lx(t){for(let e=zE(t);e!==null;e=HE(e)){if(!(e[Y]&uu.HasTransplantedViews))continue;let n=e[cu];for(let r=0;r<n.length;r++){let i=n[r];hE(i)}}}function dx(t,e,n){let r=or(e,t);DT(r,n)}function DT(t,e){Jf(t)&&Af(t,e)}function Af(t,e){let r=t[se],i=t[Y],s=t[St],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&_h(s)),o||=!1,s&&(s.dirty=!1),t[Y]&=-9217,o)ux(r,t,r.template,t[jt]);else if(i&8192){TT(t,1);let a=r.components;a!==null&&bT(t,a,1)}}function bT(t,e,n){for(let r=0;r<e.length;r++)dx(t,e[r],n)}function Ip(t,e){let n=vE()?64:1088;for(t[Zt].changeDetectionScheduler?.notify(e);t;){t[Y]|=n;let r=jr(t);if(lf(t)&&!r)return t;t=r}return null}var Hr=class{get rootNodes(){let e=this._lView,n=e[se];return _u(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return(this._lView[Y]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ot];if(Dn(e)){let n=e[au],r=n?n.indexOf(this):-1;r>-1&&(Df(e,r),ru(n,r))}this._attachedToViewContainer=!1}eT(this._lView[se],this._lView)}onDestroy(e){fE(this._lView,e)}markForCheck(){Ip(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){hf(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,ET(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=lf(this._lView),n=this._lView[Gi];n!==null&&!e&&fp(n,this._lView),ZE(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=lf(this._lView),r=this._lView[Gi];r!==null&&!n&&XE(r,this._lView),hf(this._lView)}},qu=(()=>{class t{static{this.__NG_ELEMENT_ID__=px}}return t})(),hx=qu,fx=class extends hx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ZM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Hr(i)}};function px(){return gx(ft(),_e())}function gx(t,e){return t.type&4?new fx(e,t,Vu(t,e)):null}var VG=new RegExp(`^(\\d+)*(${YN}|${QN})*(.*)`);var mx=()=>null;function pw(t,e){return mx(t,e)}var Qi=class{},Gu=new B("",{providedIn:"root",factory:()=>!1});var CT=new B(""),ST=new B(""),Rf=class{},Iu=class{};function yx(t){let e=Error(`No component factory found for ${st(t)}.`);return e[vx]=t,e}var vx="ngComponent";var Nf=class{resolveComponentFactory(e){throw yx(e)}},Yi=class{static{this.NULL=new Nf}},Ji=class{},wp=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>_x()}}return t})();function _x(){let t=_e(),e=ft(),n=or(e.index,t);return(tr(n)?n:t)[Pe]}var Ix=(()=>{class t{static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>null})}}return t})();function Mf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=$I(i,a);else if(s==2){let u=a,l=e[++o];r=$I(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var wu=class extends Yi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Vr(e);return new Co(n,this.ngModule)}};function gw(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:nr.None;e?n.push({propName:o,templateName:r,isSignal:(a&nr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function wx(t){let e=t.toLowerCase();return e==="svg"?QR:e==="math"?YR:null}var Co=class extends Iu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=gw(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return gw(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=AR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=fe(null);try{i=i||this.ngModule;let o=i instanceof ht?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new pf(e,o):e,u=a.get(Ji,null);if(u===null)throw new $(407,!1);let l=a.get(Ix,null),h=a.get(Qi,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?bM(m,r,this.componentDef.encapsulation,a):JE(m,y,wx(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;C!==null&&(R=lp(C,a,!0));let O=mp(0,null,null,1,0,null,null,null,null,null,null),V=$u(null,O,null,N,null,null,p,m,a,null,R);Zf(V);let L,G,he=null;try{let q=this.componentDef,E,v=null;q.findHostDirectiveDefs?(E=[],v=new Map,q.findHostDirectiveDefs(q,E,v),E.push(q)):E=[q];let _=Ex(V,C);he=Tx(_,C,q,E,V,p,m),G=lE(O,en),C&&Cx(m,q,C,r),n!==void 0&&Sx(G,this.ngContentSelectors,n),L=bx(he,q,E,v,V,[Ax]),_p(O,V,null)}catch(q){throw he!==null&&Ef(he),Ef(V),q}finally{Xf()}return new xf(this.componentType,L,Vu(G,V),V,G)}finally{fe(s)}}},xf=class extends Rf{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Hr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;vp(s[se],s,i,e,n),this.previousInputValues.set(e,n);let o=or(this._tNode.index,s);Ip(o,1)}}get injector(){return new Lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ex(t,e){let n=t[se],r=en;return t[r]=e,zu(n,r,2,"#host",null)}function Tx(t,e,n,r,i,s,o){let a=i[se];Dx(r,t,e,o);let u=null;e!==null&&(u=lp(e,i[qi]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=$u(i,fT(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Cf(a,t,r.length-1),Hu(i,p),i[t.index]=p}function Dx(t,e,n,r){for(let i of t)e.mergedAttrs=To(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Mf(e,e.mergedAttrs,!0),n!==null&&sT(r,n,e))}function bx(t,e,n,r,i,s){let o=ft(),a=i[se],u=Nt(o,i);gT(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Ki(i,a,p,o);zr(m,i)}mT(a,i,o),u&&zr(u,i);let l=Ki(i,a,o.directiveStart+o.componentOffset,o);if(t[jt]=i[jt]=l,s!==null)for(let h of s)h(l,e);return lT(a,o,i),l}function Cx(t,e,n,r){if(r)of(t,n,["ng-version","18.2.11"]);else{let{attrs:i,classes:s}=RR(e.selectors[0]);i&&of(t,n,i),s&&s.length>0&&iT(t,n,s.join(" "))}}function Sx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Ax(){let t=ft();np(_e()[se],t)}var rs=(()=>{class t{static{this.__NG_ELEMENT_ID__=Rx}}return t})();function Rx(){let t=ft();return Mx(t,_e())}var Nx=rs,AT=class extends Nx{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new Lr(this._hostTNode,this._hostLView)}get parentInjector(){let e=rp(this._hostTNode,this._hostLView);if(SE(e)){let n=hu(e,this._hostLView),r=du(e),i=n[se].data[r+8];return new Lr(i,n)}else return new Lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=mw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=pw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,fw(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!qR(e),a;if(o)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new Co(Vr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(ht,null);N&&(s=N)}let h=Vr(u.componentType??{}),p=pw(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,s);return this.insertImpl(y.hostView,a,fw(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(ZR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ot],l=new AT(u,u[$t],u[ot]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return XM(o,i,s,r),e.attachToViewContainerRef(),Uw(Yh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=mw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Df(this._lContainer,n);r&&(ru(Yh(this._lContainer),n),eT(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=Df(this._lContainer,n);return r&&ru(Yh(this._lContainer),n)!=null?new Hr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mw(t){return t[au]}function Yh(t){return t[au]||(t[au]=[])}function Mx(t,e){let n,r=e[t.index];return Dn(r)?n=r:(n=yT(r,e,null,t),e[t.index]=n,Hu(e,n)),Px(n,e,t,r),new AT(n,t,e)}function xx(t,e){let n=t[Pe],r=n.createComment(""),i=Nt(e,t),s=nT(n,i);return vu(n,s,r,fM(n,i),!1),r}var Px=Lx,Ox=()=>!1;function kx(t,e,n){return Ox(t,e,n)}function Lx(t,e,n,r){if(t[Ur])return;let i;n.type&8?i=tn(r):i=xx(e,n),t[Ur]=i}var yw=new Set;function is(t){yw.has(t)||(yw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Fx(t){return typeof t=="function"&&t[vn]!==void 0}function jG(t,e){is("NgSignals");let n=gI(t),r=n[vn];return e?.equal&&(r.equal=e.equal),n.set=i=>wh(r,i),n.update=i=>mI(r,i),n.asReadonly=Vx.bind(n),n}function Vx(){let t=this[vn];if(t.readonlyFn===void 0){let e=()=>this();e[vn]=t,t.readonlyFn=e}return t.readonlyFn}function RT(t){return Fx(t)&&typeof t.set=="function"}function Ux(t){return Object.getPrototypeOf(t.prototype).constructor}function jx(t){let e=Ux(t.type),n=!0,r=[t];for(;e;){let i;if(rr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Wc(t.inputs),o.inputTransforms=Wc(t.inputTransforms),o.declaredInputs=Wc(t.declaredInputs),o.outputs=Wc(t.outputs);let a=i.hostBindings;a&&qx(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zx(t,u),l&&Hx(t,l),Bx(t,i),QA(t.outputs,i.outputs),rr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===jx&&(n=!1)}}e=Object.getPrototypeOf(e)}$x(r)}function Bx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function $x(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=To(i.hostAttrs,n=To(n,i.hostAttrs))}}function Wc(t){return t===$i?{}:t===Ct?[]:t}function zx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Hx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function qx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var ir=class{},So=class{};var Pf=class extends ir{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wu(this);let s=Qw(e);this._bootstrapComponents=YE(s.bootstrap),this._r3Injector=LE(e,n,[{provide:ir,useValue:this},{provide:Yi,useValue:this.componentFactoryResolver},...r],st(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Of=class extends So{constructor(e){super(),this.moduleType=e}create(e){return new Pf(this.moduleType,e,[])}};var Eu=class extends ir{constructor(e){super(),this.componentFactoryResolver=new wu(this),this.instance=null;let n=new Do([...e.providers,{provide:ir,useValue:this},{provide:Yi,useValue:this.componentFactoryResolver}],e.parent||Qf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ep(t,e,n=null){return new Eu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function NT(t){return Wx(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Gx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Wx(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Kx(t,e,n){return t[e]=n}function ss(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Qx(t){return(t.flags&32)===32}function Yx(t,e,n,r,i,s,o,a,u){let l=e.consts,h=zu(e,t,4,o||null,a||null);pT(e,n,h,lu(l,u)),np(e,h);let p=h.tView=mp(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Jx(t,e,n,r,i,s,o,a,u,l){let h=n+en,p=e.firstCreatePass?Yx(h,e,t,r,i,s,o,a,u):e.data[h];xo(p,!1);let m=Xx(e,t,p,n);ep()&&pp(e,t,m,p),zr(m,t);let y=yT(m,t,m,p);return t[h]=y,Hu(t,y),kx(y,p,t),Yf(p)&&dT(e,t,p),u!=null&&hT(t,p,l),p}function Zx(t,e,n,r,i,s,o,a){let u=_e(),l=ct(),h=lu(l.consts,s);return Jx(u,l,t,e,n,r,i,h,o,a),Zx}var Xx=eP;function eP(t,e,n,r){return tp(!0),e[Pe].createComment("")}var Io=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Io||{}),tP=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}}return t})(),vw=class t{constructor(){this.ngZone=P(me),this.scheduler=P(Qi),this.errorHandler=P(wn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Io.EarlyRead,Io.Write,Io.MixedReadWrite,Io.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}};function MT(t,e,n,r){let i=_e(),s=Lu();if(ss(i,s,e)){let o=ct(),a=Fu();$M(a,i,t,e,n,r)}return MT}function xT(t,e,n,r){return ss(t,Lu(),n)?e+Au(n)+r:ar}function Kc(t,e){return t<<17|e<<2}function qr(t){return t>>17&32767}function nP(t){return(t&2)==2}function rP(t,e){return t&131071|e<<17}function kf(t){return t|2}function Zi(t){return(t&131068)>>2}function Jh(t,e){return t&-131069|e<<2}function iP(t){return(t&1)===1}function Lf(t){return t|1}function sP(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=qr(o),u=Zi(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||No(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=qr(t[a+1]);t[r+1]=Kc(m,a),m!==0&&(t[m+1]=Jh(t[m+1],r)),t[a+1]=rP(t[a+1],r)}else t[r+1]=Kc(a,0),a!==0&&(t[a+1]=Jh(t[a+1],r)),a=r;else t[r+1]=Kc(u,0),a===0?a=r:t[u+1]=Jh(t[u+1],r),u=r;l&&(t[r+1]=kf(t[r+1])),_w(t,h,r,!0),_w(t,h,r,!1),oP(e,h,t,r,s),o=Kc(a,u),s?e.classBindings=o:e.styleBindings=o}function oP(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&No(s,e)>=0&&(n[r+1]=Lf(n[r+1]))}function _w(t,e,n,r){let i=t[n+1],s=e===null,o=r?qr(i):Zi(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];aP(u,e)&&(a=!0,t[o+1]=r?Lf(l):kf(l)),o=r?qr(l):Zi(l)}a&&(t[n+1]=r?kf(i):Lf(i))}function aP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?No(t,e)>=0:!1}function cP(t,e,n){let r=_e(),i=Lu();if(ss(r,i,e)){let s=ct(),o=Fu();yp(s,o,r,t,e,r[Pe],n,!1)}return cP}function Iw(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";vp(t,n,s[o],o,r)}function uP(t,e){return lP(t,e,null,!0),uP}function lP(t,e,n,r){let i=_e(),s=ct(),o=dN(2);if(s.firstUpdatePass&&hP(s,t,o,r),e!==ar&&ss(i,o,e)){let a=s.data[ns()];yP(s,a,i,i[Pe],t,i[o+1]=vP(e,n),r,o)}}function dP(t,e){return e>=t.expandoStartIndex}function hP(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ns()],o=dP(t,n);_P(s,r)&&e===null&&!o&&(e=!1),e=fP(i,s,e,r),sP(i,s,e,n,o,r)}}function fP(t,e,n,r){let i=gN(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Zh(null,t,e,n,r),n=Ao(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Zh(i,t,e,n,r),s===null){let u=pP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Zh(null,t,e,u[1],r),u=Ao(u,e.attrs,r),gP(t,e,r,u))}else s=mP(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function pP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Zi(r)!==0)return t[qr(r)]}function gP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[qr(i)]=r}function mP(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ao(r,o,n)}return Ao(r,e.attrs,n)}function Zh(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ao(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ao(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),gR(t,o,n?!0:e[++s]))}return t===void 0?null:t}function yP(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=iP(l)?ww(u,e,n,i,Zi(l),o):void 0;if(!Tu(h)){Tu(s)||nP(l)&&(s=ww(u,null,n,i,a,o));let p=uE(ns(),n);IM(r,o,p,i,s)}}function ww(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===ar&&(m=p?Ct:void 0);let y=p?$h(m,r):h===r?m:void 0;if(l&&!Tu(y)&&(y=$h(u,r)),Tu(y)&&(a=y,o))return a;let C=t[i+1];i=o?qr(C):Zi(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=$h(u,r))}return a}function Tu(t){return t!==void 0}function vP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=st(ju(t)))),t}function _P(t,e){return(t.flags&(e?8:16))!==0}function IP(t,e,n,r,i,s){let o=e.consts,a=lu(o,i),u=zu(e,t,2,r,a);return pT(e,n,u,lu(o,s)),u.attrs!==null&&Mf(u,u.attrs,!1),u.mergedAttrs!==null&&Mf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function PT(t,e,n,r){let i=_e(),s=ct(),o=en+t,a=i[Pe],u=s.firstCreatePass?IP(o,s,i,e,n,r):s.data[o],l=wP(s,i,u,a,e,t);i[o]=l;let h=Yf(u);return xo(u,!0),sT(a,l,u),!Qx(u)&&ep()&&pp(s,i,l,u),tN()===0&&zr(l,i),nN(),h&&(dT(s,i,u),lT(s,u,i)),r!==null&&hT(i,u),PT}function OT(){let t=ft();yE()?cN():(t=t.parent,xo(t,!1));let e=t;sN(e)&&oN(),rN();let n=ct();return n.firstCreatePass&&(np(n,t),iE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&EN(e)&&Iw(n,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&TN(e)&&Iw(n,e,_e(),e.stylesWithoutHost,!1),OT}function Tp(t,e,n,r){return PT(t,e,n,r),OT(),Tp}var wP=(t,e,n,r,i,s)=>(tp(!0),JE(r,i,vN()));function BG(){return _e()}var kr=void 0;function EP(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var TP=["en",[["a","p"],["AM","PM"],kr],[["AM","PM"],kr,kr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kr,"{1} 'at' {0}",kr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",EP],Xh={};function Dp(t){let e=DP(t),n=Ew(e);if(n)return n;let r=e.split("-")[0];if(n=Ew(r),n)return n;if(r==="en")return TP;throw new $(701,!1)}function Ew(t){return t in Xh||(Xh[t]=vo.ng&&vo.ng.common&&vo.ng.common.locales&&vo.ng.common.locales[t]),Xh[t]}var os=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(os||{});function DP(t){return t.toLowerCase().replace(/_/g,"-")}var Du="en-US";var bP=Du;function CP(t){typeof t=="string"&&(bP=t.toLowerCase().replace(/_/g,"-"))}var SP=(t,e,n)=>{};function kT(t,e,n,r){let i=_e(),s=ct(),o=ft();return LT(s,i,i[Pe],o,t,e,r),kT}function AP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ou],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function LT(t,e,n,r,i,s,o){let a=Yf(r),l=t.firstCreatePass&&WM(t),h=e[jt],p=GM(e),m=!0;if(r.type&3||o){let N=Nt(r,e),R=o?o(N):N,O=p.length,V=o?G=>o(tn(G[r.index])):r.index,L=null;if(!o&&a&&(L=AP(t,e,i,r.index)),L!==null){let G=L.__ngLastListenerFn__||L;G.__ngNextListenerFn__=s,L.__ngLastListenerFn__=s,m=!1}else{s=Dw(r,e,h,s),SP(N,i,s);let G=n.listen(R,i,s);p.push(s,G),l&&l.push(i,V,O,O+1)}}else s=Dw(r,e,h,s);let y=r.outputs,C;if(m&&y!==null&&(C=y[i])){let N=C.length;if(N)for(let R=0;R<N;R+=2){let O=C[R],V=C[R+1],he=e[O][V].subscribe(s),q=p.length;p.push(s,he),l&&l.push(i,r.index,q,-(q+1))}}}function Tw(t,e,n,r){let i=fe(null);try{return Qt(6,e,n),n(r)!==!1}catch(s){return _T(t,s),!1}finally{Qt(7,e,n),fe(i)}}function Dw(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?or(t.index,e):e;Ip(o,5);let a=Tw(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=Tw(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function $G(t=1){return yN(t)}function RP(t,e,n,r,i){let s=_e(),o=xT(s,e,n,r);if(o!==ar){let a=ct(),u=Fu();yp(a,u,s,t,o,s[Pe],i,!1)}return RP}function NP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function zG(t,e=""){let n=_e(),r=ct(),i=t+en,s=r.firstCreatePass?zu(r,i,1,e,null):r.data[i],o=MP(r,n,s,e,t);n[i]=o,ep()&&pp(r,n,o,s),xo(s,!1)}var MP=(t,e,n,r,i)=>(tp(!0),rM(e[Pe],r));function xP(t){return FT("",t,""),xP}function FT(t,e,n){let r=_e(),i=xT(r,t,e,n);return i!==ar&&KM(r,ns(),i),FT}function PP(t,e,n){RT(e)&&(e=e());let r=_e(),i=Lu();if(ss(r,i,e)){let s=ct(),o=Fu();yp(s,o,r,t,e,r[Pe],n,!1)}return PP}function HG(t,e){let n=RT(t);return n&&t.set(e),n}function OP(t,e){let n=_e(),r=ct(),i=ft();return LT(r,n,n[Pe],i,t,e),OP}function kP(t,e,n){let r=ct();if(r.firstCreatePass){let i=rr(t);Ff(n,r.data,r.blueprint,i,!0),Ff(e,r.data,r.blueprint,i,!1)}}function Ff(t,e,n,r,i){if(t=rt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Ff(t[s],e,n,r,i);else{let s=ct(),o=_e(),a=ft(),u=Hi(t)?t:rt(t.provide),l=tE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Hi(t)||!t.multi){let y=new $r(l,i,Mt),C=tf(u,e,i?h:h+m,p);C===-1?(mf(pu(a,o),s,u),ef(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[C]=y,o[C]=y)}else{let y=tf(u,e,h+m,p),C=tf(u,e,h,h+m),N=y>=0&&n[y],R=C>=0&&n[C];if(i&&!R||!i&&!N){mf(pu(a,o),s,u);let O=VP(i?FP:LP,n.length,i,r,l);!i&&R&&(n[C].providerFactory=O),ef(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=VT(n[i?C:y],l,!i&&r);ef(s,t,y>-1?y:C,O)}!i&&r&&R&&n[C].componentProviders++}}}function ef(t,e,n,r){let i=Hi(e),s=FR(e);if(i||s){let u=(s?rt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function VT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function tf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function LP(t,e,n,r){return Vf(this.multi,[])}function FP(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ki(n,n[se],this.providerFactory.index,r);s=a.slice(0,o),Vf(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Vf(i,s);return s}function Vf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function VP(t,e,n,r,i){let s=new $r(t,n,Mt);return s.multi=[],s.index=e,s.componentProviders=0,VT(s,i,r&&!n),s}function qG(t,e=[]){return n=>{n.providersResolver=(r,i)=>kP(r,i?i(t):t,e)}}var UP=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Zw(!1,n.type),i=r.length>0?Ep([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:t,providedIn:"environment",factory:()=>new t(J(ht))})}}return t})();function UT(t){is("NgStandalone"),t.getStandaloneInjector=e=>e.get(UP).getOrCreateStandaloneInjector(t)}function jP(t,e){let n=t[e];return n===ar?void 0:n}function BP(t,e,n,r,i,s){let o=e+n;return ss(t,o,i)?Kx(t,o+1,s?r.call(s,i):r(i)):jP(t,o+1)}function GG(t,e){let n=ct(),r,i=t+en;n.firstCreatePass?(r=$P(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Fr(r.type,!0)),o,a=dt(Mt);try{let u=fu(!1),l=s();return fu(u),NP(n,_e(),i,l),l}finally{dt(a)}}function $P(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function WG(t,e,n){let r=t+en,i=_e(),s=JR(i,r);return zP(i,r)?BP(i,uN(),e,s.transform,n,s):s.transform(n)}function zP(t,e){return t[se].data[e].pure}var sr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},jT=new sr("18.2.11");var Wu=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var BT=new B("");function Po(t){return!!t&&typeof t.then=="function"}function $T(t){return!!t&&typeof t.subscribe=="function"}var zT=new B(""),HT=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=P(zT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Po(s))n.push(s);else if($T(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ku=new B("");function HP(){pI(()=>{throw new $(600,!1)})}function qP(t){return t.isBoundToModule}var GP=10;function WP(t,e,n){try{let r=n();return Po(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var cr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P($N),this.afterRenderManager=P(tP),this.zonelessEnabled=P(Gu),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new nt,this.afterTick=new nt,this.componentTypes=[],this.components=[],this.isStable=P(bn).hasPendingTasks.pipe(ne(n=>!n)),this._injector=P(ht)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Iu;if(!this._injector.get(HT).done){let m=!i&&Kw(n),y=!1;throw new $(405,y)}let o;i?o=n:o=this._injector.get(Yi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=qP(o)?void 0:this._injector.get(ir),u=r||o.selector,l=o.create(It.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(BT,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Xc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new $(101,!1);let n=fe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,fe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Ji,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<GP;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)KP(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ou(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Xc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Ku,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Xc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Xc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function KP(t,e,n,r){if(!n&&!Ou(t))return;ET(t,e,n&&!r?0:1)}var Uf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},bp=(()=>{class t{compileModuleSync(n){return new Of(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Qw(n),s=YE(i.declarations).reduce((o,a)=>{let u=Vr(a);return u&&o.push(new Co(u)),o},[]);return new Uf(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var QP=(()=>{class t{constructor(){this.zone=P(me),this.changeDetectionScheduler=P(Qi),this.applicationRef=P(cr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),YP=new B("",{factory:()=>!1});function qT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new me(Ee(U({},GT()),{scheduleInRootZone:n})),[{provide:me,useFactory:t},{provide:zi,multi:!0,useFactory:()=>{let r=P(QP,{optional:!0});return()=>r.initialize()}},{provide:zi,multi:!0,useFactory:()=>{let r=P(JP);return()=>{r.initialize()}}},e===!0?{provide:CT,useValue:!0}:[],{provide:ST,useValue:n??FE}]}function KG(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=qT({ngZoneFactory:()=>{let i=GT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&is("NgZone_CoalesceEvent"),new me(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Rt([{provide:YP,useValue:!0},{provide:Gu,useValue:!1},r])}function GT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var JP=(()=>{class t{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=P(me),this.pendingTasks=P(bn)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ZP=(()=>{class t{constructor(){this.appRef=P(cr),this.taskService=P(bn),this.ngZone=P(me),this.zonelessEnabled=P(Gu),this.disableScheduling=P(CT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Se,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(mu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(ST,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?sw:UE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(mu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,sw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function XP(){return typeof $localize<"u"&&$localize.locale||Du}var Qu=new B("",{providedIn:"root",factory:()=>P(Qu,re.Optional|re.SkipSelf)||XP()});var jf=new B("");function Qc(t){return!t.moduleRef}function eO(t){let e=Qc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(me);return n.run(()=>{Qc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(wn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Qc(t)){let s=()=>e.destroy(),o=t.platformInjector.get(jf);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(jf);o.add(s),t.moduleRef.onDestroy(()=>{Xc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return WP(r,n,()=>{let s=e.get(HT);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Qu,Du);if(CP(o||Du),Qc(t)){let a=e.get(cr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return tO(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function tO(t,e){let n=t.injector.get(cr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new $(-403,!1);e.push(t)}var eu=null;function nO(t=[],e){return It.create({name:e,providers:[{provide:Nu,useValue:"platform"},{provide:jf,useValue:new Set([()=>eu=null])},...t]})}function rO(t=[]){if(eu)return eu;let e=nO(t);return eu=e,HP(),iO(e),e}function iO(t){t.get(cp,null)?.forEach(n=>n())}var Oo=(()=>{class t{static{this.__NG_ELEMENT_ID__=sO}}return t})();function sO(t){return oO(ft(),_e(),(t&16)===16)}function oO(t,e,n){if(xu(t)&&!n){let r=or(t.index,e);return new Hr(r,r)}else if(t.type&175){let r=e[Xt];return new Hr(r,e)}return null}var Bf=class{constructor(){}supports(e){return NT(e)}create(e){return new $f(e)}},aO=(t,e)=>e,$f=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||aO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<bw(r,i,s)?n:r,a=bw(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,C=y+m;h<=C&&C<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!NT(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,Gx(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new zf(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new bu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Hf=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},bu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Hf,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Cw(){return new Cp([new Bf])}var Cp=(()=>{class t{static{this.\u0275prov=z({token:t,providedIn:"root",factory:Cw})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Cw()),deps:[[t,new Vw,new at]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new $(901,!1)}}return t})();function WT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=rO(r),s=[qT({}),{provide:Qi,useExisting:ZP},...n||[]],o=new Eu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return eO({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function KT(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function QG(t,e){is("NgSignals");let n=dI(t);return e?.equal&&(n[vn].equal=e.equal),n}function cO(t){let e=fe(null);try{return t()}finally{fe(e)}}var eD=null;function as(){return eD}function tD(t){eD??=t}var Yu=class{};var pt=new B(""),nD=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>P(hO),providedIn:"platform"})}}return t})();var hO=(()=>{class t extends nD{constructor(){super(),this._doc=P(pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return as().getBaseHref(this._doc)}onPopState(n){let r=as().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=as().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function rD(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function QT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Gr(t){return t&&t[0]!=="?"?"?"+t:t}var Zu=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>P(iD),providedIn:"root"})}}return t})(),fO=new B(""),iD=(()=>{class t extends Zu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return rD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Gr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Gr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Gr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(J(nD),J(fO,8))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Vo=(()=>{class t{constructor(n){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=mO(QT(YT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Gr(r))}normalize(n){return t.stripTrailingSlash(gO(this._basePath,YT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Gr}static{this.joinWithSlash=rD}static{this.stripTrailingSlash=QT}static{this.\u0275fac=function(r){return new(r||t)(J(Zu))}}static{this.\u0275prov=z({token:t,factory:()=>pO(),providedIn:"root"})}}return t})();function pO(){return new Vo(J(Zu))}function gO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function YT(t){return t.replace(/\/index.html$/,"")}function mO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var sD=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(sD||{});var Cn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Lo(t,e){let n=Dp(t),r=n[os.NumberSymbols][e];if(typeof r>"u"){if(e===Cn.CurrencyDecimal)return n[os.NumberSymbols][Cn.Decimal];if(e===Cn.CurrencyGroup)return n[os.NumberSymbols][Cn.Group]}return r}function yO(t,e){return Dp(t)[os.NumberFormats][e]}var vO=/^(\d+)?\.((\d+)(-(\d+))?)?$/,JT=22,Ju=".",Fo="0",_O=";",IO=",",Sp="#";function wO(t,e,n,r,i,s,o=!1){let a="",u=!1;if(!isFinite(t))a=Lo(n,Cn.Infinity);else{let l=bO(t);o&&(l=DO(l));let h=e.minInt,p=e.minFrac,m=e.maxFrac;if(s){let V=s.match(vO);if(V===null)throw new Error(`${s} is not a valid digit info`);let L=V[1],G=V[3],he=V[5];L!=null&&(h=Ap(L)),G!=null&&(p=Ap(G)),he!=null?m=Ap(he):G!=null&&p>m&&(m=p)}CO(l,p,m);let y=l.digits,C=l.integerLen,N=l.exponent,R=[];for(u=y.every(V=>!V);C<h;C++)y.unshift(0);for(;C<0;C++)y.unshift(0);C>0?R=y.splice(C,y.length):(R=y,y=[0]);let O=[];for(y.length>=e.lgSize&&O.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)O.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&O.unshift(y.join("")),a=O.join(Lo(n,r)),R.length&&(a+=Lo(n,i)+R.join("")),N&&(a+=Lo(n,Cn.Exponential)+"+"+N)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function EO(t,e,n){let r=yO(e,sD.Decimal),i=TO(r,Lo(e,Cn.MinusSign));return wO(t,i,e,Cn.Group,Cn.Decimal,n)}function TO(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(_O),i=r[0],s=r[1],o=i.indexOf(Ju)!==-1?i.split(Ju):[i.substring(0,i.lastIndexOf(Fo)+1),i.substring(i.lastIndexOf(Fo)+1)],a=o[0],u=o[1]||"";n.posPre=a.substring(0,a.indexOf(Sp));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===Fo?n.minFrac=n.maxFrac=h+1:p===Sp?n.maxFrac=h+1:n.posSuf+=p}let l=a.split(IO);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let h=i.length-n.posPre.length-n.posSuf.length,p=s.indexOf(Sp);n.negPre=s.substring(0,p).replace(/'/g,""),n.negSuf=s.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function DO(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function bO(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Ju))>-1&&(e=e.replace(Ju,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Fo;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Fo;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>JT&&(r=r.splice(0,JT-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function CO(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let p=o;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let p=1;p<o;p++)r[p]=0}if(a>=5)if(o-1<0){for(let p=0;p>o;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,l=e+t.integerLen,h=r.reduceRight(function(p,m,y,C){return m=m+p,C[y]=m<10?m:m-10,u&&(C[y]===0&&y>=l?C.pop():u=!1),m>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function Ap(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Xu(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Rp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},v9=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Rp(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),ZT(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);ZT(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Mt(rs),Mt(qu),Mt(Cp))}}static{this.\u0275dir=Mo({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function ZT(t,e){t.context.$implicit=e.item}var _9=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Np,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){XT("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){XT("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Mt(rs),Mt(qu))}}static{this.\u0275dir=Mo({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Np=class{constructor(){this.$implicit=null,this.ngIf=null}};function XT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${st(e)}'.`)}function SO(t,e){return new $(2100,!1)}var I9=(()=>{class t{constructor(n){this._locale=n}transform(n,r,i){if(!AO(n))return null;i||=this._locale;try{let s=RO(n);return EO(s,i,r)}catch(s){throw SO(t,s.message)}}static{this.\u0275fac=function(r){return new(r||t)(Mt(Qu,16))}}static{this.\u0275pipe=qw({name:"number",type:t,pure:!0,standalone:!0})}}return t})();function AO(t){return!(t==null||t===""||t!==t)}function RO(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var NO=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=es({type:t})}static{this.\u0275inj=Xi({})}}return t})(),oD="browser",MO="server";function el(t){return t===MO}var cs=class{};var jo=class{},nl=class{},Sn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var xp=class{encodeKey(e){return aD(e)}encodeValue(e){return aD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function PO(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var OO=/%(\d[a-f0-9])/gi,kO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function aD(t){return encodeURIComponent(t).replace(OO,(e,n)=>kO[n]??e)}function tl(t){return`${t}`}var lr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new xp,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=PO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(tl):[tl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(tl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(tl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Pp=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function LO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function cD(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function uD(t){return typeof Blob<"u"&&t instanceof Blob}function lD(t){return typeof FormData<"u"&&t instanceof FormData}function FO(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Uo=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(LO(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Sn,this.context??=new Pp,!this.params)this.params=new lr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||cD(this.body)||uD(this.body)||lD(this.body)||FO(this.body)?this.body:this.body instanceof lr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lD(this.body)?null:uD(this.body)?this.body.type||null:cD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof lr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},dr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(dr||{}),Bo=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Sn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},rl=class t extends Bo{constructor(e={}){super(e),this.type=dr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},$o=class t extends Bo{constructor(e={}){super(e),this.type=dr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ur=class extends Bo{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},gD=200,VO=204;function Mp(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var UO=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof Uo)s=n;else{let u;i.headers instanceof Sn?u=i.headers:u=new Sn(i.headers);let l;i.params&&(i.params instanceof lr?l=i.params:l=new lr({fromObject:i.params})),s=new Uo(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=Q(s).pipe(Yn(u=>this.handler.handle(u)));if(n instanceof Uo||i.observe==="events")return o;let a=o.pipe(vt(u=>u instanceof $o));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ne(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(ne(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new lr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Mp(i,r))}post(n,r,i={}){return this.request("POST",n,Mp(i,r))}put(n,r,i={}){return this.request("PUT",n,Mp(i,r))}static{this.\u0275fac=function(r){return new(r||t)(J(jo))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),jO=/^\)\]\}',?\n/,BO="X-Request-URL";function dD(t){if(t.url)return t.url;let e=BO.toLocaleLowerCase();return t.headers.get(e)}var $O=(()=>{class t{constructor(){this.fetchImpl=P(Op,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n)),this.ngZone=P(me)}handle(n){return new ie(r=>{let i=new AbortController;return this.doRequest(n,i.signal,r).then(kp,s=>r.error(new ur({error:s}))),()=>i.abort()})}doRequest(n,r,i){return w(this,null,function*(){let s=this.createRequestInit(n),o;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,U({signal:r},s)));zO(y),i.next({type:dr.Sent}),o=yield y}catch(y){i.error(new ur({error:y,status:y.status??0,statusText:y.statusText,url:n.urlWithParams,headers:y.headers}));return}let a=new Sn(o.headers),u=o.statusText,l=dD(o)??n.urlWithParams,h=o.status,p=null;if(n.reportProgress&&i.next(new rl({headers:a,status:h,statusText:u,url:l})),o.body){let y=o.headers.get("content-length"),C=[],N=o.body.getReader(),R=0,O,V,L=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>w(this,null,function*(){for(;;){let{done:he,value:q}=yield N.read();if(he)break;if(C.push(q),R+=q.length,n.reportProgress){V=n.responseType==="text"?(V??"")+(O??=new TextDecoder).decode(q,{stream:!0}):void 0;let E=()=>i.next({type:dr.DownloadProgress,total:y?+y:void 0,loaded:R,partialText:V});L?L.run(E):E()}}}));let G=this.concatChunks(C,R);try{let he=o.headers.get("Content-Type")??"";p=this.parseBody(n,G,he)}catch(he){i.error(new ur({error:he,headers:new Sn(o.headers),status:o.status,statusText:o.statusText,url:dD(o)??n.urlWithParams}));return}}h===0&&(h=p?gD:0),h>=200&&h<300?(i.next(new $o({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new ur({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(n,r,i){switch(n.responseType){case"json":let s=new TextDecoder().decode(r).replace(jO,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},i=n.withCredentials?"include":void 0;if(n.headers.forEach((s,o)=>r[s]=o.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){let s=n.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i}}concatChunks(n,r){let i=new Uint8Array(r),s=0;for(let o of n)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),Op=class{};function kp(){}function zO(t){t.then(kp,kp)}function mD(t,e){return e(t)}function HO(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function qO(t,e,n){return(r,i)=>Bt(n,()=>e(r,s=>t(s,i)))}var GO=new B(""),Lp=new B(""),WO=new B(""),yD=new B("",{providedIn:"root",factory:()=>!0});function KO(){let t=null;return(e,n)=>{t===null&&(t=(P(GO,{optional:!0})??[]).reduceRight(HO,mD));let r=P(bn);if(P(yD)){let s=r.add();return t(e,n).pipe(Zn(()=>r.remove(s)))}else return t(e,n)}}var hD=(()=>{class t extends jo{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=P(bn),this.contributeToStability=P(yD)}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Lp),...this.injector.get(WO,[])]));this.chain=r.reduceRight((i,s)=>qO(i,s,this.injector),mD)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Zn(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||t)(J(nl),J(ht))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})();var QO=/^\)\]\}',?\n/;function YO(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var fD=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new $(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Re(r.\u0275loadImpl()):Q(null)).pipe(_t(()=>new ie(s=>{let o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((N,R)=>o.setRequestHeader(N,R.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let N=n.detectContentTypeHeader();N!==null&&o.setRequestHeader("Content-Type",N)}if(n.responseType){let N=n.responseType.toLowerCase();o.responseType=N!=="json"?N:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=o.statusText||"OK",R=new Sn(o.getAllResponseHeaders()),O=YO(o)||n.url;return u=new rl({headers:R,status:o.status,statusText:N,url:O}),u},h=()=>{let{headers:N,status:R,statusText:O,url:V}=l(),L=null;R!==VO&&(L=typeof o.response>"u"?o.responseText:o.response),R===0&&(R=L?gD:0);let G=R>=200&&R<300;if(n.responseType==="json"&&typeof L=="string"){let he=L;L=L.replace(QO,"");try{L=L!==""?JSON.parse(L):null}catch(q){L=he,G&&(G=!1,L={error:q,text:L})}}G?(s.next(new $o({body:L,headers:N,status:R,statusText:O,url:V||void 0})),s.complete()):s.error(new ur({error:L,headers:N,status:R,statusText:O,url:V||void 0}))},p=N=>{let{url:R}=l(),O=new ur({error:N,status:o.status||0,statusText:o.statusText||"Unknown Error",url:R||void 0});s.error(O)},m=!1,y=N=>{m||(s.next(l()),m=!0);let R={type:dr.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),n.responseType==="text"&&o.responseText&&(R.partialText=o.responseText),s.next(R)},C=N=>{let R={type:dr.UploadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),s.next(R)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),n.reportProgress&&(o.addEventListener("progress",y),a!==null&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:dr.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),n.reportProgress&&(o.removeEventListener("progress",y),a!==null&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)(J(cs))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),vD=new B(""),JO="XSRF-TOKEN",ZO=new B("",{providedIn:"root",factory:()=>JO}),XO="X-XSRF-TOKEN",ek=new B("",{providedIn:"root",factory:()=>XO}),il=class{},tk=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xu(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)(J(pt),J(nn),J(ZO))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})();function nk(t,e){let n=t.url.toLowerCase();if(!P(vD)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=P(il).getToken(),i=P(ek);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var _D=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(_D||{});function rk(t,e){return{\u0275kind:t,\u0275providers:e}}function ik(...t){let e=[UO,fD,hD,{provide:jo,useExisting:hD},{provide:nl,useFactory:()=>P($O,{optional:!0})??P(fD)},{provide:Lp,useValue:nk,multi:!0},{provide:vD,useValue:!0},{provide:il,useClass:tk}];for(let n of t)e.push(...n.\u0275providers);return Rt(e)}var pD=new B("");function sk(){return rk(_D.LegacyInterceptors,[{provide:pD,useFactory:KO},{provide:Lp,useExisting:pD,multi:!0}])}var O9=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=es({type:t})}static{this.\u0275inj=Xi({providers:[ik(sk())]})}}return t})();var Up=class extends Yu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jp=class t extends Up{static makeCurrent(){tD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=ok();return n==null?null:ak(n)}resetBaseElement(){zo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xu(document.cookie,e)}},zo=null;function ok(){return zo=zo||document.querySelector("base"),zo?zo.getAttribute("href"):null}function ak(t){return new URL(t,document.baseURI).pathname}var ck=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),Bp=new B(""),TD=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(J(Bp),J(me))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),sl=class{constructor(e){this._doc=e}},Fp="ng-app-id",DD=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=el(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Fp}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Fp),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Fp,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(J(pt),J(ap),J(up,8),J(nn))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),Vp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},zp=/%COMP%/g,bD="%COMP%",uk=`_nghost-${bD}`,lk=`_ngcontent-${bD}`,dk=!0,hk=new B("",{providedIn:"root",factory:()=>dk});function fk(t){return lk.replace(zp,t)}function pk(t){return uk.replace(zp,t)}function CD(t,e){return e.map(n=>n.replace(zp,t))}var ID=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=el(a),this.defaultRenderer=new Ho(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jt.ShadowDom&&(r=Ee(U({},r),{encapsulation:Jt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ol?i.applyToHost(n):i instanceof qo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Jt.Emulated:s=new ol(u,l,r,this.appId,h,o,a,p);break;case Jt.ShadowDom:return new $p(u,l,n,r,o,a,this.nonce,p);default:s=new qo(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(J(TD),J(DD),J(ap),J(hk),J(pt),J(nn),J(me),J(up))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),Ho=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Vp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(wD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(wD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Vp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Vp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(En.DashCase|En.Important)?e.style.setProperty(n,r,i&En.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&En.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=as().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function wD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var $p=class extends Ho{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=CD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qo=class extends Ho{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?CD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ol=class extends qo{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=fk(l),this.hostAttr=pk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},gk=(()=>{class t extends sl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(J(pt))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),ED=["alt","control","meta","shift"],mk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},vk=(()=>{class t extends sl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>as().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),ED.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=mk[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ED.forEach(o=>{if(o!==i){let a=yk[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(J(pt))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})();function oW(t,e){return WT(U({rootComponent:t},_k(e)))}function _k(t){return{appProviders:[...Dk,...t?.providers??[]],platformProviders:Tk}}function Ik(){jp.makeCurrent()}function wk(){return new wn}function Ek(){return GE(document),document}var Tk=[{provide:nn,useValue:oD},{provide:cp,useValue:Ik,multi:!0},{provide:pt,useFactory:Ek,deps:[]}];var Dk=[{provide:Nu,useValue:"root"},{provide:wn,useFactory:wk,deps:[]},{provide:Bp,useClass:gk,multi:!0,deps:[pt,me,nn]},{provide:Bp,useClass:vk,multi:!0,deps:[pt]},ID,DD,TD,{provide:Ji,useExisting:ID},{provide:cs,useClass:ck,deps:[]},[]];var SD=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(J(pt))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var te="primary",ca=Symbol("RouteTitle"),Kp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ps(t){return new Kp(t)}function Ck(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Sk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!rn(t[n],e[n]))return!1;return!0}function rn(t,e){let n=t?Qp(t):void 0,r=e?Qp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!kD(t[i],e[i]))return!1;return!0}function Qp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function kD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function LD(t){return t.length>0?t[t.length-1]:null}function hr(t){return kh(t)?t:Po(t)?Re(Promise.resolve(t)):Q(t)}var Ak={exact:VD,subset:UD},FD={exact:Rk,subset:Nk,ignored:()=>!0};function AD(t,e,n){return Ak[n.paths](t.root,e.root,n.matrixParams)&&FD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Rk(t,e){return rn(t,e)}function VD(t,e,n){if(!Kr(t.segments,e.segments)||!ul(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!VD(t.children[r],e.children[r],n))return!1;return!0}function Nk(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>kD(t[n],e[n]))}function UD(t,e,n){return jD(t,e,e.segments,n)}function jD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Kr(i,n)||e.hasChildren()||!ul(i,n,r))}else if(t.segments.length===n.length){if(!Kr(t.segments,n)||!ul(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!UD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Kr(t.segments,i)||!ul(t.segments,i,r)||!t.children[te]?!1:jD(t.children[te],e,s,r)}}function ul(t,e,n){return e.every((r,i)=>FD[n](t[i].parameters,r.parameters))}var Rn=class{constructor(e=new ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ps(this.queryParams),this._queryParamMap}toString(){return Pk.serialize(this)}},ye=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ll(this)}},Wr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ps(this.parameters),this._parameterMap}toString(){return $D(this)}};function Mk(t,e){return Kr(t,e)&&t.every((n,r)=>rn(n.parameters,e[r].parameters))}function Kr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function xk(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var wg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>new Zo,providedIn:"root"})}}return t})(),Zo=class{parse(e){let n=new Jp(e);return new Rn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Go(e.root,!0)}`,r=Lk(e.queryParams),i=typeof e.fragment=="string"?`#${Ok(e.fragment)}`:"";return`${n}${r}${i}`}},Pk=new Zo;function ll(t){return t.segments.map(e=>$D(e)).join("/")}function Go(t,e){if(!t.hasChildren())return ll(t);if(e){let n=t.children[te]?Go(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${Go(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=xk(t,(r,i)=>i===te?[Go(t.children[te],!1)]:[`${i}:${Go(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${ll(t)}/${n[0]}`:`${ll(t)}/(${n.join("//")})`}}function BD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function al(t){return BD(t).replace(/%3B/gi,";")}function Ok(t){return encodeURI(t)}function Yp(t){return BD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dl(t){return decodeURIComponent(t)}function RD(t){return dl(t.replace(/\+/g,"%20"))}function $D(t){return`${Yp(t.path)}${kk(t.parameters)}`}function kk(t){return Object.entries(t).map(([e,n])=>`;${Yp(e)}=${Yp(n)}`).join("")}function Lk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${al(n)}=${al(i)}`).join("&"):`${al(n)}=${al(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Fk=/^[^\/()?;#]+/;function Hp(t){let e=t.match(Fk);return e?e[0]:""}var Vk=/^[^\/()?;=#]+/;function Uk(t){let e=t.match(Vk);return e?e[0]:""}var jk=/^[^=?&#]+/;function Bk(t){let e=t.match(jk);return e?e[0]:""}var $k=/^[^&#]+/;function zk(t){let e=t.match($k);return e?e[0]:""}var Jp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new ye(e,n)),r}parseSegment(){let e=Hp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Wr(dl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Uk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Hp(this.remaining);i&&(r=i,this.capture(r))}e[dl(n)]=dl(r)}parseQueryParam(e){let n=Bk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=zk(this.remaining);o&&(r=o,this.capture(r))}let i=RD(n),s=RD(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[te]:new ye([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function zD(t){return t.segments.length>0?new ye([],{[te]:t}):t}function HD(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=HD(i);if(r===te&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ye(t.segments,e);return Hk(n)}function Hk(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new ye(t.segments.concat(e.segments),e.children)}return t}function Xo(t){return t instanceof Rn}function qk(t,e,n=null,r=null){let i=qD(t);return GD(i,e,n,r)}function qD(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new ye(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=zD(r);return e??i}function GD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return qp(i,i,i,n,r);let s=Gk(e);if(s.toRoot())return qp(i,i,new ye([],{}),n,r);let o=Wk(s,i,t),a=o.processChildren?Qo(o.segmentGroup,o.index,s.commands):KD(o.segmentGroup,o.index,s.commands);return qp(i,o.segmentGroup,a,n,r)}function hl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ea(t){return typeof t=="object"&&t!=null&&t.outlets}function qp(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=WD(t,e,n);let a=zD(HD(o));return new Rn(a,s,i)}function WD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=WD(s,e,n)}),new ye(t.segments,r)}var fl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&hl(r[0]))throw new $(4003,!1);let i=r.find(ea);if(i&&i!==LD(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Gk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new fl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new fl(n,e,r)}var ds=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Wk(t,e,n){if(t.isAbsolute)return new ds(e,!0,0);if(!n)return new ds(e,!1,NaN);if(n.parent===null)return new ds(n,!0,0);let r=hl(t.commands[0])?0:1,i=n.segments.length-1+r;return Kk(n,i,t.numberOfDoubleDots)}function Kk(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new ds(r,!1,i-s)}function Qk(t){return ea(t[0])?t[0].outlets:{[te]:t}}function KD(t,e,n){if(t??=new ye([],{}),t.segments.length===0&&t.hasChildren())return Qo(t,e,n);let r=Yk(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ye(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new ye(t.segments.slice(r.pathIndex),t.children),Qo(s,0,i)}else return r.match&&i.length===0?new ye(t.segments,{}):r.match&&!t.hasChildren()?Zp(t,e,n):r.match?Qo(t,0,i):Zp(t,e,n)}function Qo(t,e,n){if(n.length===0)return new ye(t.segments,{});{let r=Qk(n),i={};if(Object.keys(r).some(s=>s!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let s=Qo(t.children[te],e,n);return new ye(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=KD(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ye(t.segments,i)}}function Yk(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ea(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!MD(u,l,o))return s;r+=2}else{if(!MD(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ea(s)){let u=Jk(s.outlets);return new ye(r,u)}if(i===0&&hl(n[0])){let u=t.segments[e];r.push(new Wr(u.path,ND(n[0]))),i++;continue}let o=ea(s)?s.outlets[te]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&hl(a)?(r.push(new Wr(o,ND(a))),i+=2):(r.push(new Wr(o,{})),i++)}return new ye(r,{})}function Jk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Zp(new ye([],{}),0,r))}),e}function ND(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function MD(t,e,n){return t==n.path&&rn(e,n.parameters)}var Yo="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),xt=class{constructor(e,n){this.id=e,this.url=n}},ta=class extends xt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qr=class extends xt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Et=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Et||{}),Xp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Xp||{}),An=class extends xt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yr=class extends xt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},na=class extends xt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pl=class extends xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eg=class extends xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tg=class extends xt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ng=class extends xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rg=class extends xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ig=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},og=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ag=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ug=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ra=class{},gs=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Zk(t,e){return t.providers&&!t._injector&&(t._injector=Ep(t.providers,e,`Route: ${t.path}`)),t._injector??e}function zt(t){return t.outlet||te}function Xk(t,e){let n=t.filter(r=>zt(r)===e);return n.push(...t.filter(r=>zt(r)!==e)),n}function ua(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var lg=class{get injector(){return ua(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new wl(this.rootInjector),this.attachRef=null}},wl=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new lg(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(J(ht))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=hg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hg(e,this._root).map(n=>n.value)}};function dg(t,e){if(t===e.value)return e;for(let n of e.children){let r=dg(t,n);if(r)return r}return null}function hg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=hg(t,n);if(r.length)return r.unshift(e),r}return[]}var wt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ls(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ml=class extends gl{constructor(e,n){super(e),this.snapshot=n,Eg(this,e)}toString(){return this.snapshot.toString()}};function QD(t){let e=e1(t),n=new He([new Wr("",{})]),r=new He({}),i=new He({}),s=new He({}),o=new He(""),a=new ms(n,r,s,o,i,te,t,e.root);return a.snapshot=e.root,new ml(new wt(a,[]),e)}function e1(t){let e={},n={},r={},i="",s=new hs([],e,r,i,n,te,t,null,{});return new vl("",new wt(s,[]))}var ms=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[ca]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),t.params),data:U(U({},e.data),t.data),resolve:U(U(U(U({},t.data),e.data),i?.data),t._resolvedData)}:r={params:U({},t.params),data:U({},t.data),resolve:U(U({},t.data),t._resolvedData??{})},i&&JD(i)&&(r.resolve[ca]=i.title),r}var hs=class{get title(){return this.data?.[ca]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},vl=class extends gl{constructor(e,n){super(n),this.url=e,Eg(this,n)}toString(){return YD(this._root)}};function Eg(t,e){e.value._routerState=t,e.children.forEach(n=>Eg(t,n))}function YD(t){let e=t.children.length>0?` { ${t.children.map(YD).join(", ")} } `:"";return`${t.value}${e}`}function Gp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,rn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),rn(e.params,n.params)||t.paramsSubject.next(n.params),Sk(e.url,n.url)||t.urlSubject.next(n.url),rn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fg(t,e){let n=rn(t.params,e.params)&&Mk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||fg(t.parent,e.parent))}function JD(t){return typeof t.title=="string"||t.title===null}var t1=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=P(wl),this.location=P(rs),this.changeDetector=P(Oo),this.inputBinder=P(Tg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new pg(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Mo({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pu]})}}return t})(),pg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ms?this.route:e===wl?this.childContexts:this.parent.get(e,n)}},Tg=new B("");function n1(t,e,n){let r=ia(t,e._root,n?n._root:void 0);return new ml(r,e)}function ia(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=r1(t,e,n);return new wt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ia(t,a)),o}}let r=i1(e.value),i=e.children.map(s=>ia(t,s));return new wt(r,i)}}function r1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ia(t,r,i);return ia(t,r)})}function i1(t){return new ms(new He(t.url),new He(t.params),new He(t.queryParams),new He(t.fragment),new He(t.data),t.outlet,t.component,t)}var sa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},ZD="ngNavigationCancelingError";function _l(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=XD(!1,Et.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function XD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ZD]=!0,n.cancellationCode=e,n}function s1(t){return eb(t)&&Xo(t.url)}function eb(t){return!!t&&t[ZD]}var o1=(t,e,n,r)=>ne(i=>(new gg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),gg=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ls(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ls(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ls(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ls(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ug(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ag(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Gp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gp(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Il=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fs=class{constructor(e,n){this.component=e,this.route=n}};function a1(t,e,n){let r=t._root,i=e?e._root:null;return Wo(r,i,n,[r.value])}function c1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function vs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Mw(t)?t:e.get(t):r}function Wo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ls(e);return t.children.forEach(o=>{u1(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Jo(a,n.getContext(o),i)),i}function u1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=l1(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Il(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Wo(t,e,a?a.children:null,r,i):Wo(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fs(a.outlet.component,o))}else o&&Jo(e,a,i),i.canActivateChecks.push(new Il(r)),s.component?Wo(t,null,a?a.children:null,r,i):Wo(t,null,n,r,i);return i}function l1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Kr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Kr(t.url,e.url)||!rn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fg(t,e)||!rn(t.queryParams,e.queryParams);case"paramsChange":default:return!fg(t,e)}}function Jo(t,e,n){let r=ls(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Jo(o,e.children.getContext(s),n):Jo(o,null,n):Jo(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new fs(e.outlet.component,i)):n.canDeactivateChecks.push(new fs(null,i)):n.canDeactivateChecks.push(new fs(null,i))}function la(t){return typeof t=="function"}function d1(t){return typeof t=="boolean"}function h1(t){return t&&la(t.canLoad)}function f1(t){return t&&la(t.canActivate)}function p1(t){return t&&la(t.canActivateChild)}function g1(t){return t&&la(t.canDeactivate)}function m1(t){return t&&la(t.canMatch)}function tb(t){return t instanceof _n||t?.name==="EmptyError"}var cl=Symbol("INITIAL_VALUE");function ys(){return _t(t=>zc(t.map(e=>e.pipe(In(1),jh(cl)))).pipe(ne(e=>{for(let n of e)if(n!==!0){if(n===cl)return cl;if(n===!1||y1(n))return n}return!0}),vt(e=>e!==cl),In(1)))}function y1(t){return Xo(t)||t instanceof sa}function v1(t,e){return Ve(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Q(Ee(U({},n),{guardsResult:!0})):_1(o,r,i,t).pipe(Ve(a=>a&&d1(a)?I1(r,s,t,e):Q(a)),ne(a=>Ee(U({},n),{guardsResult:a})))})}function _1(t,e,n,r){return Re(t).pipe(Ve(i=>b1(i.component,i.route,n,e,r)),Kt(i=>i!==!0,!0))}function I1(t,e,n,r){return Re(e).pipe(Yn(i=>ki(E1(i.route.parent,r),w1(i.route,r),D1(t,i.path,n),T1(t,i.route,n))),Kt(i=>i!==!0,!0))}function w1(t,e){return t!==null&&e&&e(new cg(t)),Q(!0)}function E1(t,e){return t!==null&&e&&e(new og(t)),Q(!0)}function T1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(s=>Hc(()=>{let o=ua(e)??n,a=vs(s,o),u=f1(a)?a.canActivate(e,t):Bt(o,()=>a(e,t));return hr(u).pipe(Kt())}));return Q(i).pipe(ys())}function D1(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>c1(o)).filter(o=>o!==null).map(o=>Hc(()=>{let a=o.guards.map(u=>{let l=ua(o.node)??n,h=vs(u,l),p=p1(h)?h.canActivateChild(r,t):Bt(l,()=>h(r,t));return hr(p).pipe(Kt())});return Q(a).pipe(ys())}));return Q(s).pipe(ys())}function b1(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Q(!0);let o=s.map(a=>{let u=ua(e)??i,l=vs(a,u),h=g1(l)?l.canDeactivate(t,e,n,r):Bt(u,()=>l(t,e,n,r));return hr(h).pipe(Kt())});return Q(o).pipe(ys())}function C1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let s=i.map(o=>{let a=vs(o,t),u=h1(a)?a.canLoad(e,n):Bt(t,()=>a(e,n));return hr(u)});return Q(s).pipe(ys(),nb(r))}function nb(t){return Sh(xe(e=>{if(typeof e!="boolean")throw _l(t,e)}),ne(e=>e===!0))}function S1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let s=i.map(o=>{let a=vs(o,t),u=m1(a)?a.canMatch(e,n):Bt(t,()=>a(e,n));return hr(u)});return Q(s).pipe(ys(),nb(r))}var oa=class{constructor(e){this.segmentGroup=e||null}},aa=class extends Error{constructor(e){super(),this.urlTree=e}};function us(t){return Oi(new oa(t))}function A1(t){return Oi(new $(4e3,!1))}function R1(t){return Oi(XD(!1,Et.GuardRejected))}var mg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[te])return A1(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:C,title:N}=i,R=Bt(s,()=>a({params:y,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Rn)throw new aa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new aa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Rn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ye(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},yg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function N1(t,e,n,r,i){let s=rb(t,e,n);return s.matched?(r=Zk(e,r),S1(r,e,n,i).pipe(ne(o=>o===!0?s:U({},yg)))):Q(s)}function rb(t,e,n){if(e.path==="**")return M1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?U({},yg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Ck)(n,t,e);if(!i)return U({},yg);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function M1(t){return{matched:!0,parameters:t.length>0?LD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function xD(t,e,n,r){return n.length>0&&O1(t,n,r)?{segmentGroup:new ye(e,P1(r,new ye(n,t.children))),slicedSegments:[]}:n.length===0&&k1(t,n,r)?{segmentGroup:new ye(t.segments,x1(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ye(t.segments,t.children),slicedSegments:n}}function x1(t,e,n,r){let i={};for(let s of n)if(El(t,e,s)&&!r[zt(s)]){let o=new ye([],{});i[zt(s)]=o}return U(U({},r),i)}function P1(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&zt(r)!==te){let i=new ye([],{});n[zt(r)]=i}return n}function O1(t,e,n){return n.some(r=>El(t,e,r)&&zt(r)!==te)}function k1(t,e,n){return n.some(r=>El(t,e,r))}function El(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function L1(t,e,n){return e.length===0&&!t.children[n]}var vg=class{};function F1(t,e,n,r,i,s,o="emptyOnly"){return new _g(t,e,n,r,i,o,s).recognize()}var V1=31,_g=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new mg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=xD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:n,rootSnapshot:r})=>{let i=new wt(r,n),s=new vl("",i),o=qk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new hs([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ne(r=>({children:r,rootSnapshot:n})),Qn(r=>{if(r instanceof aa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof oa?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ne(o=>o instanceof wt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Re(s).pipe(Yn(o=>{let a=r.children[o],u=Xk(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Uh((o,a)=>(o.push(...a),o)),Jn(null),Vh(),Ve(o=>{if(o===null)return us(r);let a=ib(o);return U1(a),Q(a)}))}processSegment(e,n,r,i,s,o,a){return Re(n).pipe(Yn(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(Qn(l=>{if(l instanceof oa)return Q(null);throw l}))),Kt(u=>!!u),Qn(u=>{if(tb(u))return L1(r,i,s)?Q(new vg):us(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return zt(r)!==o&&(o===te||!El(i,s,r))?us(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):us(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=rb(n,i,s);if(!u)return us(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>V1&&(this.allowRedirects=!1));let y=new hs(s,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,PD(i),zt(i),i.component??i._loadedComponent??null,i,OD(i)),C=yl(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Ve(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=N1(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(_t(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(_t(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new hs(m,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,PD(r),zt(r),r.component??r._loadedComponent??null,r,OD(r)),N=yl(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:O}=xD(n,m,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(ne(L=>new wt(C,L)));if(l.length===0&&O.length===0)return Q(new wt(C,[]));let V=zt(r)===s;return this.processSegment(h,l,R,O,V?te:s,!0,C).pipe(ne(L=>new wt(C,L instanceof wt?[L]:[])))}))):us(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):C1(e,n,r,this.urlSerializer).pipe(Ve(i=>i?this.configLoader.loadChildren(e,n).pipe(xe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):R1(n))):Q({routes:[],injector:e})}};function U1(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function j1(t){let e=t.value.routeConfig;return e&&e.path===""}function ib(t){let e=[],n=new Set;for(let r of t){if(!j1(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ib(r.children);e.push(new wt(r.value,i))}return e.filter(r=>!n.has(r))}function PD(t){return t.data||{}}function OD(t){return t.resolve||{}}function B1(t,e,n,r,i,s){return Ve(o=>F1(t,e,n,r,o.extractedUrl,i,s).pipe(ne(({state:a,tree:u})=>Ee(U({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function $1(t,e){return Ve(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of sb(u))o.add(l);let a=0;return Re(o).pipe(Yn(u=>s.has(u)?z1(u,r,t,e):(u.data=yl(u,u.parent,t).resolve,Q(void 0))),xe(()=>a++),Li(1),Ve(u=>a===o.size?Q(n):yt))})}function sb(t){let e=t.children.map(n=>sb(n)).flat();return[t,...e]}function z1(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!JD(i)&&(s[ca]=i.title),H1(s,t,e,r).pipe(ne(o=>(t._resolvedData=o,t.data=yl(t,t.parent,n).resolve,null)))}function H1(t,e,n,r){let i=Qp(t);if(i.length===0)return Q({});let s={};return Re(i).pipe(Ve(o=>q1(t[o],e,n,r).pipe(Kt(),xe(a=>{if(a instanceof sa)throw _l(new Zo,a);s[o]=a}))),Li(1),Fh(s),Qn(o=>tb(o)?yt:Oi(o)))}function q1(t,e,n,r){let i=ua(e)??r,s=vs(t,i),o=s.resolve?s.resolve(e,n):Bt(i,()=>s(e,n));return hr(o)}function Wp(t){return _t(e=>{let n=t(e);return n?Re(n).pipe(ne(()=>e)):Q(e)})}var ob=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[ca]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>P(G1),providedIn:"root"})}}return t})(),G1=(()=>{class t extends ob{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(J(SD))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Dg=new B("",{providedIn:"root",factory:()=>({})}),W1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Hw({type:t,selectors:[["ng-component"]],standalone:!0,features:[UT],decls:1,vars:0,template:function(r,i){r&1&&Tp(0,"router-outlet")},dependencies:[t1],encapsulation:2})}}return t})();function bg(t){let e=t.children&&t.children.map(bg),n=e?Ee(U({},t),{children:e}):U({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=W1),n}var Cg=new B(""),K1=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(bp)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=hr(n.loadComponent()).pipe(ne(ab),xe(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Zn(()=>{this.componentLoaders.delete(n)})),i=new Ni(r,()=>new nt).pipe(Ri());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Q1(r,this.compiler,n,this.onLoadEndListener).pipe(Zn(()=>{this.childrenLoaders.delete(r)})),o=new Ni(s,()=>new nt).pipe(Ri());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Q1(t,e,n,r){return hr(t.loadChildren()).pipe(ne(ab),Ve(i=>i instanceof So||Array.isArray(i)?Q(i):Re(e.compileModuleAsync(i))),ne(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Cg,[],{optional:!0,self:!0}).flat()),{routes:o.map(bg),injector:s}}))}function Y1(t){return t&&typeof t=="object"&&"default"in t}function ab(t){return Y1(t)?t.default:t}var Sg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>P(J1),providedIn:"root"})}}return t})(),J1=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Z1=new B("");var X1=new B(""),eL=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nt,this.transitionAbortSubject=new nt,this.configLoader=P(K1),this.environmentInjector=P(ht),this.urlSerializer=P(wg),this.rootContexts=P(wl),this.location=P(Vo),this.inputBindingEnabled=P(Tg,{optional:!0})!==null,this.titleStrategy=P(ob),this.options=P(Dg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(Sg),this.createViewTransition=P(Z1,{optional:!0}),this.navigationErrorHandler=P(X1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let n=i=>this.events.next(new ig(i)),r=i=>this.events.next(new sg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ee(U(U({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new He({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Yo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(s=>s.id!==0),ne(s=>Ee(U({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),_t(s=>{let o=!1,a=!1;return Q(s).pipe(_t(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Et.SupersededByNewNavigation),yt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Yr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Xp.IgnoredSameUrlNavigation)),u.resolve(!1),yt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Q(u).pipe(_t(p=>{let m=this.transitions?.getValue();return this.events.next(new ta(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?yt:Promise.resolve(p)}),B1(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ee(U({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new pl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:C,extras:N}=u,R=new ta(p,this.urlSerializer.serialize(m),y,C);this.events.next(R);let O=QD(this.rootComponentType).snapshot;return this.currentTransition=s=Ee(U({},u),{targetSnapshot:O,urlAfterRedirects:m,extras:Ee(U({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Q(s)}else{let p="";return this.events.next(new Yr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Xp.IgnoredByUrlHandlingStrategy)),u.resolve(!1),yt}}),xe(u=>{let l=new eg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ne(u=>(this.currentTransition=s=Ee(U({},u),{guards:a1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),v1(this.environmentInjector,u=>this.events.next(u)),xe(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw _l(this.urlSerializer,u.guardsResult);let l=new tg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),vt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Et.GuardRejected),!1)),Wp(u=>{if(u.guards.canActivateChecks.length)return Q(u).pipe(xe(l=>{let h=new ng(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),_t(l=>{let h=!1;return Q(l).pipe($1(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Et.NoDataFromResolver)}}))}),xe(l=>{let h=new rg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Wp(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(xe(m=>{h.component=m}),ne(()=>{})));for(let m of h.children)p.push(...l(m));return p};return zc(l(u.targetSnapshot.root)).pipe(Jn(null),In(1))}),Wp(()=>this.afterPreactivation()),_t(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Re(h).pipe(ne(()=>s)):Q(s)}),ne(u=>{let l=n1(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Ee(U({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),xe(()=>{this.events.next(new ra)}),o1(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),In(1),xe({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Bh(this.transitionAbortSubject.pipe(xe(u=>{throw u}))),Zn(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Et.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qn(u=>{if(a=!0,eb(u))this.events.next(new An(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),s1(u)?this.events.next(new gs(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new na(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=Bt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof sa){let{message:p,cancellationCode:m}=_l(this.urlSerializer,h);this.events.next(new An(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new gs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return yt}))}))}cancelNavigationTransition(n,r,i){let s=new An(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function tL(t){return t!==Yo}var nL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>P(rL),providedIn:"root"})}}return t})(),Ig=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},rL=(()=>{class t extends Ig{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ip(t)))(i||t)}})()}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cb=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>P(iL),providedIn:"root"})}}return t})(),iL=(()=>{class t extends cb{constructor(){super(...arguments),this.location=P(Vo),this.urlSerializer=P(wg),this.options=P(Dg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(Sg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=QD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ta)this.stateMemento=this.createStateMemento();else if(n instanceof Yr)this.rawUrlTree=r.initialUrl;else if(n instanceof pl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ra?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof An&&(n.code===Et.GuardRejected||n.code===Et.NoDataFromResolver)?this.restoreHistory(r):n instanceof na?this.restoreHistory(r,!0):n instanceof Qr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Rn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=U(U({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=U(U({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ip(t)))(i||t)}})()}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ko=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ko||{});function sL(t,e){t.events.pipe(vt(n=>n instanceof Qr||n instanceof An||n instanceof na||n instanceof Yr),ne(n=>n instanceof Qr||n instanceof Yr?Ko.COMPLETE:(n instanceof An?n.code===Et.Redirect||n.code===Et.SupersededByNewNavigation:!1)?Ko.REDIRECTING:Ko.FAILED),vt(n=>n!==Ko.REDIRECTING),In(1)).subscribe(()=>{e()})}function oL(t){throw t}var aL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ub=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(Wu),this.stateManager=P(cb),this.options=P(Dg,{optional:!0})||{},this.pendingTasks=P(bn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(eL),this.urlSerializer=P(wg),this.location=P(Vo),this.urlHandlingStrategy=P(Sg),this._events=new nt,this.errorHandler=this.options.errorHandler||oL,this.navigated=!1,this.routeReuseStrategy=P(nL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Cg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Tg,{optional:!0}),this.eventsSubscription=new Se,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof An&&r.code!==Et.Redirect&&r.code!==Et.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qr)this.navigated=!0;else if(r instanceof gs){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tL(i.source)},o);this.scheduleNavigation(a,Yo,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}lL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=U({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(bg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=qD(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return GD(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Xo(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Yo,null,r)}navigate(n,r={skipLocationChange:!1}){return uL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=U({},aL):r===!1?i=U({},cL):i=r,Xo(n))return AD(this.currentUrlTree,n,i);let s=this.parseUrl(n);return AD(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return sL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function uL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function lL(t){return!(t instanceof ra)&&!(t instanceof gs)}var dL=new B("");function OW(t,...e){return Rt([{provide:Cg,multi:!0,useValue:t},[],{provide:ms,useFactory:hL,deps:[ub]},{provide:Ku,multi:!0,useFactory:fL},e.map(n=>n.\u0275providers)])}function hL(t){return t.routerState.root}function fL(){let t=P(It);return e=>{let n=t.get(cr);if(e!==n.components[0])return;let r=t.get(ub),i=t.get(pL);t.get(gL)===1&&r.initialNavigation(),t.get(mL,null,re.Optional)?.setUpPreloading(),t.get(dL,null,re.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pL=new B("",{factory:()=>new nt}),gL=new B("",{providedIn:"root",factory:()=>1});var mL=new B("");var db=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Rg;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Rg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vL=function(t){let e=db(t);return hb.encodeByteArray(e,!0)},da=function(t){return vL(t).replace(/\./g,"")},Mg=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _L(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var IL=()=>_L().__FIREBASE_DEFAULTS__,wL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Mg(t[1]);return e&&JSON.parse(e)},Dl=()=>{try{return IL()||wL()||EL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xg=t=>{var e,n;return(n=(e=Dl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fb=t=>{let e=xg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pg=()=>{var t;return(t=Dl())===null||t===void 0?void 0:t.config},Og=t=>{var e;return(e=Dl())===null||e===void 0?void 0:e[`_${t}`]};var Tl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function pb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[da(JSON.stringify(n)),da(JSON.stringify(o)),""].join(".")}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function TL(){var t;let e=(t=Dl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _b(){let t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ib(){return!TL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kg(){try{return typeof indexedDB=="object"}catch{return!1}}function wb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var DL="FirebaseError",Tt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nn.prototype.create)}},Nn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Tt(i,a,r)}};function bL(t,e){return t.replace(CL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var CL=/\{\$([^}]+)}/g;function Eb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(lb(s)&&lb(o)){if(!Jr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function lb(t){return t!==null&&typeof t=="object"}function ha(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _s(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Is(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Tb(t,e){let n=new Ng(t,e);return n.subscribe.bind(n)}var Ng=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ag),i.error===void 0&&(i.error=Ag),i.complete===void 0&&(i.complete=Ag);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function SL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ag(){}var FW=4*60*60*1e3;function Ue(t){return t&&t._delegate?t._delegate:t}var Pt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zr="[DEFAULT]";var Lg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Tl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RL(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AL(t){return t===Zr?void 0:t}function RL(t){return t.instantiationMode==="EAGER"}var bl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Lg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var NL=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),ML={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},xL=ce.INFO,PL={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},OL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=PL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fr=class{constructor(e){this.name=e,this._logLevel=xL,this._logHandler=OL,this._userLogHandler=null,NL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ML[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var kL=(t,e)=>e.some(n=>t instanceof n),Db,bb;function LL(){return Db||(Db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FL(){return bb||(bb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Cb=new WeakMap,Vg=new WeakMap,Sb=new WeakMap,Fg=new WeakMap,jg=new WeakMap;function VL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(sn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Cb.set(n,t)}).catch(()=>{}),jg.set(e,t),e}function UL(t){if(Vg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Vg.set(t,e)}var Ug={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Sb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ab(t){Ug=t(Ug)}function jL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Cl(this),e,...n);return Sb.set(r,e.sort?e.sort():[e]),sn(r)}:FL().includes(t)?function(...e){return t.apply(Cl(this),e),sn(Cb.get(this))}:function(...e){return sn(t.apply(Cl(this),e))}}function BL(t){return typeof t=="function"?jL(t):(t instanceof IDBTransaction&&UL(t),kL(t,LL())?new Proxy(t,Ug):t)}function sn(t){if(t instanceof IDBRequest)return VL(t);if(Fg.has(t))return Fg.get(t);let e=BL(t);return e!==t&&(Fg.set(t,e),jg.set(e,t)),e}var Cl=t=>jg.get(t);function Nb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=sn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(sn(o.result),u.oldVersion,u.newVersion,sn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var $L=["get","getKey","getAll","getAllKeys","count"],zL=["put","add","delete","clear"],Bg=new Map;function Rb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bg.get(e))return Bg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=zL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$L.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Bg.set(e,s),s}Ab(t=>Ee(U({},t),{get:(e,n,r)=>Rb(e,n)||t.get(e,n,r),has:(e,n)=>!!Rb(e,n)||t.has(e,n)}));var zg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function HL(t){let e=t.getComponent();return e?.type==="VERSION"}var Hg="@firebase/app",Mb="0.10.13";var Mn=new fr("@firebase/app"),qL="@firebase/app-compat",GL="@firebase/analytics-compat",WL="@firebase/analytics",KL="@firebase/app-check-compat",QL="@firebase/app-check",YL="@firebase/auth",JL="@firebase/auth-compat",ZL="@firebase/database",XL="@firebase/data-connect",eF="@firebase/database-compat",tF="@firebase/functions",nF="@firebase/functions-compat",rF="@firebase/installations",iF="@firebase/installations-compat",sF="@firebase/messaging",oF="@firebase/messaging-compat",aF="@firebase/performance",cF="@firebase/performance-compat",uF="@firebase/remote-config",lF="@firebase/remote-config-compat",dF="@firebase/storage",hF="@firebase/storage-compat",fF="@firebase/firestore",pF="@firebase/vertexai-preview",gF="@firebase/firestore-compat",mF="firebase",yF="10.14.1";var qg="[DEFAULT]",vF={[Hg]:"fire-core",[qL]:"fire-core-compat",[WL]:"fire-analytics",[GL]:"fire-analytics-compat",[QL]:"fire-app-check",[KL]:"fire-app-check-compat",[YL]:"fire-auth",[JL]:"fire-auth-compat",[ZL]:"fire-rtdb",[XL]:"fire-data-connect",[eF]:"fire-rtdb-compat",[tF]:"fire-fn",[nF]:"fire-fn-compat",[rF]:"fire-iid",[iF]:"fire-iid-compat",[sF]:"fire-fcm",[oF]:"fire-fcm-compat",[aF]:"fire-perf",[cF]:"fire-perf-compat",[uF]:"fire-rc",[lF]:"fire-rc-compat",[dF]:"fire-gcs",[hF]:"fire-gcs-compat",[fF]:"fire-fst",[gF]:"fire-fst-compat",[pF]:"fire-vertex","fire-js":"fire-js",[mF]:"fire-js-all"};var fa=new Map,_F=new Map,Gg=new Map;function xb(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gr(t){let e=t.name;if(Gg.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;Gg.set(e,t);for(let n of fa.values())xb(n,t);for(let n of _F.values())xb(n,t);return!0}function ga(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ht(t){return t.settings!==void 0}var IF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new Nn("app","Firebase",IF);var Wg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}};var mr=yF;function Yg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:qg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pr.create("bad-app-name",{appName:String(i)});if(n||(n=Pg()),!n)throw pr.create("no-options");let s=fa.get(i);if(s){if(Jr(n,s.options)&&Jr(r,s.config))return s;throw pr.create("duplicate-app",{appName:i})}let o=new bl(i);for(let u of Gg.values())o.addComponent(u);let a=new Wg(n,r,o);return fa.set(i,a),a}function ws(t=qg){let e=fa.get(t);if(!e&&t===qg&&Pg())return Yg();if(!e)throw pr.create("no-app",{appName:t});return e}function Sl(){return Array.from(fa.values())}function je(t,e,n){var r;let i=(r=vF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(a.join(" "));return}gr(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var wF="firebase-heartbeat-database",EF=1,pa="firebase-heartbeat-store",$g=null;function Lb(){return $g||($g=Nb(wF,EF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),$g}function TF(t){return w(this,null,function*(){try{let n=(yield Lb()).transaction(pa),r=yield n.objectStore(pa).get(Fb(t));return yield n.done,r}catch(e){if(e instanceof Tt)Mn.warn(e.message);else{let n=pr.create("idb-get",{originalErrorMessage:e?.message});Mn.warn(n.message)}}})}function Pb(t,e){return w(this,null,function*(){try{let r=(yield Lb()).transaction(pa,"readwrite");yield r.objectStore(pa).put(e,Fb(t)),yield r.done}catch(n){if(n instanceof Tt)Mn.warn(n.message);else{let r=pr.create("idb-set",{originalErrorMessage:n?.message});Mn.warn(r.message)}}})}function Fb(t){return`${t.name}!${t.options.appId}`}var DF=1024,bF=30*24*60*60*1e3,Kg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Qg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ob();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=bF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Ob(),{heartbeatsToSend:r,unsentEntries:i}=CF(this._heartbeatsCache.heartbeats),s=da(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mn.warn(n),""}})}};function Ob(){return new Date().toISOString().substring(0,10)}function CF(t,e=DF){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),kb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Qg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return kg()?wb().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield TF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Pb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Pb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function kb(t){return da(JSON.stringify({version:2,heartbeats:t})).length}function SF(t){gr(new Pt("platform-logger",e=>new zg(e),"PRIVATE")),gr(new Pt("heartbeat",e=>new Kg(e),"PRIVATE")),je(Hg,Mb,t),je(Hg,Mb,"esm2017"),je("fire-js","")}SF("");var AF="firebase",RF="10.14.1";je(AF,RF,"app");var ei=new sr("ANGULARFIRE2_VERSION");function Rl(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ma=(t,e)=>{let n=e?[e]:Sl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ts=class{constructor(){return ma(NF)}},NF="app-check";function Es(){}var Al=class{zone;delegate;constructor(e,n=Ph){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Jg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),n.pipe(xe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ds=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Al(Zone.current)),this.insideAngular=n.run(()=>new Al(Zone.current,xh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(J(me))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Nl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function MF(t){return Nl().ngZone.runOutsideAngular(()=>t())}function Xr(t){return Nl().ngZone.run(()=>t())}function xF(t){return PF(Nl())(t)}function PF(t){return function(n){return n=n.lift(new Jg(t.ngZone)),n.pipe(Kn(t.outsideAngular),Wn(t.insideAngular))}}var OF=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Xr(()=>t.apply(void 0,r))},Ne=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Xr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es))),r[s]=OF(r[s],n));let i=MF(()=>t.apply(this,r));if(!e)if(i instanceof ie){let s=Nl();return i.pipe(Kn(s.outsideAngular),Wn(s.insideAngular))}else return Xr(()=>i);return i instanceof ie?i.pipe(xF):i instanceof Promise?Xr(()=>new Promise((s,o)=>i.then(a=>Xr(()=>s(a)),a=>Xr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Xr(()=>i)};var xn=class{constructor(e){return e}},ti=class{constructor(){return Sl()}};function kF(t){return t&&t.length===1?t[0]:new xn(ws())}var Zg=new B("angularfire2._apps"),LF={provide:xn,useFactory:kF,deps:[[new at,Zg]]},FF={provide:ti,deps:[[new at,Zg]]};function VF(t){return(e,n)=>{let r=n.get(nn);je("angularfire",ei.full,"core"),je("angularfire",ei.full,"app"),je("angular",jT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new xn(i)}}function T3(t,...e){return Rt([LF,FF,{provide:Zg,useFactory:VF(t),multi:!0,deps:[me,It,Ds,...e]}])}var D3=Ne(Yg,!0);function eC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tC=eC,nC=new Nn("auth","Firebase",eC());var Ll=new fr("@firebase/auth");function UF(t,...e){Ll.logLevel<=ce.WARN&&Ll.warn(`Auth (${mr}): ${t}`,...e)}function xl(t,...e){Ll.logLevel<=ce.ERROR&&Ll.error(`Auth (${mr}): ${t}`,...e)}function an(t,...e){throw wm(t,...e)}function ni(t,...e){return wm(t,...e)}function rC(t,e,n){let r=Object.assign(Object.assign({},tC()),{[e]:n});return new Nn("auth","Firebase",r).create(e,{appName:t.name})}function kn(t){return rC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nC.create(t,...e)}function W(t,e,...n){if(!t)throw wm(e,...n)}function Pn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw xl(e),new Error(e)}function vr(t,e){t||Pn(e)}function nm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jF(){return Vb()==="http:"||Vb()==="https:"}function Vb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function BF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jF()||yb()||"connection"in navigator)?navigator.onLine:!0}function $F(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ri=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=gb()||vb()}get(){return BF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Em(t,e){vr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Fl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HF=new ri(3e4,6e4);function _r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ir(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return iC(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ha(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return mb()||(y.referrerPolicy="no-referrer"),Fl.fetch()(sC(t,t.config.apiHost,n,p),y)}))})}function iC(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},zF),e);try{let i=new rm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ml(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ml(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rC(t,h,l);an(t,h)}}catch(i){if(i instanceof Tt)throw i;an(t,"network-request-failed",{message:String(i)})}})}function Da(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Ir(t,e,n,r,i);return"mfaPendingCredential"in l&&an(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function sC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Em(t.config,i):`${t.config.apiScheme}://${i}`}function qF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var rm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),HF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ml(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ni(t,e,r);return i.customData._tokenResponse=n,i}function Ub(t){return t!==void 0&&t.enterprise!==void 0}var im=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function GF(t,e){return w(this,null,function*(){return Ir(t,"GET","/v2/recaptchaConfig",_r(t,e))})}function WF(t,e){return w(this,null,function*(){return Ir(t,"POST","/v1/accounts:delete",e)})}function oC(t,e){return w(this,null,function*(){return Ir(t,"POST","/v1/accounts:lookup",e)})}function ya(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Tm(t,e=!1){return w(this,null,function*(){let n=Ue(t),r=yield n.getIdToken(e),i=Dm(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ya(Xg(i.auth_time)),issuedAtTime:ya(Xg(i.iat)),expirationTime:ya(Xg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Xg(t){return Number(t)*1e3}function Dm(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mg(n);return i?JSON.parse(i):(xl("Failed to decode base64 JWT payload"),null)}catch(i){return xl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jb(t){let e=Dm(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function _a(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Tt&&KF(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function KF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var sm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ia=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ya(this.lastLoginAt),this.creationTime=ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Vl(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield _a(t,oC(n,{idToken:r}));W(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aC(s.providerUserInfo):[],a=QF(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ia(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function bm(t){return w(this,null,function*(){let e=Ue(t);yield Vl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function QF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aC(t){return t.map(e=>{var{providerId:n}=e,r=Oh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function YF(t,e){return w(this,null,function*(){let n=yield iC(t,{},()=>w(this,null,function*(){let r=ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=sC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Fl.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function JF(t,e){return w(this,null,function*(){return Ir(t,"POST","/v2/accounts:revokeToken",_r(t,e))})}var va=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=jb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield YF(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Pn("not implemented")}};function yr(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var bs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ia(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield _a(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Tm(this,e)}reload(){return bm(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Vl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Ht(this.auth.app))return Promise.reject(kn(this.auth));let e=yield this.getIdToken();return yield _a(this,WF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,V=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:L,emailVerified:G,isAnonymous:he,providerData:q,stsTokenManager:E}=n;W(L&&E,e,"internal-error");let v=va.fromJSON(this.name,E);W(typeof L=="string",e,"internal-error"),yr(p,e.name),yr(m,e.name),W(typeof G=="boolean",e,"internal-error"),W(typeof he=="boolean",e,"internal-error"),yr(y,e.name),yr(C,e.name),yr(N,e.name),yr(R,e.name),yr(O,e.name),yr(V,e.name);let _=new t({uid:L,auth:e,email:m,emailVerified:G,displayName:p,isAnonymous:he,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:V});return q&&Array.isArray(q)&&(_.providerData=q.map(T=>Object.assign({},T))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new va;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Vl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?aC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new va;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ia(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var Bb=new Map;function On(t){vr(t instanceof Function,"Expected a class definition");let e=Bb.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bb.set(t,e),e)}var ZF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),om=ZF;function Pl(t,e,n){return`firebase:${t}:${e}:${n}`}var Ul=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Pl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Pl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?bs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(On(om),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||On(om),o=Pl(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=bs._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function $b(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fC(e))return"Blackberry";if(pC(e))return"Webos";if(uC(e))return"Safari";if((e.includes("chrome/")||lC(e))&&!e.includes("edge/"))return"Chrome";if(hC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function cC(t=Be()){return/firefox\//i.test(t)}function uC(t=Be()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lC(t=Be()){return/crios\//i.test(t)}function dC(t=Be()){return/iemobile/i.test(t)}function hC(t=Be()){return/android/i.test(t)}function fC(t=Be()){return/blackberry/i.test(t)}function pC(t=Be()){return/webos/i.test(t)}function Cm(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function XF(t=Be()){var e;return Cm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eV(){return _b()&&document.documentMode===10}function gC(t=Be()){return Cm(t)||hC(t)||pC(t)||fC(t)||/windows phone/i.test(t)||dC(t)}function mC(t,e=[]){let n;switch(t){case"Browser":n=$b(Be());break;case"Worker":n=`${$b(Be())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mr}/${r}`}var am=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function tV(n){return w(this,arguments,function*(t,e={}){return Ir(t,"GET","/v2/passwordPolicy",_r(t,e))})}var nV=6,cm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var um=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jl(this),this.idTokenSubscription=new jl(this),this.beforeStateQueue=new am(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ul.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield oC(this,{idToken:e}),r=yield bs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(Ht(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Vl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$F()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Ht(this.app))return Promise.reject(kn(this));let n=e?Ue(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Ht(this.app)?Promise.reject(kn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ht(this.app)?Promise.reject(kn(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(On(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield tV(this),n=new cm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield JF(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&On(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield Ul.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&UF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function si(t){return Ue(t)}var jl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tb(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wl={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rV(t){Wl=t}function yC(t){return Wl.loadJS(t)}function iV(){return Wl.recaptchaEnterpriseScript}function sV(){return Wl.gapiScript}function vC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var oV="recaptcha-enterprise",aV="NO_RECAPTCHA",lm=class{constructor(e){this.type=oV,this.auth=si(e)}verify(e="verify",n=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){GF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new im(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;Ub(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(aV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ub(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iV();u.length!==0&&(u+=a),yC(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function zb(t,e,n,r=!1){return w(this,null,function*(){let i=new lm(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function dm(t,e,n,r){return w(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield zb(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield zb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Sm(t,e){let n=ga(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Jr(s,e??{}))return i;an(i,"already-initialized")}return n.initialize({options:e})}function cV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(On);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Am(t,e,n){let r=si(t);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=_C(e),{host:o,port:a}=uV(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||lV()}function _C(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uV(t){let e=_C(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Hb(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Hb(o)}}}function Hb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function lV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var wa=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}};function dV(t,e){return w(this,null,function*(){return Ir(t,"POST","/v1/accounts:signUp",e)})}function hV(t,e){return w(this,null,function*(){return Da(t,"POST","/v1/accounts:signInWithPassword",_r(t,e))})}function fV(t,e){return w(this,null,function*(){return Da(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))})}function pV(t,e){return w(this,null,function*(){return Da(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))})}var Ea=class t extends wa{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",hV);case"emailLink":return fV(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}})}_linkToIdToken(e,n){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,r,"signUpPassword",dV);case"emailLink":return pV(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function em(t,e){return w(this,null,function*(){return Da(t,"POST","/v1/accounts:signInWithIdp",_r(t,e))})}function gV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mV(t){let e=_s(Is(t)).link,n=e?_s(Is(e)).deep_link_id:null,r=_s(Is(t)).deep_link_id;return(r?_s(Is(r)).link:null)||r||n||e||t}var Bl=class t{constructor(e){var n,r,i,s,o,a;let u=_s(Is(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=gV((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=mV(e);try{return new t(n)}catch{return null}}};var IC=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ea._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Bl.parseLink(r);return W(i,"argument-error"),Ea._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),$l=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var hm=class extends $l{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function yV(t,e){return w(this,null,function*(){return Da(t,"POST","/v1/accounts:signUp",_r(t,e))})}var Cs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield bs._fromIdTokenResponse(e,r,i),o=qb(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=qb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function qb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var fm=class t extends Tt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function wC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fm._fromErrorAndOperation(t,s,e,r):s})}function vV(t,e,n=!1){return w(this,null,function*(){let r=yield _a(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Cs._forOperation(t,"link",r)})}function _V(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(Ht(r.app))return Promise.reject(kn(r));let i="reauthenticate";try{let s=yield _a(t,wC(r,i,e,t),n);W(s.idToken,r,"internal-error");let o=Dm(s.idToken);W(o,r,"internal-error");let{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),Cs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&an(r,"user-mismatch"),s}})}function EC(t,e,n=!1){return w(this,null,function*(){if(Ht(t.app))return Promise.reject(kn(t));let r="signIn",i=yield wC(t,r,e),s=yield Cs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Rm(t,e){return w(this,null,function*(){return EC(si(t),e)})}function TC(t){return w(this,null,function*(){let e=si(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Nm(t,e,n){return w(this,null,function*(){if(Ht(t.app))return Promise.reject(kn(t));let r=si(t),o=yield dm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yV).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&TC(t),u}),a=yield Cs._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Mm(t,e,n){return Ht(t.app)?Promise.reject(kn(t)):Rm(Ue(t),IC.credential(e,n)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&TC(t),r}))}function xm(t,e,n,r){return Ue(t).onIdTokenChanged(e,n,r)}function Pm(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function Om(t){return Ue(t).signOut()}var zl="__sak";var Hl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zl,"1"),this.storage.removeItem(zl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var IV=1e3,wV=10,EV=(()=>{class t extends Hl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);eV()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,wV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},IV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield qn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield qn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield qn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),DC=EV;var TV=(()=>{class t extends Hl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),km=TV;function DV(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var bV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield DV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function bC(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var pm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=bC("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function on(){return window}function CV(t){on().location.href=t}function CC(){return typeof on().WorkerGlobalScope<"u"&&typeof on().importScripts=="function"}function SV(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function AV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RV(){return CC()?self:null}var SC="firebaseLocalStorageDb",NV=1,ql="firebaseLocalStorage",AC="fbase_key",ii=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Kl(t,e){return t.transaction([ql],e?"readwrite":"readonly").objectStore(ql)}function MV(){let t=indexedDB.deleteDatabase(SC);return new ii(t).toPromise()}function gm(){let t=indexedDB.open(SC,NV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(ql,{keyPath:AC})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(ql)?e(r):(r.close(),yield MV(),e(yield gm()))}))})}function Gb(t,e,n){return w(this,null,function*(){let r=Kl(t,!0).put({[AC]:e,value:n});return new ii(r).toPromise()})}function xV(t,e){return w(this,null,function*(){let n=Kl(t,!1).get(e),r=yield new ii(n).toPromise();return r===void 0?null:r.value})}function Wb(t,e){let n=Kl(t,!0).delete(e);return new ii(n).toPromise()}var PV=800,OV=3,kV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield gm(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>OV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return CC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=bV._getInstance(RV()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield SV(),!this.activeServiceWorker)return;this.sender=new pm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||AV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield gm();return yield Gb(n,zl,"1"),yield Wb(n,zl),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>Gb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>xV(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>Wb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=Kl(s,!1).getAll();return new ii(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),PV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),RC=kV;var x3=vC("rcb"),P3=new ri(3e4,6e4);function LV(t,e){return e?On(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ta=class extends wa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return em(e,this._buildIdpRequest())}_linkToIdToken(e,n){return em(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return em(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function FV(t){return EC(t.auth,new Ta(t),t.bypassAuthState)}function VV(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),_V(n,new Ta(t),t.bypassAuthState)}function UV(t){return w(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),vV(n,new Ta(t),t.bypassAuthState)})}var mm=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FV;case"linkViaPopup":case"linkViaRedirect":return UV;case"reauthViaPopup":case"reauthViaRedirect":return VV;default:an(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var O3=new ri(2e3,1e4);var jV="pendingRedirect",Ol=new Map,ym=class t extends mm{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Ol.get(this.auth._key());if(!e){try{let r=(yield BV(this.resolver,this.auth))?yield qn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ol.set(this.auth._key(),e)}return this.bypassAuthState||Ol.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return qn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,qn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function BV(t,e){return w(this,null,function*(){let n=HV(e),r=zV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function $V(t,e){Ol.set(t._key(),e)}function zV(t){return On(t._redirectPersistence)}function HV(t){return Pl(jV,t.config.apiKey,t.name)}function qV(t,e,n=!1){return w(this,null,function*(){if(Ht(t.app))return Promise.reject(kn(t));let r=si(t),i=LV(r,e),o=yield new ym(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var GV=10*60*1e3,vm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kb(e))}saveEventToCache(e){this.cachedEventUids.add(Kb(e)),this.lastProcessedEventTime=Date.now()}};function Kb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function WV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NC(t);default:return!1}}function KV(n){return w(this,arguments,function*(t,e={}){return Ir(t,"GET","/v1/projects",e)})}var QV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YV=/^https?/;function JV(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield KV(t);for(let n of e)try{if(ZV(n))return}catch{}an(t,"unauthorized-domain")})}function ZV(t){let e=nm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YV.test(n))return!1;if(QV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var XV=new ri(3e4,6e4);function Qb(){let t=on().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eU(t){return new Promise((e,n)=>{var r,i,s;function o(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),n(ni(t,"network-request-failed"))},timeout:XV.get()})}if(!((i=(r=on().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=on().gapi)===null||s===void 0)&&s.load)o();else{let a=vC("iframefcb");return on()[a]=()=>{gapi.load?o():n(ni(t,"network-request-failed"))},yC(`${sV()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw kl=null,e})}var kl=null;function tU(t){return kl=kl||eU(t),kl}var nU=new ri(5e3,15e3),rU="__/auth/iframe",iU="emulator/auth/iframe",sU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aU(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Em(e,iU):`https://${t.config.authDomain}/${rU}`,r={apiKey:e.apiKey,appName:t.name,v:mr},i=oU.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ha(r).slice(1)}`}function cU(t){return w(this,null,function*(){let e=yield tU(t),n=on().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:aU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sU,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ni(t,"network-request-failed"),a=on().setTimeout(()=>{s(o)},nU.get());function u(){on().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var uU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lU=500,dU=600,hU="_blank",fU="http://localhost",Gl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function pU(t,e,n,r=lU,i=dU){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},uU),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Be().toLowerCase();n&&(a=lC(l)?hU:n),cC(l)&&(e=e||fU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(XF(l)&&a!=="_self")return gU(e||"",a),new Gl(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new Gl(p)}function gU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var mU="__/auth/handler",yU="emulator/auth/handler",vU=encodeURIComponent("fac");function Yb(t,e,n,r,i,s){return w(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mr,eventId:i};if(e instanceof $l){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Eb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof hm){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${vU}=${encodeURIComponent(u)}`:"";return`${_U(t)}?${ha(a).slice(1)}${l}`})}function _U({config:t}){return t.emulator?Em(t,yU):`https://${t.authDomain}/${mU}`}var tm="webStorageSupport",_m=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=km,this._completeRedirectFn=qV,this._overrideRedirectResult=$V}_openPopup(e,n,r,i){return w(this,null,function*(){var s;vr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Yb(e,n,r,nm(),i);return pU(e,o,bC())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield Yb(e,n,r,nm(),i);return CV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(vr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield cU(e),r=new vm(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[tm];o!==void 0&&n(!!o),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gC()||uC()||Cm()}},MC=_m;var Jb="@firebase/auth",Zb="1.7.9";var Im=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function IU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wU(t){gr(new Pt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mC(t)},l=new um(r,i,s,u);return cV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gr(new Pt("auth-internal",e=>{let n=si(e.getProvider("auth").getImmediate());return(r=>new Im(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),je(Jb,Zb,IU(t)),je(Jb,Zb,"esm2017")}var EU=5*60,TU=Og("authIdTokenMaxAge")||EU,Xb=null,DU=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TU)return;let i=n?.token;Xb!==i&&(Xb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Lm(t=ws()){let e=ga(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Sm(t,{popupRedirectResolver:MC,persistence:[RC,DC,km]}),r=Og("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=DU(s.toString());Pm(n,o,()=>o(n.currentUser)),xm(n,a=>o(a))}}let i=xg("auth");return i&&Am(n,`http://${i}`),n}function bU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ni("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",bU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wU("Browser");var xC="auth",ba=class{constructor(e){return e}},Ca=class{constructor(){return ma(xC)}};var Fm=new B("angularfire2.auth-instances");function gj(t,e){let n=Rl(xC,t,e);return n&&new ba(n)}function mj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ba(r)}}var yj={provide:Ca,deps:[[new at,Fm]]},vj={provide:ba,useFactory:gj,deps:[[new at,Fm],xn]};function y6(t,...e){return je("angularfire",ei.full,"auth"),Rt([vj,yj,{provide:Fm,useFactory:mj(t),multi:!0,deps:[me,It,Ds,ti,[new at,Ts],...e]}])}var v6=Ne(Nm,!0);var _6=Ne(Lm,!0);var I6=Ne(Mm,!0);var w6=Ne(Om,!0);var PC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},OC={};var wr,Vm;(function(){var t;function e(E,v){function _(){}_.prototype=v.prototype,E.D=v.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(T,D,S){for(var I=Array(arguments.length-2),gn=2;gn<arguments.length;gn++)I[gn-2]=arguments[gn];return v.prototype[D].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,_){_||(_=0);var T=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)T[D]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(D=0;16>D;++D)T[D]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=E.g[0],_=E.g[1],D=E.g[2];var S=E.g[3],I=v+(S^_&(D^S))+T[0]+3614090360&4294967295;v=_+(I<<7&4294967295|I>>>25),I=S+(D^v&(_^D))+T[1]+3905402710&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(_^S&(v^_))+T[2]+606105819&4294967295,D=S+(I<<17&4294967295|I>>>15),I=_+(v^D&(S^v))+T[3]+3250441966&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(S^_&(D^S))+T[4]+4118548399&4294967295,v=_+(I<<7&4294967295|I>>>25),I=S+(D^v&(_^D))+T[5]+1200080426&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(_^S&(v^_))+T[6]+2821735955&4294967295,D=S+(I<<17&4294967295|I>>>15),I=_+(v^D&(S^v))+T[7]+4249261313&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(S^_&(D^S))+T[8]+1770035416&4294967295,v=_+(I<<7&4294967295|I>>>25),I=S+(D^v&(_^D))+T[9]+2336552879&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(_^S&(v^_))+T[10]+4294925233&4294967295,D=S+(I<<17&4294967295|I>>>15),I=_+(v^D&(S^v))+T[11]+2304563134&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(S^_&(D^S))+T[12]+1804603682&4294967295,v=_+(I<<7&4294967295|I>>>25),I=S+(D^v&(_^D))+T[13]+4254626195&4294967295,S=v+(I<<12&4294967295|I>>>20),I=D+(_^S&(v^_))+T[14]+2792965006&4294967295,D=S+(I<<17&4294967295|I>>>15),I=_+(v^D&(S^v))+T[15]+1236535329&4294967295,_=D+(I<<22&4294967295|I>>>10),I=v+(D^S&(_^D))+T[1]+4129170786&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^D&(v^_))+T[6]+3225465664&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(S^v))+T[11]+643717713&4294967295,D=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(D^S))+T[0]+3921069994&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(_^D))+T[5]+3593408605&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^D&(v^_))+T[10]+38016083&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(S^v))+T[15]+3634488961&4294967295,D=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(D^S))+T[4]+3889429448&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(_^D))+T[9]+568446438&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^D&(v^_))+T[14]+3275163606&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(S^v))+T[3]+4107603335&4294967295,D=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(D^S))+T[8]+1163531501&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(D^S&(_^D))+T[13]+2850285829&4294967295,v=_+(I<<5&4294967295|I>>>27),I=S+(_^D&(v^_))+T[2]+4243563512&4294967295,S=v+(I<<9&4294967295|I>>>23),I=D+(v^_&(S^v))+T[7]+1735328473&4294967295,D=S+(I<<14&4294967295|I>>>18),I=_+(S^v&(D^S))+T[12]+2368359562&4294967295,_=D+(I<<20&4294967295|I>>>12),I=v+(_^D^S)+T[5]+4294588738&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^D)+T[8]+2272392833&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^_)+T[11]+1839030562&4294967295,D=S+(I<<16&4294967295|I>>>16),I=_+(D^S^v)+T[14]+4259657740&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(_^D^S)+T[1]+2763975236&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^D)+T[4]+1272893353&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^_)+T[7]+4139469664&4294967295,D=S+(I<<16&4294967295|I>>>16),I=_+(D^S^v)+T[10]+3200236656&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(_^D^S)+T[13]+681279174&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^D)+T[0]+3936430074&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^_)+T[3]+3572445317&4294967295,D=S+(I<<16&4294967295|I>>>16),I=_+(D^S^v)+T[6]+76029189&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(_^D^S)+T[9]+3654602809&4294967295,v=_+(I<<4&4294967295|I>>>28),I=S+(v^_^D)+T[12]+3873151461&4294967295,S=v+(I<<11&4294967295|I>>>21),I=D+(S^v^_)+T[15]+530742520&4294967295,D=S+(I<<16&4294967295|I>>>16),I=_+(D^S^v)+T[2]+3299628645&4294967295,_=D+(I<<23&4294967295|I>>>9),I=v+(D^(_|~S))+T[0]+4096336452&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~D))+T[7]+1126891415&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~_))+T[14]+2878612391&4294967295,D=S+(I<<15&4294967295|I>>>17),I=_+(S^(D|~v))+T[5]+4237533241&4294967295,_=D+(I<<21&4294967295|I>>>11),I=v+(D^(_|~S))+T[12]+1700485571&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~D))+T[3]+2399980690&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~_))+T[10]+4293915773&4294967295,D=S+(I<<15&4294967295|I>>>17),I=_+(S^(D|~v))+T[1]+2240044497&4294967295,_=D+(I<<21&4294967295|I>>>11),I=v+(D^(_|~S))+T[8]+1873313359&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~D))+T[15]+4264355552&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~_))+T[6]+2734768916&4294967295,D=S+(I<<15&4294967295|I>>>17),I=_+(S^(D|~v))+T[13]+1309151649&4294967295,_=D+(I<<21&4294967295|I>>>11),I=v+(D^(_|~S))+T[4]+4149444226&4294967295,v=_+(I<<6&4294967295|I>>>26),I=S+(_^(v|~D))+T[11]+3174756917&4294967295,S=v+(I<<10&4294967295|I>>>22),I=D+(v^(S|~_))+T[2]+718787259&4294967295,D=S+(I<<15&4294967295|I>>>17),I=_+(S^(D|~v))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var _=v-this.blockSize,T=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=_;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(T[D++]=E.charCodeAt(S++),D==this.blockSize){i(this,T),D=0;break}}else for(;S<v;)if(T[D++]=E[S++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var _=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=_&255,_/=256;for(this.u(E),E=Array(16),v=_=0;4>v;++v)for(var T=0;32>T;T+=8)E[_++]=this.g[v]>>>T&255;return E};function s(E,v){var _=a;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=v(E)}function o(E,v){this.h=v;for(var _=[],T=!0,D=E.length-1;0<=D;D--){var S=E[D]|0;T&&S==v||(_[D]=S,T=!1)}this.g=_}var a={};function u(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var v=[],_=1,T=0;E>=_;T++)v[T]=E/_|0,_*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return R(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),T=p,D=0;D<E.length;D+=8){var S=Math.min(8,E.length-D),I=parseInt(E.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),T=T.j(S).add(l(I))):(T=T.j(_),T=T.add(l(I)))}return T}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var E=0,v=1,_=0;_<this.g.length;_++){var T=this.i(_);E+=(0<=T?T:4294967296+T)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var v=l(Math.pow(E,6)),_=this,T="";;){var D=G(_,v).g;_=O(_,D.j(v));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=D,C(_))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=O(this,E),N(E)?-1:C(E)?0:1};function R(E){for(var v=E.g.length,_=[],T=0;T<v;T++)_[T]=~E.g[T];return new o(_,~E.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],T=0,D=0;D<=v;D++){var S=T+(this.i(D)&65535)+(E.i(D)&65535),I=(S>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);T=I>>>16,S&=65535,I&=65535,_[D]=I<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function O(E,v){return E.add(R(v))}t.j=function(E){if(C(this)||C(E))return p;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,_=[],T=0;T<2*v;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<E.g.length;D++){var S=this.i(T)>>>16,I=this.i(T)&65535,gn=E.i(D)>>>16,Ks=E.i(D)&65535;_[2*T+2*D]+=I*Ks,V(_,2*T+2*D),_[2*T+2*D+1]+=S*Ks,V(_,2*T+2*D+1),_[2*T+2*D+1]+=I*gn,V(_,2*T+2*D+1),_[2*T+2*D+2]+=S*gn,V(_,2*T+2*D+2)}for(T=0;T<v;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=v;T<2*v;T++)_[T]=0;return new o(_,0)};function V(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function L(E,v){this.g=E,this.h=v}function G(E,v){if(C(v))throw Error("division by zero");if(C(E))return new L(p,p);if(N(E))return v=G(R(E),v),new L(R(v.g),R(v.h));if(N(v))return v=G(E,R(v)),new L(R(v.g),v.h);if(30<E.g.length){if(N(E)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,T=v;0>=T.l(E);)_=he(_),T=he(T);var D=q(_,1),S=q(T,1);for(T=q(T,2),_=q(_,2);!C(T);){var I=S.add(T);0>=I.l(E)&&(D=D.add(_),S=I),T=q(T,1),_=q(_,1)}return v=O(E,D.j(v)),new L(D,v)}for(D=p;0<=E.l(v);){for(_=Math.max(1,Math.floor(E.m()/v.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(_),I=S.j(v);N(I)||0<I.l(E);)_-=T,S=l(_),I=S.j(v);C(S)&&(S=m),D=D.add(S),E=O(E,I)}return new L(D,E)}t.A=function(E){return G(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)&E.i(T);return new o(_,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)|E.i(T);return new o(_,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)^E.i(T);return new o(_,this.h^E.h)};function he(E){for(var v=E.g.length+1,_=[],T=0;T<v;T++)_[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(_,E.h)}function q(E,v){var _=v>>5;v%=32;for(var T=E.g.length-_,D=[],S=0;S<T;S++)D[S]=0<v?E.i(S+_)>>>v|E.i(S+_+1)<<32-v:E.i(S+_);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vm=OC.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,wr=OC.Integer=o}).apply(typeof PC<"u"?PC:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ln={};var Um,_j,Ss,jm,Sa,Yl,Bm,$m,zm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var k=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)k[Ie-2]=arguments[Ie];return d.prototype[b].apply(g,k)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let k=0;k<A;k++)c[b+k]=g[k]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(c){return/^[\s\xa0]*$/.test(c)}function L(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var he=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function q(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=zd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class gn{constructor(){this.h=this.g=null}add(d,f){let g=Ks.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ks=new O(()=>new x0,c=>c.reset());class x0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qs,Ys=!1,zd=new gn,Zv=()=>{let c=a.Promise.resolve(void 0);Qs=()=>{c.then(P0)}};var P0=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ks;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ys=!1};function Bn(){this.s=this.s,this.C=this.C}Bn.prototype.s=!1,Bn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var O0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Js(c,d){if(We.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(he){e:{try{G(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:k0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Js.aa.h.call(this)}}C(Js,We);var k0={2:"touch",3:"pen",4:"mouse"};Js.prototype.h=function(){Js.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Zs="closure_listenable_"+(1e6*Math.random()|0),L0=0;function F0(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++L0,this.da=this.fa=!1}function Za(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Xa(c){this.src=c,this.g={},this.h=0}Xa.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=qd(c,d,g,b);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new F0(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Hd(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Za(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function qd(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Gd="closure_lm_"+(1e6*Math.random()|0),Wd={};function Xv(c,d,f,g,b){if(g&&g.once)return t_(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Xv(c,d[A],f,g,b);return null}return f=Jd(f),c&&c[Zs]?c.K(d,f,l(g)?!!g.capture:!!g,b):e_(c,d,f,!1,g,b)}function e_(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var k=l(b)?!!b.capture:!!b,Ie=Qd(c);if(Ie||(c[Gd]=Ie=new Xa(c)),f=Ie.add(d,f,g,k,A),f.proxy)return f;if(g=V0(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)O0||(b=k),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(r_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function V0(){function c(f){return d.call(c.src,c.listener,f)}let d=U0;return c}function t_(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)t_(c,d[A],f,g,b);return null}return f=Jd(f),c&&c[Zs]?c.L(d,f,l(g)?!!g.capture:!!g,b):e_(c,d,f,!0,g,b)}function n_(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)n_(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Jd(f),c&&c[Zs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=qd(A,f,g,b),-1<f&&(Za(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Qd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=qd(d,f,g,b)),(f=-1<c?d[c]:null)&&Kd(f))}function Kd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Zs])Hd(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(r_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Qd(d))?(Hd(f,c),f.h==0&&(f.src=null,d[Gd]=null)):Za(c)}}}function r_(c){return c in Wd?Wd[c]:Wd[c]="on"+c}function U0(c,d){if(c.da)c=!0;else{d=new Js(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Kd(c),c=f.call(g,d)}return c}function Qd(c){return c=c[Gd],c instanceof Xa?c:null}var Yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jd(c){return typeof c=="function"?c:(c[Yd]||(c[Yd]=function(d){return c.handleEvent(d)}),c[Yd])}function Ke(){Bn.call(this),this.i=new Xa(this),this.M=this,this.F=null}C(Ke,Bn),Ke.prototype[Zs]=!0,Ke.prototype.removeEventListener=function(c,d,f,g){n_(this,c,d,f,g)};function et(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new We(d,c);else if(d instanceof We)d.target=d.target||c;else{var b=d;d=new We(g,c),T(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];b=ec(k,g,!0,d)&&b}if(k=d.g=c,b=ec(k,g,!0,d)&&b,b=ec(k,g,!1,d)&&b,f)for(A=0;A<f.length;A++)k=d.g=f[A],b=ec(k,g,!1,d)&&b}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Za(f[g]);delete c.g[d],c.h--}}this.F=null},Ke.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ke.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function ec(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Ie=k.listener,ze=k.ha||k.src;k.fa&&Hd(c.i,k),b=Ie.call(ze,g)!==!1&&b}}return b&&!g.defaultPrevented}function i_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function s_(c){c.g=i_(()=>{c.g=null,c.i&&(c.i=!1,s_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class j0 extends Bn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:s_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(c){Bn.call(this),this.h=c,this.g={}}C(Xs,Bn);var o_=[];function a_(c){q(c.g,function(d,f){this.g.hasOwnProperty(f)&&Kd(d)},c),c.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),a_(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zd=a.JSON.stringify,B0=a.JSON.parse,$0=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xd(){}Xd.prototype.h=null;function c_(c){return c.h||(c.h=c.i())}function u_(){}var eo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eh(){We.call(this,"d")}C(eh,We);function th(){We.call(this,"c")}C(th,We);var Sr={},l_=null;function tc(){return l_=l_||new Ke}Sr.La="serverreachability";function d_(c){We.call(this,Sr.La,c)}C(d_,We);function to(c){let d=tc();et(d,new d_(d))}Sr.STAT_EVENT="statevent";function h_(c,d){We.call(this,Sr.STAT_EVENT,c),this.stat=d}C(h_,We);function tt(c){let d=tc();et(d,new h_(d,c))}Sr.Ma="timingevent";function f_(c,d){We.call(this,Sr.Ma,c),this.size=d}C(f_,We);function no(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ro(){this.g=!0}ro.prototype.xa=function(){this.g=!1};function z0(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var k="",Ie=A.split("&"),ze=0;ze<Ie.length;ze++){var pe=Ie[ze].split("=");if(1<pe.length){var Qe=pe[0];pe=pe[1];var Ye=Qe.split("_");k=2<=Ye.length&&Ye[1]=="type"?k+(Qe+"="+pe+"&"):k+(Qe+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+k})}function H0(c,d,f,g,b,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+k})}function Ii(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+G0(c,f)+(g?" "+g:"")})}function q0(c,d){c.info(function(){return"TIMEOUT: "+d})}ro.prototype.info=function(){};function G0(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<b.length;k++)b[k]=""}}}}return Zd(f)}catch{return d}}var nc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},p_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nh;function rc(){}C(rc,Xd),rc.prototype.g=function(){return new XMLHttpRequest},rc.prototype.i=function(){return{}},nh=new rc;function $n(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new g_}function g_(){this.i=null,this.g="",this.h=!1}var m_={},rh={};function ih(c,d,f){c.L=1,c.v=ac(mn(d)),c.m=f,c.P=!0,y_(c,null)}function y_(c,d){c.F=Date.now(),ic(c),c.A=mn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),M_(f.i,"t",g),c.C=0,f=c.j.J,c.h=new g_,c.g=Q_(c.j,f?d:null,!c.m),0<c.O&&(c.M=new j0(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(o_[0]=b.toString()),b=o_);for(var A=0;A<b.length;A++){var k=Xv(f,b[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),to(),z0(c.i,c.u,c.A,c.l,c.R,c.m)}$n.prototype.ca=function(c){c=c.target;let d=this.M;d&&yn(c)==3?d.j():this.Y(c)},$n.prototype.Y=function(c){try{if(c==this.g)e:{let Ye=yn(this.g);var d=this.g.Ba();let Ti=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||V_(this.g)))){this.J||Ye!=4||d==7||(d==8||0>=Ti?to(3):to(2)),sh(this);var f=this.g.Z();this.X=f;t:if(v_(this)){var g=V_(this.g);c="";var b=g.length,A=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),io(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,H0(this.i,this.u,this.A,this.l,this.R,Ye,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,ze=this.g;if((Ie=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Ie)){var pe=Ie;break t}}pe=null}if(f=pe)Ii(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oh(this,f);else{this.o=!1,this.s=3,tt(12),Ar(this),io(this);break e}}if(this.P){f=!0;let Lt;for(;!this.J&&this.C<k.length;)if(Lt=W0(this,k),Lt==rh){Ye==4&&(this.s=4,tt(14),f=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==m_){this.s=4,tt(15),Ii(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Ii(this.i,this.l,Lt,null),oh(this,Lt);if(v_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||k.length!=0||this.h.h||(this.s=1,tt(16),f=!1),this.o=this.o&&f,!f)Ii(this.i,this.l,k,"[Invalid Chunked Response]"),Ar(this),io(this);else if(0<k.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),hh(Qe),Qe.M=!0,tt(11))}}else Ii(this.i,this.l,k,null),oh(this,k);Ye==4&&Ar(this),this.o&&!this.J&&(Ye==4?q_(this.j,this):(this.o=!1,ic(this)))}else lA(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),Ar(this),io(this)}}}catch{}finally{}};function v_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function W0(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?rh:(f=Number(d.substring(f,g)),isNaN(f)?m_:(g+=1,g+f>d.length?rh:(d=d.slice(g,g+f),c.C=g+f,d)))}$n.prototype.cancel=function(){this.J=!0,Ar(this)};function ic(c){c.S=Date.now()+c.I,__(c,c.I)}function __(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=no(m(c.ba,c),d)}function sh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}$n.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(q0(this.i,this.A),this.L!=2&&(to(),tt(17)),Ar(this),this.s=2,io(this)):__(this,this.S-c)};function io(c){c.j.G==0||c.J||q_(c.j,c)}function Ar(c){sh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,a_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function oh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||ah(f.h,c))){if(!c.K&&ah(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)hc(f),lc(f);else break e;dh(f),tt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=no(m(f.Za,f),6e3));if(1>=E_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Nr(f,11)}else if((c.K||f.g==c)&&hc(f),!V(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let pe=b[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let Qe=pe[3];Qe!=null&&(f.la=Qe,f.j.info("VER="+f.la));let Ye=pe[4];Ye!=null&&(f.Aa=Ye,f.j.info("SVER="+f.Aa));let Ti=pe[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(g=1.5*Ti,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Lt=c.g;if(Lt){let pc=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pc){var A=g.h;A.g||pc.indexOf("spdy")==-1&&pc.indexOf("quic")==-1&&pc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ch(A,A.h),A.h=null))}if(g.D){let fh=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(g.ya=fh,Te(g.I,g.D,fh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=K_(g,g.J?g.ia:null,g.W),k.K){T_(g.h,k);var Ie=k,ze=g.L;ze&&(Ie.I=ze),Ie.B&&(sh(Ie),ic(Ie)),g.g=k}else z_(g);0<f.i.length&&dc(f)}else pe[0]!="stop"&&pe[0]!="close"||Nr(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Nr(f,7):lh(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}to(4)}catch{}}var K0=class{constructor(c,d){this.g=c,this.map=d}};function I_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function w_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function E_(c){return c.h?1:c.g?c.g.size:0}function ah(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function ch(c,d){c.g?c.g.add(d):c.h=d}function T_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}I_.prototype.cancel=function(){if(this.i=D_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function D_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function Q0(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Y0(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function b_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Y0(c),g=Q0(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var C_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J0(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Rr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Rr){this.h=c.h,sc(this,c.j),this.o=c.o,this.g=c.g,oc(this,c.s),this.l=c.l;var d=c.i,f=new ao;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),S_(this,f),this.m=c.m}else c&&(d=String(c).match(C_))?(this.h=!1,sc(this,d[1]||"",!0),this.o=so(d[2]||""),this.g=so(d[3]||"",!0),oc(this,d[4]),this.l=so(d[5]||"",!0),S_(this,d[6]||"",!0),this.m=so(d[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}Rr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(oo(d,A_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(oo(d,A_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(oo(f,f.charAt(0)=="/"?eA:X0,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",oo(f,nA)),c.join("")};function mn(c){return new Rr(c)}function sc(c,d,f){c.j=f?so(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function oc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function S_(c,d,f){d instanceof ao?(c.i=d,rA(c.i,c.h)):(f||(d=oo(d,tA)),c.i=new ao(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function ac(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function so(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Z0),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Z0(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var A_=/[#\/\?@]/g,X0=/[#\?:]/g,eA=/[#\?]/g,tA=/[#\?@]/g,nA=/#/g;function ao(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function zn(c){c.g||(c.g=new Map,c.h=0,c.i&&J0(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ao.prototype,t.add=function(c,d){zn(this),this.i=null,c=wi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function R_(c,d){zn(c),d=wi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function N_(c,d){return zn(c),d=wi(c,d),c.g.has(d)}t.forEach=function(c,d){zn(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){zn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){zn(this);let d=[];if(typeof c=="string")N_(this,c)&&(d=d.concat(this.g.get(wi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return zn(this),this.i=null,c=wi(this,c),N_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function M_(c,d,f){R_(c,d),0<f.length&&(c.i=null,c.g.set(wi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var b=A;k[g]!==""&&(b+="="+encodeURIComponent(String(k[g]))),c.push(b)}}return this.i=c.join("&")};function wi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function rA(c,d){d&&!c.j&&(zn(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(R_(this,g),M_(this,b,f))},c)),c.j=d}function iA(c,d){let f=new ro;if(a.Image){let g=new Image;g.onload=y(Hn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Hn,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Hn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Hn,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function sA(c,d){let f=new ro,g=new AbortController,b=setTimeout(()=>{g.abort(),Hn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Hn(f,"TestPingServer: ok",!0,d):Hn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Hn(f,"TestPingServer: error",!1,d)})}function Hn(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function oA(){this.g=new $0}function aA(c,d,f){let g=f||"";try{b_(c,function(b,A){let k=b;l(b)&&(k=Zd(b)),d.push(g+A+"="+encodeURIComponent(k))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function co(c){this.l=c.Ub||null,this.j=c.eb||!1}C(co,Xd),co.prototype.g=function(){return new cc(this.l,this.j)},co.prototype.i=function(c){return function(){return c}}({});function cc(c,d){Ke.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(cc,Ke),t=cc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,lo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,lo(this)),this.g&&(this.readyState=3,lo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;x_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function x_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?uo(this):lo(this),this.readyState==3&&x_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,uo(this))},t.Qa=function(c){this.g&&(this.response=c,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,lo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function lo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function P_(c){let d="";return q(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function uh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=P_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ce(c){Ke.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ce,Ke);var cA=/^https?$/i,uA=["POST","PUT"];t=Ce.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nh.g(),this.v=this.o?c_(this.o):c_(nh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){O_(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uA,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{F_(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){O_(this,A)}};function O_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,k_(c),uc(c)}function k_(c){c.A||(c.A=!0,et(c,"complete"),et(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,et(this,"complete"),et(this,"abort"),uc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uc(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?L_(this):this.bb())},t.bb=function(){L_(this)};function L_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||yn(c)!=4||c.Z()!=2)){if(c.u&&yn(c)==4)i_(c.Ea,0,c);else if(et(c,"readystatechange"),yn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var b=String(c.D).match(C_)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!cA.test(b?b.toLowerCase():"")}f=g}if(f)et(c,"complete"),et(c,"success");else{c.m=6;try{var A=2<yn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",k_(c)}}finally{uc(c)}}}}function uc(c,d){if(c.g){F_(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||et(c,"ready");try{f.onreadystatechange=g}catch{}}}function F_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function yn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),B0(d)}};function V_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function lA(c){let d={};c=(c.g&&2<=yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(V(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function U_(c){this.Aa=0,this.i=[],this.j=new ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,c),this.cb=ho("retryDelaySeedMs",1e4,c),this.Wa=ho("forwardChannelMaxRetries",2,c),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new I_(c&&c.concurrentRequestLimit),this.Da=new oA,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=U_.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){tt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=K_(this,null,this.W),dc(this)};function lh(c){if(j_(c),c.G==3){var d=c.U++,f=mn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),fo(c,f),d=new $n(c,c.j,d),d.L=2,d.v=ac(mn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Q_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ic(d)}W_(c)}function lc(c){c.g&&(hh(c),c.g.cancel(),c.g=null)}function j_(c){lc(c),c.u&&(a.clearTimeout(c.u),c.u=null),hc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function dc(c){if(!w_(c.h)&&!c.s){c.s=!0;var d=c.Ga;Qs||Zv(),Ys||(Qs(),Ys=!0),zd.add(d,c),c.B=0}}function dA(c,d){return E_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=no(m(c.Ga,c,d),G_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new $n(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),T(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=$_(this,b,d),f=mn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),fo(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(P_(A)))+"&"+d:this.m&&uh(f,this.m,A)),ch(this.h,b),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),b.T=!0,ih(b,f,null)):ih(b,f,d),this.G=2}}else this.G==3&&(c?B_(this,c):this.i.length==0||w_(this.h)||B_(this))};function B_(c,d){var f;d?f=d.l:f=c.U++;let g=mn(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),fo(c,g),c.m&&c.o&&uh(g,c.m,c.o),f=new $n(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=$_(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ch(c.h,f),ih(f,g,d)}function fo(c,d){c.H&&q(c.H,function(f,g){Te(d,g,f)}),c.l&&b_({},function(f,g){Te(d,g,f)})}function $_(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=b[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Ie=!0;for(let ze=0;ze<f;ze++){let pe=b[ze].g,Qe=b[ze].map;if(pe-=A,0>pe)A=Math.max(0,b[ze].g-100),Ie=!1;else try{aA(Qe,k,"req"+pe+"_")}catch{g&&g(Qe)}}if(Ie){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function z_(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Qs||Zv(),Ys||(Qs(),Ys=!0),zd.add(d,c),c.v=0}}function dh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=no(m(c.Fa,c),G_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,H_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=no(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),lc(this),H_(this))};function hh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function H_(c){c.g=new $n(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=mn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),fo(c,d),c.m&&c.o&&uh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ac(mn(d)),f.m=null,f.P=!0,y_(f,c)}t.Za=function(){this.C!=null&&(this.C=null,lc(this),dh(this),tt(19))};function hc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function q_(c,d){var f=null;if(c.g==d){hc(c),hh(c),c.g=null;var g=2}else if(ah(c.h,d))f=d.D,T_(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=tc(),et(g,new f_(g,f)),dc(c)}else z_(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&dA(c,d)||g==2&&dh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Nr(c,5);break;case 4:Nr(c,10);break;case 3:Nr(c,6);break;default:Nr(c,2)}}}function G_(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Nr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Rr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sc(g,"https"),ac(g),b?iA(g.toString(),f):sA(g.toString(),f)}else tt(2);c.G=0,c.l&&c.l.sa(d),W_(c),j_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function W_(c){if(c.G=0,c.ka=[],c.l){let d=D_(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function K_(c,d,f){var g=f instanceof Rr?mn(f):new Rr(f);if(g.g!="")d&&(g.g=d+"."+g.g),oc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Rr(null);g&&sc(A,g),d&&(A.g=d),b&&oc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),fo(c,g),g}function Q_(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ce(new co({eb:f})):new Ce(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Y_(){}t=Y_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fc(){}fc.prototype.g=function(c,d){return new gt(c,d)};function gt(c,d){Ke.call(this),this.g=new U_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!V(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ei(this)}C(gt,Ke),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){lh(this.g)},gt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Zd(c),c=f);d.i.push(new K0(d.Ya++,c)),d.G==3&&dc(d)},gt.prototype.N=function(){this.g.l=null,delete this.j,lh(this.g),delete this.g,gt.aa.N.call(this)};function J_(c){eh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(J_,eh);function Z_(){th.call(this),this.status=1}C(Z_,th);function Ei(c){this.g=c}C(Ei,Y_),Ei.prototype.ua=function(){et(this.g,"a")},Ei.prototype.ta=function(c){et(this.g,new J_(c))},Ei.prototype.sa=function(c){et(this.g,new Z_)},Ei.prototype.ra=function(){et(this.g,"b")},fc.prototype.createWebChannel=fc.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,zm=Ln.createWebChannelTransport=function(){return new fc},$m=Ln.getStatEventTarget=function(){return tc()},Bm=Ln.Event=Sr,Yl=Ln.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nc.NO_ERROR=0,nc.TIMEOUT=8,nc.HTTP_ERROR=6,Sa=Ln.ErrorCode=nc,p_.COMPLETE="complete",jm=Ln.EventType=p_,u_.EventType=eo,eo.OPEN="a",eo.CLOSE="b",eo.ERROR="c",eo.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Ss=Ln.WebChannel=u_,_j=Ln.FetchXmlHttpFactory=co,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,Um=Ln.XhrIo=Ce}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});var kC="@firebase/firestore";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var Gs="10.14.0";var ui=new fr("@firebase/firestore");function Aa(){return ui.logLevel}function j(t,...e){if(ui.logLevel<=ce.DEBUG){let n=e.map(Av);ui.debug(`Firestore (${Gs}): ${t}`,...n)}}function Fn(t,...e){if(ui.logLevel<=ce.ERROR){let n=e.map(Av);ui.error(`Firestore (${Gs}): ${t}`,...n)}}function Os(t,...e){if(ui.logLevel<=ce.WARN){let n=e.map(Av);ui.warn(`Firestore (${Gs}): ${t}`,...n)}}function Av(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: `+t;throw Fn(e),new Error(e)}function ve(t,e){t||K()}function Z(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Tt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var td=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Km=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($e.UNAUTHENTICATED))}shutdown(){}},Qm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ym=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new qt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new td(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new $e(e)}},Jm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Zm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Jm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ey=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new Xm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Ij(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var nd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Ij(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function ks(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ge=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ge(0,0))}static max(){return new t(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var rd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},be=class t extends rd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},wj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bt=class t extends rd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return wj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(be.fromString(e))}static fromName(e){return new t(be.fromString(e).popFirst(5))}static empty(){return new t(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new be(e.slice()))}};var ty=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};ty.UNKNOWN_ID=-1;function Ej(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new li(i,H.empty(),e)}function Tj(t){return new li(t.readTime,t.key,-1)}var li=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),H.empty(),-1)}static max(){return new t(ee.max(),H.empty(),-1)}};function Dj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var bj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ny=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ga(t){return w(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==bj)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Cj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wa(t){return t.name==="IndexedDbTransactionError"}var gS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Od(t){return t==null}function Oa(t){return t===0&&1/t==-1/0}function Sj(t){return typeof t=="number"&&Number.isInteger(t)&&!Oa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Aj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],k6=[...Aj,"documentOverlays"],Rj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nj=Rj,Mj=[...Nj,"indexConfiguration","indexState","indexEntries"];var L6=[...Mj,"globals"];function LC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ae=class t{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ms(this.root,e,this.comparator,!0)}},Ms=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},un=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,i,s){return this}insert(e,n,r){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class t{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new id(this.data.getIterator())}getIteratorFrom(e){return new id(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},id=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ot=class t{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ze(bt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var sd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Xe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Xe.EMPTY_BYTE_STRING=new Xe("");var xj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vn(t){if(ve(!!t),typeof t=="string"){let e=0,n=xj.exec(t);if(ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}function Rv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Nv(t){let e=t.mapValue.fields.__previous_value__;return Rv(e)?Nv(e):e}function ka(t){let e=Vn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}var ry=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},od=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rv(t)?4:vS(t)?9007199254740991:yS(t)?10:11:K()}function fn(t,e){if(t===e)return!0;let n=di(t);if(n!==di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ka(t).isEqual(ka(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Vn(i.timestampValue),a=Vn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Tr(i.bytesValue).isEqual(Tr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=De(i.doubleValue),a=De(s.doubleValue);return o===a?Oa(o)===Oa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ks(t.arrayValue.values||[],e.arrayValue.values||[],fn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(LC(o)!==LC(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!fn(o[u],a[u])))return!1;return!0}(t,e);default:return K()}}function La(t,e){return(t.values||[]).find(n=>fn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;let n=di(t),r=di(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return FC(t.timestampValue,e.timestampValue);case 4:return FC(ka(t),ka(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Tr(s),u=Tr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(De(s.latitude),De(o.latitude));return a!==0?a:ge(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return VC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ge(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:VC(y,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Jl.mapValue&&o===Jl.mapValue)return 0;if(s===Jl.mapValue)return 1;if(o===Jl.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ge(u[p],h[p]);if(m!==0)return m;let y=Ls(a[u[p]],l[h[p]]);if(y!==0)return y}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw K()}}function FC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=Vn(t),r=Vn(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function VC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Ls(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Fs(t){return iy(t)}function iy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Vn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=iy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${iy(n.fields[o])}`;return i+"}"}(t.mapValue):K()}function UC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sy(t){return!!t&&"integerValue"in t}function Mv(t){return!!t&&"arrayValue"in t}function jC(t){return!!t&&"nullValue"in t}function BC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xl(t){return!!t&&"mapValue"in t}function yS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Na(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Dt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=bt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Na(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Na(this.value))}};function _S(t){let e=[];return vi(t.fields,(n,r)=>{let i=new bt([n]);if(Xl(r)){let s=_S(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}var Gt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vs=class{constructor(e,n){this.position=e,this.inclusive=n}};function $C(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fn(t.position[n],e.position[n]))return!1;return!0}var Us=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Pj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ad=class{},Le=class t extends ad{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ay(e,n,r):n==="array-contains"?new ly(e,r):n==="in"?new dy(e,r):n==="not-in"?new hy(e,r):n==="array-contains-any"?new fy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cy(e,r):new uy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ls(n,this.value)):n!==null&&di(this.value)===di(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wt=class t extends ad{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return IS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function IS(t){return t.op==="and"}function wS(t){return Oj(t)&&IS(t)}function Oj(t){for(let e of t.filters)if(e instanceof Wt)return!1;return!0}function oy(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(wS(t))return t.filters.map(e=>oy(e)).join(",");{let e=t.filters.map(n=>oy(n)).join(",");return`${t.op}(${e})`}}function ES(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&fn(r.value,i.value)}(t,e):t instanceof Wt?function(r,i){return i instanceof Wt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ES(o,i.filters[a]),!0):!1}(t,e):void K()}function TS(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof Wt?function(n){return n.op.toString()+" {"+n.getFilters().map(TS).join(" ,")+"}"}(t):"Filter"}var ay=class extends Le{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},cy=class extends Le{constructor(e,n){super(e,"in",n),this.keys=DS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},uy=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=DS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function DS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var ly=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Mv(n)&&La(n.arrayValue,this.value)}},dy=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}},hy=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!La(this.value.arrayValue,n)}},fy=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Mv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>La(this.value.arrayValue,r))}};var py=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function HC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new py(t,e,n,r,i,s,o)}function xv(t){let e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ue=n}return e.ue}function Pv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ES(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zC(t.startAt,e.startAt)&&zC(t.endAt,e.endAt)}function gy(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Dr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function kj(t,e,n,r,i,s,o,a){return new Dr(t,e,n,r,i,s,o,a)}function Ov(t){return new Dr(t)}function qC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bS(t){return t.collectionGroup!==null}function Ma(t){let e=Z(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(bt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Us(s,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new Us(bt.keyField(),r))}return e.ce}function ln(t){let e=Z(t);return e.le||(e.le=Lj(e,Ma(t))),e.le}function Lj(t,e){if(t.limitType==="F")return HC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Us(i.field,s)});let n=t.endAt?new Vs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vs(t.startAt.position,t.startAt.inclusive):null;return HC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function my(t,e){let n=t.filters.concat([e]);return new Dr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yy(t,e,n){return new Dr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kd(t,e){return Pv(ln(t),ln(e))&&t.limitType===e.limitType}function CS(t){return`${xv(ln(t))}|lt:${t.limitType}`}function As(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TS(i)).join(", ")}]`),Od(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fs(i)).join(",")),`Target(${r})`}(ln(t))}; limitType=${t.limitType})`}function Ld(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ma(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=$C(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Ma(r),i)||r.endAt&&!function(o,a,u){let l=$C(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Ma(r),i))}(t,e)}function Fj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SS(t){return(e,n)=>{let r=!1;for(let i of Ma(t)){let s=Vj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Vj(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Ls(u,l):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var br=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return mS(this.inner)}size(){return this.innerSize}};var Uj=new Ae(H.comparator);function Un(){return Uj}var AS=new Ae(H.comparator);function Ra(...t){let e=AS;for(let n of t)e=e.insert(n.key,n);return e}function RS(t){let e=AS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oi(){return xa()}function NS(){return xa()}function xa(){return new br(t=>t.toString(),(t,e)=>t.isEqual(e))}var jj=new Ae(H.comparator),Bj=new Ze(H.comparator);function ue(...t){let e=Bj;for(let n of t)e=e.add(n);return e}var $j=new Ze(ge);function zj(){return $j}function kv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oa(e)?"-0":e}}function MS(t){return{integerValue:""+t}}function Hj(t,e){return Sj(e)?MS(e):kv(t,e)}var js=class{constructor(){this._=void 0}};function qj(t,e,n){return t instanceof hi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Rv(s)&&(s=Nv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof fi?PS(t,e):t instanceof pi?OS(t,e):function(i,s){let o=xS(i,s),a=GC(o)+GC(i.Pe);return sy(o)&&sy(i.Pe)?MS(a):kv(i.serializer,a)}(t,e)}function Gj(t,e,n){return t instanceof fi?PS(t,e):t instanceof pi?OS(t,e):n}function xS(t,e){return t instanceof Bs?function(r){return sy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var hi=class extends js{},fi=class extends js{constructor(e){super(),this.elements=e}};function PS(t,e){let n=kS(e);for(let r of t.elements)n.some(i=>fn(i,r))||n.push(r);return{arrayValue:{values:n}}}var pi=class extends js{constructor(e){super(),this.elements=e}};function OS(t,e){let n=kS(e);for(let r of t.elements)n=n.filter(i=>!fn(i,r));return{arrayValue:{values:n}}}var Bs=class extends js{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function GC(t){return De(t.integerValue||t.doubleValue)}function kS(t){return Mv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var vy=class{constructor(e,n){this.field=e,this.transform=n}};function Wj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fi&&i instanceof fi||r instanceof pi&&i instanceof pi?ks(r.elements,i.elements,fn):r instanceof Bs&&i instanceof Bs?fn(r.Pe,i.Pe):r instanceof hi&&i instanceof hi}(t.transform,e.transform)}var _y=class{constructor(e,n){this.version=e,this.transformResults=n}},dn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ed(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var $s=class{};function LS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fa(t.key,dn.none()):new gi(t.key,t.data,dn.none());{let n=t.data,r=Dt.empty(),i=new Ze(bt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new pn(t.key,r,new Ot(i.toArray()),dn.none())}}function Kj(t,e,n){t instanceof gi?function(i,s,o){let a=i.value.clone(),u=KC(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof pn?function(i,s,o){if(!ed(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=KC(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(FS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pa(t,e,n,r){return t instanceof gi?function(s,o,a,u){if(!ed(s.precondition,o))return a;let l=s.value.clone(),h=QC(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof pn?function(s,o,a,u){if(!ed(s.precondition,o))return a;let l=QC(s.fieldTransforms,u,o),h=o.data;return h.setAll(FS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return ed(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Qj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=xS(r.transform,i||null);s!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,s))}return n||null}function WC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ks(r,i,(s,o)=>Wj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var gi=class extends $s{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},pn=class extends $s{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function FS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function KC(t,e,n){let r=new Map;ve(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Gj(o,a,n[i]))}return r}function QC(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,qj(s,o,e))}return r}var Fa=class extends $s{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Iy=class extends $s{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Kj(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=NS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=LS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ks(this.mutations,e.mutations,(n,r)=>WC(n,r))&&ks(this.baseMutations,e.baseMutations,(n,r)=>WC(n,r))}},Ey=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length);let i=function(){return jj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Ty=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Oe,de;function Yj(t){switch(t){default:return K();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function VS(t){if(t===void 0)return Fn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return K()}}(de=Oe||(Oe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var YC=null;function Jj(){return new TextEncoder}var Zj=new wr([4294967295,4294967295],0);function JC(t){let e=Jj().encode(t),n=new Vm;return n.update(e),new Uint8Array(n.digest())}function ZC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wr([n,r],0),new wr([i,s],0)]}var by=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ai(`Invalid padding: ${n}`);if(r<0)throw new ai(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ai(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ai(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wr.fromNumber(r)));return i.compare(Zj)===1&&(i=new wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=JC(e),[r,i]=ZC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=JC(e),[r,i]=ZC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ai=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Va.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Ae(ge),Un(),ue())}},Va=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var xs=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ud=class{constructor(e,n){this.targetId=e,this.me=n}},ld=class{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},dd=class{constructor(){this.fe=0,this.ge=eS(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Va(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=eS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Cy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Un(),this.qe=XC(),this.Qe=new Ae(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(gy(s))if(r===0){let o=new H(s.path);this.Ue(n,o,Gt.newNoDocument(o,ee.min()))}else ve(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}YC?.et(function(h,p,m,y,C){var N,R,O,V,L,G;let he={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},q=p.unchangedNames;return q&&(he.bloomFilter={applied:C===0,hashCount:(N=q?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(V=(O=(R=q?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&V!==void 0?V:0,padding:(G=(L=q?.bits)===null||L===void 0?void 0:L.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),he}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Tr(r).toUint8Array()}catch(u){if(u instanceof sd)return Os("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new by(o,i,s)}catch(u){return Os(u instanceof ai?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&gy(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Gt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new cd(e,n,this.Qe,this.ke,r);return this.ke=Un(),this.qe=XC(),this.Qe=new Ae(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ze(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function XC(){return new Ae(H.comparator)}function eS(){return new Ae(H.comparator)}var Xj={asc:"ASCENDING",desc:"DESCENDING"},e2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t2={and:"AND",or:"OR"},Sy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ay(t,e){return t.useProto3Json||Od(e)?e:{value:e}}function hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function US(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function n2(t,e){return hd(t,e.toTimestamp())}function hn(t){return ve(!!t),ee.fromTimestamp(function(n){let r=Vn(n);return new Ge(r.seconds,r.nanos)}(t))}function Lv(t,e){return Ry(t,e).canonicalString()}function Ry(t,e){let n=function(i){return new be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jS(t){let e=be.fromString(t);return ve(qS(e)),e}function Ny(t,e){return Lv(t.databaseId,e.path)}function Hm(t,e){let n=jS(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H($S(n))}function BS(t,e){return Lv(t.databaseId,e)}function r2(t){let e=jS(t);return e.length===4?be.emptyPath():$S(e)}function My(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $S(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tS(t,e,n){return{name:Ny(t,e),fields:n.value.mapValue.fields}}function i2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string"),Xe.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Xe.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:VS(l.code);return new F(h,l.message||"")}(o);n=new ld(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Hm(t,r.document.name),s=hn(r.document.updateTime),o=r.document.createTime?hn(r.document.createTime):ee.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=Gt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new xs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Hm(t,r.document),s=r.readTime?hn(r.readTime):ee.min(),o=Gt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Hm(t,r.document),s=r.removedTargetIds||[];n=new xs([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Dy(i,s),a=r.targetId;n=new ud(a,o)}}return n}function s2(t,e){let n;if(e instanceof gi)n={update:tS(t,e.key,e.value)};else if(e instanceof Fa)n={delete:Ny(t,e.key)};else if(e instanceof pn)n={update:tS(t,e.key,e.data),updateMask:p2(e.fieldMask)};else{if(!(e instanceof Iy))return K();n={verify:Ny(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof hi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:n2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(t,e.precondition)),n}function o2(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hn(i.updateTime):hn(s);return o.isEqual(ee.min())&&(o=hn(s)),new _y(o,i.transformResults||[])}(n,e))):[]}function a2(t,e){return{documents:[BS(t,e.path)]}}function c2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BS(t,i);let s=function(l){if(l.length!==0)return HS(Wt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Rs(m.field),direction:d2(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Ay(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function u2(t){let e=r2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=zS(p);return m instanceof Wt&&wS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new Us(Ns(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Od(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Vs(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Vs(y,m)}(n.endAt)),kj(e,i,o,s,a,"F",u,l)}function l2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ns(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ns(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ns(n.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ns(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wt.create(n.compositeFilter.filters.map(r=>zS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function d2(t){return Xj[t]}function h2(t){return e2[t]}function f2(t){return t2[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function Ns(t){return bt.fromServerFormat(t.fieldPath)}function HS(t){return t instanceof Le?function(n){if(n.op==="=="){if(BC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(jC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(jC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:h2(n.op),value:n.value}}}(t):t instanceof Wt?function(n){let r=n.getFilters().map(i=>HS(i));return r.length===1?r[0]:{compositeFilter:{op:f2(n.op),filters:r}}}(t):K()}function p2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ua=class t{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=Xe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xy=class{constructor(e){this.ct=e}};function g2(t){let e=u2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yy(e,e.limit,"L"):e}var fd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(De(e.integerValue));else if("doubleValue"in e){let r=De(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Oa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Vn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Tr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?vS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):yS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):K()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(De(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),H.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};fd.vt=new fd;var Py=class{constructor(){this.un=new Oy}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(li.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(li.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Oy=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(be.comparator)).toArray()}};var V6=new Uint8Array(0);var cn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);var ja=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var ky=class{constructor(){this.changes=new br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ly=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Fy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pa(r.mutation,i,Ot.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ra();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Un(),o=xa(),a=function(){return xa()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof pn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Pa(h.mutation,l,h.mutation.getFieldMask(),Ge.now())):o.set(l.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Ly(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=xa(),i=new Ae((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Ot.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=NS();h.forEach(m=>{if(!s.has(m)){let y=LS(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(oi()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:RS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Ra();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Ra();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Dr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Gt.newInvalidDocument(h)))});let a=Ra();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Pa(h.mutation,l,Ot.empty(),Ge.now()),Ld(n,l)&&(a=a.insert(u,l))}),a})}};var Vy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:g2(i.bundledQuery),readTime:hn(i.readTime)}}(n)),x.resolve()}};var Uy=class{constructor(){this.overlays=new Ae(H.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=oi();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=oi(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=oi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=oi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ty(n,r));let s=this.Ir.get(n);s===void 0&&(s=ue(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var jy=class{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var Ba=class{constructor(){this.Tr=new Ze(ke.Er),this.dr=new Ze(ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new H(new be([])),r=new ke(n,e),i=new ke(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new H(new be([])),r=new ke(n,e),i=new ke(n,e+1),s=ue();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ke=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||H.comparator(e.key,n.key)}};var By=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ze(ke.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new wy(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new ke(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ke(n,0),i=new ke(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(ge);return n.forEach(i=>{let s=new ke(i,0),o=new ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new ke(new H(s),0),a=new Ze(ge);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new ke(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new ke(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var $y=class{constructor(e){this.Mr=e,this.docs=function(){return new Ae(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Gt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Un(),o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Dj(Tj(h),r)<=0||(i.has(h.key)||Ld(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){K()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zy(this)}getSize(e){return x.resolve(this.size)}},zy=class extends ky{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Hy=class{constructor(e){this.persistence=e,this.Nr=new br(n=>xv(n),Pv),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ba,this.targetCount=0,this.kr=ja.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new ja(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var qy=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new gS(0),this.Kr=!1,this.Kr=!0,this.$r=new jy,this.referenceDelegate=e(this),this.Ur=new Hy(this),this.indexManager=new Py,this.remoteDocumentCache=function(i){return new $y(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xy(n),this.Gr=new Vy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new By(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new Gy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Gy=class extends ny{constructor(e){super(),this.currentSequenceNumber=e}},Wy=class t{constructor(e){this.persistence=e,this.Jr=new Ba,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Ky=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ue(),i=ue();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Qy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ib()?8:Cj(Be())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Qy;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Aa()<=ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",As(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Aa()<=ce.DEBUG&&j("QueryEngine","Query:",As(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Aa()<=ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",As(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(n))):x.resolve())}Yi(e,n){if(qC(n))return x.resolve(null);let r=ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=yy(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,yy(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return qC(n)||i.isEqual(ee.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(Aa()<=ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),As(n)),this.rs(e,o,n,Ej(i,-1)).next(a=>a))})}ts(e,n){let r=new Ze(SS(e));return n.forEach((i,s)=>{Ld(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Aa()<=ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",As(n)),this.Ji.getDocumentsMatchingQuery(e,n,li.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Jy=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ae(ge),this._s=new br(s=>xv(s),Pv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fy(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function m2(t,e,n,r){return new Jy(t,e,n,r)}function GS(t,e){return w(this,null,function*(){let n=Z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ue();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function y2(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);ve(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function WS(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function v2(t,e){let n=Z(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Xe.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=Un(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(_2(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function _2(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Un();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function I2(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function w2(t,e){let n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ua(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Zy(t,e,n){return w(this,null,function*(){let r=Z(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Wa(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function nS(t,e,n){let r=Z(t),i=ee.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Z(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,ln(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:ue())).next(a=>(E2(r,Fj(e),a),{documents:a,Ts:s})))}function E2(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var pd=class{constructor(){this.activeTargetIds=zj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xy=class{constructor(){this.so=new pd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ev=class{_o(e){}shutdown(){}};var gd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Zl=null;function qm(){return Zl===null?Zl=function(){return 268435456+Math.round(2147483648*Math.random())}():Zl++,"0x"+Zl.toString(16)}var T2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var tv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Je="WebChannelConnection",nv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=qm(),u=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(j("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Os("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=T2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=qm();return new Promise((o,a)=>{let u=new Um;u.setWithCredentials(!0),u.listenOnce(jm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Sa.NO_ERROR:let h=u.getResponseJson();j(Je,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Sa.TIMEOUT:j(Je,`RPC '${e}' ${s} timed out`),a(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Sa.HTTP_ERROR:let p=u.getStatus();if(j(Je,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let C=function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(O)>=0?O:M.UNKNOWN}(y.status);a(new F(C,y.message))}else a(new F(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(M.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{j(Je,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(Je,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=qm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zm(),a=$m(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");j(Je,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,y=!1,C=new tv({Io:R=>{y?j(Je,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(Je,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(Je,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,O,V)=>{R.listen(O,L=>{try{V(L)}catch(G){setTimeout(()=>{throw G},0)}})};return N(p,Ss.EventType.OPEN,()=>{y||(j(Je,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(p,Ss.EventType.CLOSE,()=>{y||(y=!0,j(Je,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(p,Ss.EventType.ERROR,R=>{y||(y=!0,Os(Je,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new F(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ss.EventType.MESSAGE,R=>{var O;if(!y){let V=R.data[0];ve(!!V);let L=V,G=L.error||((O=L[0])===null||O===void 0?void 0:O.error);if(G){j(Je,`RPC '${e}' stream ${i} received error:`,G);let he=G.status,q=function(_){let T=Oe[_];if(T!==void 0)return VS(T)}(he),E=G.message;q===void 0&&(q=M.INTERNAL,E="Unknown error status: "+he+" with message "+G.message),y=!0,C.So(new F(q,E)),p.close()}else j(Je,`RPC '${e}' stream ${i} received:`,V),C.bo(V)}}),N(a,Bm.STAT_EVENT,R=>{R.stat===Yl.PROXY?j(Je,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Yl.NOPROXY&&j(Je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function Gm(){return typeof document<"u"?document:null}function Fd(t){return new Sy(t,!0)}var md=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new md(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Fn(n.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rv=class extends yd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=i2(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?hn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=My(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=gy(u)?{documents:a2(s,u)}:{query:c2(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=US(s,o.resumeToken);let l=Ay(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=hd(s,o.snapshotVersion.toTimestamp());let l=Ay(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=l2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=My(this.serializer),n.removeTarget=e,this.a_(n)}},iv=class extends yd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=o2(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=My(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>s2(this.serializer,r))};this.a_(n)}};var sv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ry(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ry(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ov=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fn(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var av=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){_i(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=Z(u);l.L_.add(4),yield Ka(l),l.q_.set("Unknown"),l.L_.delete(4),yield Vd(l)})}(this))}))}),this.q_=new ov(r,i)}};function Vd(t){return w(this,null,function*(){if(_i(t))for(let e of t.B_)yield e(!0)})}function Ka(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function KS(t,e){let n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),jv(n)?Uv(n):Ws(n).r_()&&Vv(n,e))}function Fv(t,e){let n=Z(t),r=Ws(n);n.N_.delete(e),r.r_()&&QS(n,e),n.N_.size===0&&(r.r_()?r.o_():_i(n)&&n.q_.set("Unknown"))}function Vv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).A_(e)}function QS(t,e){t.Q_.xe(e),Ws(t).R_(e)}function Uv(t){t.Q_=new Cy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.q_.v_()}function jv(t){return _i(t)&&!Ws(t).n_()&&t.N_.size>0}function _i(t){return Z(t).L_.size===0}function YS(t){t.Q_=void 0}function D2(t){return w(this,null,function*(){t.q_.set("Online")})}function b2(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{Vv(t,e)})})}function C2(t,e){return w(this,null,function*(){YS(t),jv(t)?(t.q_.M_(e),Uv(t)):t.q_.set("Unknown")})}function S2(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof ld&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vd(t,r)}else if(e instanceof xs?t.Q_.Ke(e):e instanceof ud?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{let r=yield WS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Xe.EMPTY_BYTE_STRING,h.snapshotVersion)),QS(s,u);let p=new Ua(h.target,u,l,h.sequenceNumber);Vv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield vd(t,r)}})}function vd(t,e,n){return w(this,null,function*(){if(!Wa(e))throw e;t.L_.add(1),yield Ka(t),t.q_.set("Offline"),n||(n=()=>WS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Vd(t)}))})}function JS(t,e){return e().catch(n=>vd(t,n,e))}function Ud(t){return w(this,null,function*(){let e=Z(t),n=Cr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;A2(e);)try{let i=yield I2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,R2(e,i)}catch(i){yield vd(e,i)}ZS(e)&&XS(e)})}function A2(t){return _i(t)&&t.O_.length<10}function R2(t,e){t.O_.push(e);let n=Cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ZS(t){return _i(t)&&!Cr(t).n_()&&t.O_.length>0}function XS(t){Cr(t).start()}function N2(t){return w(this,null,function*(){Cr(t).p_()})}function M2(t){return w(this,null,function*(){let e=Cr(t);for(let n of t.O_)e.m_(n.mutations)})}function x2(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=Ey.from(r,e,n);yield JS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ud(t)})}function P2(t,e){return w(this,null,function*(){e&&Cr(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return Yj(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Cr(r).s_(),yield JS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ud(r)}})}(t,e)),ZS(t)&&XS(t)})}function rS(t,e){return w(this,null,function*(){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=_i(n);n.L_.add(3),yield Ka(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Vd(n)})}function O2(t,e){return w(this,null,function*(){let n=Z(t);e?(n.L_.delete(2),yield Vd(n)):e||(n.L_.add(2),yield Ka(n),n.q_.set("Unknown"))})}function Ws(t){return t.K_||(t.K_=function(n,r,i){let s=Z(n);return s.w_(),new rv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:D2.bind(null,t),Ro:b2.bind(null,t),mo:C2.bind(null,t),d_:S2.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),jv(t)?Uv(t):t.q_.set("Unknown")):(yield t.K_.stop(),YS(t))}))),t.K_}function Cr(t){return t.U_||(t.U_=function(n,r,i){let s=Z(n);return s.w_(),new iv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:N2.bind(null,t),mo:P2.bind(null,t),f_:M2.bind(null,t),g_:x2.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield Ud(t)):(yield t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var cv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bv(t,e){if(Fn("AsyncQueue",`${e}: ${t}`),Wa(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}var _d=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Ra(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Id=class{constructor(){this.W_=new Ae(H.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},zs=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,_d.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var uv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},lv=class{constructor(){this.queries=iS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Z(n),s=i.queries;i.queries=iS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}};function iS(){return new br(t=>CS(t),kd)}function e0(t,e){return w(this,null,function*(){let n=Z(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new uv,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Bv(o,`Initialization of query '${As(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&$v(n)})}function t0(t,e){return w(this,null,function*(){let n=Z(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function k2(t,e){let n=Z(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&$v(n)}function L2(t,e,n){let r=Z(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function $v(t){t.Y_.forEach(e=>{e.next()})}var dv,sS;(sS=dv||(dv={})).ea="default",sS.Cache="cache";var wd=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dv.Cache}};var Ed=class{constructor(e){this.key=e}},Td=class{constructor(e){this.key=e}},hv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=SS(e),this.Ra=new _d(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Id,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Ld(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return N(y)-N(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new zs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Id,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Td(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ed(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return zs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},fv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},pv=class{constructor(e){this.key=e,this.va=!1}},gv=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new br(a=>CS(a),kd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(H.comparator),this.Na=new Map,this.La=new Ba,this.Ba={},this.ka=new Map,this.qa=ja.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function F2(t,e,n=!0){return w(this,null,function*(){let r=a0(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield n0(r,e,n,!0),i})}function V2(t,e){return w(this,null,function*(){let n=a0(t);yield n0(n,e,!0,!1)})}function n0(t,e,n,r){return w(this,null,function*(){let i=yield w2(t.localStore,ln(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield U2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&KS(t.remoteStore,i),a})}function U2(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,m,y)=>function(N,R,O,V){return w(this,null,function*(){let L=R.view.ma(O);L.ns&&(L=yield nS(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,L)));let G=V&&V.targetChanges.get(R.targetId),he=V&&V.targetMismatches.get(R.targetId)!=null,q=R.view.applyChanges(L,N.isPrimaryClient,G,he);return aS(N,R.targetId,q.wa),q.snapshot})}(t,p,m,y);let s=yield nS(t.localStore,e,!0),o=new hv(e,s.Ts),a=o.ma(s.documents),u=Va.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);aS(t,n,l.wa);let h=new fv(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function j2(t,e,n){return w(this,null,function*(){let r=Z(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!kd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Fv(r.remoteStore,i.targetId),mv(r,i.targetId)}).catch(Ga))):(mv(r,i.targetId),yield Zy(r.localStore,i.targetId,!0))})}function B2(t,e){return w(this,null,function*(){let n=Z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fv(n.remoteStore,r.targetId))})}function $2(t,e,n){return w(this,null,function*(){let r=Q2(t);try{let i=yield function(o,a){let u=Z(o),l=Ge.now(),h=a.reduce((y,C)=>y.add(C.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Un(),N=ue();return u.cs.getEntries(y,h).next(R=>{C=R,C.forEach((O,V)=>{V.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let O=[];for(let V of a){let L=Qj(V,p.get(V.key).overlayedDocument);L!=null&&O.push(new pn(V.key,L,_S(L.value.mapValue),dn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:RS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ae(ge)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Qa(r,i.changes),yield Ud(r.remoteStore)}catch(i){let s=Bv(i,"Failed to persist write");n.reject(s)}})}function r0(t,e){return w(this,null,function*(){let n=Z(t);try{let r=yield v2(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ve(o.va):i.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),yield Qa(n,r,e)}catch(r){yield Ga(r)}})}function oS(t,e,n){let r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Z(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&$v(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function z2(t,e,n){return w(this,null,function*(){let r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ae(H.comparator);o=o.insert(s,Gt.newNoDocument(s,ee.min()));let a=ue().add(s),u=new cd(ee.min(),new Map,new Ae(ge),o,a);yield r0(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),zv(r)}else yield Zy(r.localStore,e,!1).then(()=>mv(r,e,n)).catch(Ga)})}function H2(t,e){return w(this,null,function*(){let n=Z(t),r=e.batch.batchId;try{let i=yield y2(n.localStore,e);s0(n,r,null),i0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Qa(n,i)}catch(i){yield Ga(i)}})}function q2(t,e,n){return w(this,null,function*(){let r=Z(t);try{let i=yield function(o,a){let u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);s0(r,e,n),i0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Qa(r,i)}catch(i){yield Ga(i)}})}function i0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function s0(t,e,n){let r=Z(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function mv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||o0(t,r)})}function o0(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Fv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),zv(t))}function aS(t,e,n){for(let r of n)r instanceof Ed?(t.La.addReference(r.key,e),G2(t,r)):r instanceof Td?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||o0(t,r.key)):K()}function G2(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),zv(t))}function zv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new H(be.fromString(e)),r=t.qa.next();t.Na.set(r,new pv(n)),t.Oa=t.Oa.insert(n,r),KS(t.remoteStore,new Ua(ln(Ov(n.path)),r,"TargetPurposeLimboResolution",gS.oe))}}function Qa(t,e,n){return w(this,null,function*(){let r=Z(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Ky.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let h=Z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Wa(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function W2(t,e){return w(this,null,function*(){let n=Z(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield GS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new F(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qa(n,r.hs)}})}function K2(t,e){let n=Z(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function a0(t){let e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z2.bind(null,e),e.Ca.d_=k2.bind(null,e.eventManager),e.Ca.$a=L2.bind(null,e.eventManager),e}function Q2(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q2.bind(null,e),e}var cS=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return w(this,null,function*(){this.serializer=Fd(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return m2(this.persistence,new Yy,n.initialUser,this.serializer)}Ga(n){return new qy(Wy.Zr,this.serializer)}Wa(n){return new Xy}terminate(){return w(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var Y2=(()=>{class t{initialize(n,r){return w(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=W2.bind(null,this.syncEngine),yield O2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new lv}()}createDatastore(n){let r=Fd(n.databaseInfo.databaseId),i=function(o){return new nv(o)}(n.databaseInfo);return function(o,a,u,l){return new sv(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new av(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>oS(this.syncEngine,r,0),function(){return gd.D()?new gd:new ev}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new gv(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return w(this,null,function*(){var n,r;yield function(s){return w(this,null,function*(){let o=Z(s);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ka(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Dd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var yv=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$e.UNAUTHENTICATED,this.clientId=nd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>w(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Bv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Wm(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield GS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function uS(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield J2(t);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rS(e.remoteStore,i)),t._onlineComponents=e})}function J2(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),yield Wm(t,new cS)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Wm(t,new cS);return t._offlineComponents})}function c0(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield uS(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield uS(t,new Y2))),t._onlineComponents})}function Z2(t){return c0(t).then(e=>e.syncEngine)}function u0(t){return w(this,null,function*(){let e=yield c0(t),n=e.eventManager;return n.onListen=F2.bind(null,e.syncEngine),n.onUnlisten=j2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=V2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=B2.bind(null,e.syncEngine),n})}function X2(t,e,n={}){let r=new qt;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,u,l){let h=new Dd({next:m=>{h.Za(),o.enqueueAndForget(()=>t0(s,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new F(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new wd(Ov(a.path),h,{includeMetadataChanges:!0,_a:!0});return e0(s,p)}(yield u0(t),t.asyncQueue,e,n,r)})),r.promise}function eB(t,e,n={}){let r=new qt;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,u,l){let h=new Dd({next:m=>{h.Za(),o.enqueueAndForget(()=>t0(s,p)),m.fromCache&&u.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new wd(a,h,{includeMetadataChanges:!0,_a:!0});return e0(s,p)}(yield u0(t),t.asyncQueue,e,n,r)})),r.promise}function l0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var lS=new Map;function Hv(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tB(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dS(t){if(!H.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hS(t){if(H.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=jd(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var bd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},mi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Km;switch(r.type){case"firstParty":return new Zm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return w(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=lS.get(n);r&&(j("ComponentProvider","Removing Datastore"),lS.delete(n),r.terminate())}(this),Promise.resolve()}};function d0(t,e,n,r={}){var i;let s=(t=kt(t,mi))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=$e.MOCK_USER;else{a=pb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $e(l)}t._authCredentials=new Qm(new td(a,u))}}var yi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Er=class t extends yi{constructor(e,n,r){super(e,n,Ov(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function h0(t,e,...n){if(t=Ue(t),Hv("collection","path",e),t instanceof mi){let r=be.fromString(e,...n);return hS(r),new Er(t,null,r)}{if(!(t instanceof ut||t instanceof Er))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(be.fromString(e,...n));return hS(r),new Er(t.firestore,null,r)}}function f0(t,e){if(t=kt(t,mi),Hv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yi(t,null,function(r){return new Dr(be.emptyPath(),r)}(e))}function qv(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=nd.newId()),Hv("doc","path",e),t instanceof mi){let r=be.fromString(e,...n);return dS(r),new ut(t,null,new H(r))}{if(!(t instanceof ut||t instanceof Er))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(be.fromString(e,...n));return dS(r),new ut(t.firestore,t instanceof Er?t.converter:null,new H(r))}}var Cd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new md(this,"async_queue_retry"),this.Vu=()=>{let r=Gm();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new qt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return w(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wa(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=cv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return w(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var jn=class extends mi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return w(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Cd(e),this._firestoreClient=void 0,yield e}})}};function p0(t,e){let n=typeof t=="object"?t:ws(),r=typeof t=="string"?t:e||"(default)",i=ga(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=fb("firestore");s&&d0(i,...s)}return i}function Gv(t){if(t._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nB(t),t._firestoreClient}function nB(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new ry(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,l0(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yv(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var $a=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Xe.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Hs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qs=class{constructor(e){this._methodName=e}};var za=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Ha=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var rB=/^__.*__$/,vv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pn(e,this.data,this.fieldMask,n,this.fieldTransforms):new gi(e,this.data,n,this.fieldTransforms)}},Sd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new pn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function g0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var _v=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(g0(this.Cu)&&rB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Iv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fd(e)}Qu(e,n,r,i=!1){return new _v({Cu:e,methodName:n,qu:r,path:bt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bd(t){let e=t._freezeSettings(),n=Fd(t._databaseId);return new Iv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function m0(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Wv("Data must be an object, but it was:",o,r);let a=y0(r,o),u,l;if(s.merge)u=new Ot(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=Ev(e,p,n);if(!o.contains(m))throw new F(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_0(h,m)||h.push(m)}u=new Ot(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new vv(new Dt(a),u,l)}var Ad=class t extends qs{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var wv=class t extends qs{_toFieldTransform(e){return new vy(e.path,new hi)}isEqual(e){return e instanceof t}};function iB(t,e,n,r){let i=t.Qu(1,e,n);Wv("Data must be an object, but it was:",i,r);let s=[],o=Dt.empty();vi(r,(u,l)=>{let h=Kv(e,u,n);l=Ue(l);let p=i.Nu(h);if(l instanceof Ad)s.push(h);else{let m=Ya(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Ot(s);return new Sd(o,a,i.fieldTransforms)}function sB(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[Ev(e,r,n)],u=[i];if(s.length%2!=0)throw new F(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Ev(e,s[m])),u.push(s[m+1]);let l=[],h=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!_0(l,a[m])){let y=a[m],C=u[m];C=Ue(C);let N=o.Nu(y);if(C instanceof Ad)l.push(y);else{let R=Ya(C,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Ot(l);return new Sd(h,p,o.fieldTransforms)}function oB(t,e,n,r=!1){return Ya(n,t.Qu(r?4:3,e))}function Ya(t,e){if(v0(t=Ue(t)))return Wv("Unsupported field value:",e,t),y0(t,e);if(t instanceof qs)return function(r,i){if(!g0(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Ya(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Hj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ge.fromDate(r);return{timestampValue:hd(i.serializer,s)}}if(r instanceof Ge){let s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hd(i.serializer,s)}}if(r instanceof za)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $a)return{bytesValue:US(i.serializer,r._byteString)};if(r instanceof ut){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ha)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return kv(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${jd(r)}`)}(t,e)}function y0(t,e){let n={};return mS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vi(t,(r,i)=>{let s=Ya(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function v0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof za||t instanceof $a||t instanceof ut||t instanceof qs||t instanceof Ha)}function Wv(t,e,n){if(!v0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=jd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ev(t,e,n){if((e=Ue(e))instanceof Hs)return e._internalPath;if(typeof e=="string")return Kv(t,e);throw Rd("Field path arguments must be of type string or ",t,!1,void 0,n)}var aB=new RegExp("[~\\*/\\[\\]]");function Kv(t,e,n){if(e.search(aB)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hs(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rd(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new F(M.INVALID_ARGUMENT,a+t+u)}function _0(t,e){return t.some(n=>n.isEqual(e))}var Nd=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Tv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Qv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Tv=class extends Nd{data(){return super.data()}};function Qv(t,e){return typeof e=="string"?Kv(t,e):e instanceof Hs?e._internalPath:e._delegate._internalPath}function cB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qa=class{},Dv=class extends qa{};function I0(t,e,...n){let r=[];e instanceof qa&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof bv).length,a=s.filter(u=>u instanceof Md).length;if(o>1||o>0&&a>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Md=class t extends Dv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return E0(e._query,n),new yi(e.firestore,e.converter,my(e._query,n))}_parse(e){let n=Bd(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){pS(p,h);let y=[];for(let C of p)y.push(fS(u,s,C));m={arrayValue:{values:y}}}else m=fS(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||pS(p,h),m=oB(a,o,p,h==="in"||h==="not-in");return Le.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function w0(t,e,n){let r=e,i=Qv("where",t);return Md._create(i,r,n)}var bv=class t extends qa{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Wt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)E0(o,u),o=my(o,u)}(e._query,n),new yi(e.firestore,e.converter,my(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function fS(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(e)&&n.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(be.fromString(n));if(!H.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return UC(t,new H(r))}if(n instanceof ut)return UC(t,n._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(n)}.`)}function pS(t,e){if(!Array.isArray(t)||t.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E0(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Cv=class{convertValue(e,n="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return vi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>De(o.doubleValue));return new Ha(s)}convertGeoPoint(e){return new za(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Nv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){let n=Vn(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=be.fromString(e);ve(qS(r));let i=new od(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||Fn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function T0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ci=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xd=class extends Nd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ps(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Qv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ps=class extends xd{data(e={}){return super.data(e)}},Sv=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ci(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ps(this._firestore,this._userDataWriter,r.key,r,new ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ci(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:uB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function uB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function D0(t){t=kt(t,ut);let e=kt(t.firestore,jn);return X2(Gv(e),t._key).then(n=>lB(e,t,n))}var Pd=class extends Cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new $a(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}};function b0(t){t=kt(t,yi);let e=kt(t.firestore,jn),n=Gv(e),r=new Pd(e);return cB(t._query),eB(n,t._query).then(i=>new Sv(e,r,t,i))}function C0(t,e,n){t=kt(t,ut);let r=kt(t.firestore,jn),i=T0(t.converter,e,n);return $d(r,[m0(Bd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dn.none())])}function S0(t,e,n,...r){t=kt(t,ut);let i=kt(t.firestore,jn),s=Bd(i),o;return o=typeof(e=Ue(e))=="string"||e instanceof Hs?sB(s,"updateDoc",t._key,e,n,r):iB(s,"updateDoc",t._key,e),$d(i,[o.toMutation(t._key,dn.exists(!0))])}function A0(t){return $d(kt(t.firestore,jn),[new Fa(t._key,dn.none())])}function R0(t,e){let n=kt(t.firestore,jn),r=qv(t),i=T0(t.converter,e);return $d(n,[m0(Bd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function $d(t,e){return function(r,i){let s=new qt;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return $2(yield Z2(r),i,s)})),s.promise}(Gv(t),e)}function lB(t,e,n){let r=n.docs.get(e._key),i=new Pd(t);return new xd(t,i,e._key,r,new ci(n.hasPendingWrites,n.fromCache),e.converter)}function N0(){return new wv("serverTimestamp")}(function(e,n=!0){(function(i){Gs=i})(mr),gr(new Pt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new jn(new Ym(r.getProvider("auth-internal")),new ey(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),je(kC,"4.7.3",e),je(kC,"4.7.3","esm2017")})();var Ja=class{constructor(e){return e}},M0="firestore",Yv=class{constructor(){return ma(M0)}};var Jv=new B("angularfire2.firestore-instances");function dB(t,e){let n=Rl(M0,t,e);return n&&new Ja(n)}function hB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ja(r)}}var fB={provide:Yv,deps:[[new at,Jv]]},pB={provide:Ja,useFactory:dB,deps:[[new at,Jv],xn]};function Z8(t,...e){return je("angularfire",ei.full,"fst"),Rt([pB,fB,{provide:Jv,useFactory:hB(t),multi:!0,deps:[me,It,Ds,ti,[new at,Ca],[new at,Ts],...e]}])}var X8=Ne(R0,!0);var e5=Ne(h0,!0),t5=Ne(f0,!0);var n5=Ne(A0,!0);var r5=Ne(qv,!0);var i5=Ne(D0,!0);var s5=Ne(b0,!0);var o5=Ne(p0,!0);var a5=Ne(I0,!0);var c5=Ne(N0,!0),u5=Ne(C0,!0);var l5=Ne(S0,!0);var d5=Ne(w0,!0);export{U as a,Ee as b,gB as c,mB as d,w as e,nt as f,Re as g,ne as h,GA as i,$ as j,Rw as k,z as l,Xi as m,B as n,J as o,P as p,Hw as q,es as r,Mo as s,PR as t,Pu as u,PG as v,OG as w,ip as x,it as y,Uu as z,kG as A,LG as B,Mt as C,wp as D,jG as E,jx as F,Zx as G,MT as H,cP as I,uP as J,PT as K,OT as L,Tp as M,BG as N,kT as O,$G as P,RP as Q,zG as R,xP as S,FT as T,PP as U,HG as V,OP as W,qG as X,UT as Y,GG as Z,WG as _,Po as $,KG as aa,Oo as ba,KT as ca,QG as da,cO as ea,as as fa,v9 as ga,_9 as ha,I9 as ia,NO as ja,UO as ka,O9 as la,oW as ma,t1 as na,ub as oa,OW as pa,T3 as qa,D3 as ra,ba as sa,y6 as ta,v6 as ua,_6 as va,I6 as wa,w6 as xa,Ja as ya,Z8 as za,X8 as Aa,e5 as Ba,t5 as Ca,n5 as Da,r5 as Ea,i5 as Fa,s5 as Ga,o5 as Ha,a5 as Ia,c5 as Ja,u5 as Ka,l5 as La,d5 as Ma};
