import{a as Z}from"./chunk-KQWBWRA7.js";import{a as L,b as M,c as l,d as O}from"./chunk-NHZQKUB3.js";import{b as U}from"./chunk-KOWSTYMA.js";import{a as q}from"./chunk-JPN35WCD.js";import{b as K,e as W,f as X}from"./chunk-UDCWHXKS.js";import{Ea as E,Ga as N,Ia as i,Ja as n,Ka as u,La as I,Ma as p,Na as y,P as F,Pa as a,Rb as P,Sb as H,Tb as v,U as m,V as _,Vb as G,Wa as f,Xb as J,Y as c,Yb as z,_b as B,aa as T,cb as R,d as D,e as w,fa as A,ga as S,pb as V,rb as j,va as x,wa as k}from"./chunk-HR6EH2NC.js";var $=D(q()),d=(e,r)=>{let t=_(v),o=_(l);return t.currentUser?!0:($.default.fire({icon:"warning",title:"Acceso Restringido",text:"Debe iniciar sesi\xF3n para usar esta funcionalidad. Ser\xE1 redirigido al inicio.",confirmButtonText:"Aceptar"}).then(()=>{o.navigate(["/login"])}),!1)};var g=D(q());var b=class e{constructor(r,t,o){this.authService=r;this.firestoreService=t;this.router=o}canActivate(){return w(this,null,function*(){try{let r=this.authService.getCurrentUser();if(console.log("Usuario actual:",JSON.stringify(r,null,2)),!r)return g.default.fire({icon:"error",title:"Acceso Denegado",text:"Debes iniciar sesi\xF3n para acceder a esta secci\xF3n."}),this.router.navigate(["/login"]),!1;console.log("current "+r.uid);let o=(yield this.firestoreService.getDocument(`usuarios/${r.uid}`)).data();return console.log("correo :",o?.correo),console.log("rola :",o?.rol),o?.rol==="admin"?!0:(g.default.fire({icon:"error",title:"Acceso Denegado",text:"No tienes permisos para acceder a esta secci\xF3n."}),this.router.navigate(["/home"]),!1)}catch(r){return console.error("Error al verificar el rol del usuario:",r),g.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un problema al verificar los permisos."}),this.router.navigate(["/home"]),!1}})}static \u0275fac=function(t){return new(t||e)(m(Z),m(X),m(l))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};var Y=[{path:"",loadComponent:()=>import("./chunk-QLEZNLIQ.js").then(e=>e.HomeComponent)},{path:"login",loadComponent:()=>import("./chunk-MAHWQ7BF.js").then(e=>e.LoginComponent)},{path:"home",loadComponent:()=>import("./chunk-QLEZNLIQ.js").then(e=>e.HomeComponent)},{path:"altaveterinario",loadComponent:()=>import("./chunk-OLGVRLRP.js").then(e=>e.AltaVeterinarioComponent),canActivate:[d]},{path:"veterinarios",loadComponent:()=>import("./chunk-MDKBTYJP.js").then(e=>e.VeterinariosComponent),canActivate:[d]},{path:"animales",loadComponent:()=>import("./chunk-MLFQJRZT.js").then(e=>e.TablaAnimalesComponent),canActivate:[d,b]}];var ee={providers:[R({eventCoalescing:!0}),O(Y),T(U),P(()=>H({projectId:"pplaboratorio4",appId:"1:145294707061:web:b84d9338d9178f07116b3c",storageBucket:"pplaboratorio4.firebasestorage.app",apiKey:"AIzaSyCJwNDuJE4lEq-XwICdi1usU2TPUefeyWk",authDomain:"pplaboratorio4.firebaseapp.com",messagingSenderId:"145294707061"})),G(()=>J()),K(()=>W())]};function oe(e,r){if(e&1){let t=I();i(0,"button",11),p("click",function(){A(t);let s=y();return S(s.cerrarSesion())}),a(1," Cerrar Sesi\xF3n "),n()}}function ie(e,r){if(e&1){let t=I();i(0,"button",11),p("click",function(){A(t);let s=y();return S(s.iniciarSesion())}),a(1," Iniciar Sesi\xF3n "),n()}}var h=class e{constructor(r,t){this.auth=r;this.router=t}usuarioLogueado=null;ngOnInit(){z(this.auth,r=>{this.usuarioLogueado=r})}home(){this.router.navigate(["/home"])}veterinarios(){this.router.navigate(["/veterinarios"])}altaveterinario(){this.router.navigate(["/altaveterinario"])}iniciarSesion(){this.router.navigate(["/login"])}animales(){this.router.navigate(["/animales"])}cerrarSesion(){B(this.auth).then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||e)(k(v),k(l))};static \u0275cmp=c({type:e,selectors:[["app-navbar"]],standalone:!0,features:[f],decls:23,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"click"],[1,"d-flex"],["class","btn btn-outline-light",3,"click",4,"ngIf"],[1,"btn","btn-outline-light",3,"click"]],template:function(t,o){t&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),a(3,"Veterinaria"),n(),i(4,"button",3),u(5,"span",4),n(),i(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),p("click",function(){return o.home()}),a(10,"Inicio"),n()(),i(11,"li",7)(12,"a",8),p("click",function(){return o.veterinarios()}),a(13,"Veterinarios"),n()(),i(14,"li",7)(15,"a",8),p("click",function(){return o.altaveterinario()}),a(16,"Alta Veterinario"),n()(),i(17,"li",7)(18,"a",8),p("click",function(){return o.animales()}),a(19,"Animales"),n()()()(),i(20,"div",9),E(21,oe,2,0,"button",10)(22,ie,2,0,"button",10),n()()()),t&2&&(x(21),N("ngIf",o.usuarioLogueado),x(),N("ngIf",!o.usuarioLogueado))},dependencies:[j,V]})};var C=class e{title="pplaboratorio";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-root"]],standalone:!0,features:[f],decls:2,vars:0,template:function(t,o){t&1&&u(0,"app-navbar")(1,"router-outlet")},dependencies:[M,h]})};L(C,ee).catch(e=>console.error(e));
